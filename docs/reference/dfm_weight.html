<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>weight the feature frequencies in a dfm — dfm_weight • quanteda</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">quanteda</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/kbenoit/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>weight the feature frequencies in a dfm</h1>
    </div>

    
    <p>Returns a document by feature matrix with the feature frequencies weighted 
according to one of several common methods.  Some shortcuts that offer finer-grained control are:
<ul>
<li><code><a href='tf.html'>tf</a></code>  compute term frequency weights
</li>
<li><code><a href='tfidf.html'>tfidf</a></code>  compute term frequency-inverse document frequency weights
</li>
<li><code><a href='docfreq.html'>docfreq</a></code>  compute document frequencies of features
</li>
</ul></p>
    

    <pre><span class='fu'>dfm_weight</span>(<span class='no'>x</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"frequency"</span>, <span class='st'>"relFreq"</span>, <span class='st'>"relMaxFreq"</span>, <span class='st'>"logFreq"</span>,
  <span class='st'>"tfidf"</span>), <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>dfm_smooth</span>(<span class='no'>x</span>, <span class='kw'>smoothing</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd>document-feature matrix created by <a href='dfm.html'>dfm</a></dd>
      <dt>type</dt>
      <dd>a label of the weight type:
<dl class='dl-horizontal'>
 <dt><code>&quot;frequency&quot;</code></dt><dd>integer feature count (default when a dfm is created)</dd>
 <dt><code>&quot;relFreq&quot;</code></dt><dd>the proportion of the feature counts of total feature counts (aka relative frequency)</dd>
 <dt><code>&quot;relMaxFreq&quot;</code></dt><dd>the proportion of the feature counts of the highest feature count in a document</dd>
 <dt><code>&quot;logFreq&quot;</code></dt><dd>take the logarithm of 1 + the feature count, for base 10</dd>
 <dt><code>&quot;tfidf&quot;</code></dt><dd>Term-frequency * inverse document frequency. For a
  full explanation, see, for example, 
  <a href = 'http://nlp.stanford.edu/IR-book/html/htmledition/term-frequency-and-weighting-1.html'>http://nlp.stanford.edu/IR-book/html/htmledition/term-frequency-and-weighting-1.html</a>.
   This implementation will not return negative values.  For finer-grained
  control, call <code><a href='tfidf.html'>tfidf</a></code> directly.</dd>
  </dl>
</dd>
      <dt>weights</dt>
      <dd>if <code>type</code> is unused, then <code>weights</code> can be 
a named numeric vector of weights to be applied to the dfm, 
where the names of the vector correspond to feature labels of the dfm, and 
the weights will be applied as multipliers to the existing feature counts 
for the corresponding named fatures.  Any features not named will be 
assigned a weight of 1.0 (meaning they will be unchanged).</dd>
      <dt>smoothing</dt>
      <dd>constant added to the dfm cells for smoothing, default is 1</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The dfm with weighted values.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This converts a matrix from sparse to dense format, so may exceed memory
requirements depending on the size of your input matrix.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>For finer grained control, consider calling <code><a href='tf.html'>tf</a></code> or 
  <code><a href='tfidf.html'>tfidf</a></code> directly.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Manning, Christopher D., Prabhakar Raghavan, and Hinrich Schutze.
  <em>Introduction to Information Retrieval</em>. Vol. 1. Cambridge: Cambridge 
  University Press, 2008.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='tf.html'>tf</a></code>,  <code><a href='tfidf.html'>tfidf</a></code>, <code><a href='docfreq.html'>docfreq</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>dtm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='no'>data_corpus_inaugural</span>)

<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>apply</span>(<span class='no'>dtm</span>, <span class='fl'>1</span>, <span class='kw'>function</span>(<span class='no'>tf</span>) <span class='no'>tf</span>/<span class='fu'>max</span>(<span class='no'>tf</span>))
<span class='fu'><a href='topfeatures.html'>topfeatures</a></span>(<span class='no'>dtm</span>)</div><div class='output co'>#&gt;   the    of     ,   and     .    to    in     a   our  that 
#&gt; 10082  7103  7026  5310  4945  4534  2785  2246  2181  1789 </div><div class='input'><span class='no'>normDtm</span> <span class='kw'>&lt;-</span> <span class='fu'>dfm_weight</span>(<span class='no'>dtm</span>, <span class='st'>"relFreq"</span>)
<span class='fu'><a href='topfeatures.html'>topfeatures</a></span>(<span class='no'>normDtm</span>)</div><div class='output co'>#&gt;       the         ,        of       and         .        to        in       our 
#&gt; 3.7769798 2.7543249 2.6723451 2.0705754 1.9521675 1.7605244 1.0657659 0.8699158 
#&gt;         a        we 
#&gt; 0.8560737 0.7696054 </div><div class='input'><span class='no'>maxTfDtm</span> <span class='kw'>&lt;-</span> <span class='fu'>dfm_weight</span>(<span class='no'>dtm</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"relMaxFreq"</span>)
<span class='fu'><a href='topfeatures.html'>topfeatures</a></span>(<span class='no'>maxTfDtm</span>)</div><div class='output co'>#&gt;      the        ,       of      and        .       to       in      our 
#&gt; 66.02043 48.81481 46.85742 37.05476 35.74026 30.40888 19.03785 15.74194 
#&gt;        a       we 
#&gt; 15.03124 14.12388 </div><div class='input'><span class='no'>logTfDtm</span> <span class='kw'>&lt;-</span> <span class='fu'>dfm_weight</span>(<span class='no'>dtm</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"logFreq"</span>)
<span class='fu'><a href='topfeatures.html'>topfeatures</a></span>(<span class='no'>logTfDtm</span>)</div><div class='output co'>#&gt;      the        ,       of      and        .       to       in        a 
#&gt; 182.1856 174.3182 173.3837 167.1782 164.9945 163.2547 150.4070 143.6032 
#&gt;      our     that 
#&gt; 140.7424 138.9939 </div><div class='input'><span class='no'>tfidfDtm</span> <span class='kw'>&lt;-</span> <span class='fu'>dfm_weight</span>(<span class='no'>dtm</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"tfidf"</span>)
<span class='fu'><a href='topfeatures.html'>topfeatures</a></span>(<span class='no'>tfidfDtm</span>)</div><div class='output co'>#&gt;      america        union            &quot;       should constitution     congress 
#&gt;     52.68044     51.42053     48.41611     42.10689     40.21661     39.13390 
#&gt;      freedom          you      revenue         upon 
#&gt;     38.52534     35.99430     34.11779     33.88348 </div><div class='input'>
<span class='co'># combine these methods for more complex dfm_weightings, e.g. as in Section 6.4</span>
<span class='co'># of Introduction to Information Retrieval</span>
<span class='fu'>head</span>(<span class='no'>logTfDtm</span> <span class='kw'>&lt;-</span> <span class='fu'>dfm_weight</span>(<span class='no'>dtm</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"logFreq"</span>))</div><div class='output co'>#&gt; Document-feature matrix of: 58 documents, 9,232 features (91.6% sparse).
#&gt; (showing first 6 documents and first 6 features)
#&gt;                  features
#&gt; docs                fellow        - citizens       of      the senate
#&gt;   1789-Washington 1.477121 1.477121 1.698970 2.851258 3.064458      1
#&gt;   1793-Washington 1.000000 0.000000 1.000000 2.041393 2.113943      0
#&gt;   1797-Adams      1.477121 1.698970 1.698970 3.146128 3.212188      1
#&gt;   1801-Jefferson  1.845098 2.079181 1.845098 3.017033 3.113943      0
#&gt;   1805-Jefferson  1.903090 1.301030 2.000000 3.004321 3.155336      0
#&gt;   1809-Madison    1.000000 1.778151 1.000000 2.838849 3.017033      0</div><div class='input'><span class='fu'>head</span>(<span class='fu'><a href='tfidf.html'>tfidf</a></span>(<span class='no'>logTfDtm</span>, <span class='kw'>normalize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; Document-feature matrix of: 58 documents, 9,232 features (91.6% sparse).
#&gt; (showing first 6 documents and first 6 features)
#&gt;                  features
#&gt; docs                  fellow           -   citizens of the    senate
#&gt;   1789-Washington 0.10817242 0.011156901 0.06651828  0   0 0.8091855
#&gt;   1793-Washington 0.07323191 0.000000000 0.03915212  0   0 0.0000000
#&gt;   1797-Adams      0.10817242 0.012832555 0.06651828  0   0 0.8091855
#&gt;   1801-Jefferson  0.13512006 0.015704343 0.07223951  0   0 0.0000000
#&gt;   1805-Jefferson  0.13936692 0.009826859 0.07830425  0   0 0.0000000
#&gt;   1809-Madison    0.07323191 0.013430622 0.03915212  0   0 0.0000000</div><div class='input'>
<span class='co'>#' # apply numeric weights</span>
<span class='no'>str</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"apple is better than banana"</span>, <span class='st'>"banana banana apple much better"</span>)
(<span class='no'>mydfm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='no'>str</span>, <span class='kw'>remove</span> <span class='kw'>=</span> <span class='fu'><a href='stopwords.html'>stopwords</a></span>(<span class='st'>"english"</span>)))</div><div class='output co'>#&gt; Document-feature matrix of: 2 documents, 4 features (12.5% sparse).
#&gt; 2 x 4 sparse Matrix of class &quot;dfmSparse&quot;
#&gt;        features
#&gt; docs    apple better banana much
#&gt;   text1     1      1      1    0
#&gt;   text2     1      1      2    1</div><div class='input'><span class='fu'>dfm_weight</span>(<span class='no'>mydfm</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>apple</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>banana</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>much</span> <span class='kw'>=</span> <span class='fl'>0.5</span>))</div><div class='output co'>#&gt; Document-feature matrix of: 2 documents, 4 features (12.5% sparse).
#&gt; 2 x 4 sparse Matrix of class &quot;dfmSparse&quot;
#&gt;        features
#&gt; docs    apple better banana much
#&gt;   text1     5      1      3  0  
#&gt;   text2     5      1      6  0.5</div><div class='input'>

<span class='co'># smooth the dfm</span>
<span class='fu'>dfm_smooth</span>(<span class='no'>mydfm</span>, <span class='fl'>0.5</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 2 documents, 4 features (0% sparse).
#&gt; 2 x 4 Matrix of class &quot;dfmDense&quot;
#&gt;        features
#&gt; docs    apple better banana much
#&gt;   text1   1.5    1.5    1.5  0.5
#&gt;   text2   1.5    1.5    2.5  1.5</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Paul Nulty and Kenneth Benoit

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kenneth Benoit.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
