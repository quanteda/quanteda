<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate keyness statistics — textstat_keyness • quanteda</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Calculate keyness statistics — textstat_keyness" />
<meta property="og:description" content="Calculate &quot;keyness&quot;, a score for features that occur differentially across 
different categories.  Here, the categories are defined by reference to a
&quot;target&quot; document index in the dfm, with the reference group
consisting of all other documents." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate keyness statistics</h1>
    
    <div class="hidden name"><code>textstat_keyness.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate "keyness", a score for features that occur differentially across 
different categories.  Here, the categories are defined by reference to a
"target" document index in the <a href='dfm.html'>dfm</a>, with the reference group
consisting of all other documents.</p>
    </div>

    <pre class="usage"><span class='fu'>textstat_keyness</span>(
  <span class='no'>x</span>,
  <span class='kw'>target</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>measure</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"chi2"</span>, <span class='st'>"exact"</span>, <span class='st'>"lr"</span>, <span class='st'>"pmi"</span>),
  <span class='kw'>sort</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>correction</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"default"</span>, <span class='st'>"yates"</span>, <span class='st'>"williams"</span>, <span class='st'>"none"</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <a href='dfm.html'>dfm</a> containing the features to be examined for keyness</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>the document index (numeric, character or logical) identifying 
the document forming the "target" for computing keyness; all other 
documents' feature frequencies will be combined for use as a reference</p></td>
    </tr>
    <tr>
      <th>measure</th>
      <td><p>(signed) association measure to be used for computing keyness.
Currently available: <code>"chi2"</code>; <code>"exact"</code> (Fisher's exact test); 
<code>"lr"</code> for the likelihood ratio; <code>"pmi"</code> for pointwise mutual 
information.</p></td>
    </tr>
    <tr>
      <th>sort</th>
      <td><p>logical; if <code>TRUE</code> sort features scored in descending order 
of the measure, otherwise leave in original feature order</p></td>
    </tr>
    <tr>
      <th>correction</th>
      <td><p>if <code>"default"</code>, Yates correction is applied to 
<code>"chi2"</code>; William's correction is applied to <code>"lr"</code>; and no 
correction is applied for the <code>"exact"</code> and <code>"pmi"</code> measures. 
Specifying a value other than the default can be used to override the 
defaults, for instance to apply the Williams correction to the chi2 
measure.  Specifying a correction for the <code>"exact"</code> and <code>"pmi"</code> 
measures has no effect and produces a warning.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data.frame of computed statistics and associated p-values, where 
  the features scored name each row, and the number of occurrences for both 
  the target and reference groups. For <code>measure = "chi2"</code> this is the 
  chi-squared value, signed positively if the observed value in the target 
  exceeds its expected value; for <code>measure = "exact"</code> this is the 
  estimate of the odds ratio; for <code>measure = "lr"</code> this is the 
  likelihood ratio \(G2\) statistic; for <code>"pmi"</code> this is the pointwise
  mutual information statistics.</p>
<p><code>textstat_keyness</code> returns a data.frame of features and
  their keyness scores and frequency counts.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Bondi, M. &amp; Scott, M. (eds) (2010). <em>Keyness in 
  Texts</em>. Amsterdam, Philadelphia: John Benjamins.</p>  
<p>Stubbs, M. (2010). Three Concepts of Keywords. In <em>Keyness in 
  Texts</em>, Bondi, M. &amp; Scott, M. (eds): 1--42. Amsterdam, Philadelphia:
  John Benjamins.</p>  
<p>Scott, M. &amp; Tribble, C. (2006). <em>Textual Patterns: Keyword and Corpus 
  Analysis in Language Education</em>. Amsterdam: Benjamins: 55.</p>  
<p>Dunning, T. (1993). <a href='https://dl.acm.org/citation.cfm?id=972454'>Accurate Methods 
  for the Statistics of Surprise and Coincidence</a>. <em>Computational Linguistics</em>, 19(1): 61--74.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># compare pre- v. post-war terms using grouping</span>
<span class='no'>period</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='fu'><a href='docvars.html'>docvars</a></span>(<span class='no'>data_corpus_inaugural</span>, <span class='st'>"Year"</span>) <span class='kw'>&lt;</span> <span class='fl'>1945</span>, <span class='st'>"pre-war"</span>, <span class='st'>"post-war"</span>)
<span class='no'>dfmat1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='no'>data_corpus_inaugural</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>period</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>dfmat1</span>) <span class='co'># make sure 'post-war' is in the first row</span></div><div class='output co'>#&gt; Document-feature matrix of: 2 documents, 9,357 features (34.9% sparse).</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>tstat1</span> <span class='kw'>&lt;-</span> <span class='fu'>textstat_keyness</span>(<span class='no'>dfmat1</span>), <span class='fl'>10</span>)</div><div class='output co'>#&gt;      feature     chi2 p n_target n_reference
#&gt; 1         we 702.0019 0      960         779
#&gt; 2          - 395.1361 0      450         312
#&gt; 3          . 226.6654 0     1804        3141
#&gt; 4        our 187.8329 0      874        1307
#&gt; 5         us 186.0132 0      262         216
#&gt; 6          : 178.1283 0      105          29
#&gt; 7    america 176.6114 0      130          54
#&gt; 8      world 175.1354 0      188         123
#&gt; 9  americans 150.6480 0       67           7
#&gt; 10       new 141.3690 0      150          97</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span>(<span class='no'>tstat1</span>, <span class='fl'>10</span>)</div><div class='output co'>#&gt;           feature       chi2            p n_target n_reference
#&gt; 9348         upon  -51.91189 5.804246e-13       39         332
#&gt; 9349           it  -52.69911 3.888001e-13      257        1132
#&gt; 9350       public  -55.99225 7.271961e-14       11         213
#&gt; 9351       states  -59.13009 1.476597e-14       28         305
#&gt; 9352 constitution  -61.16666 5.218048e-15        6         200
#&gt; 9353           be  -72.21927 0.000000e+00      257        1224
#&gt; 9354       should  -83.10741 0.000000e+00       15         309
#&gt; 9355        which -160.14560 0.000000e+00       95         911
#&gt; 9356           of -179.17847 0.000000e+00     1437        5666
#&gt; 9357          the -299.85716 0.000000e+00     1988        8094</div><div class='input'>
<span class='co'># compare pre- v. post-war terms using logical vector</span>
<span class='no'>dfmat2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='no'>data_corpus_inaugural</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>textstat_keyness</span>(<span class='no'>dfmat2</span>, <span class='fu'><a href='docvars.html'>docvars</a></span>(<span class='no'>data_corpus_inaugural</span>, <span class='st'>"Year"</span>) <span class='kw'>&gt;=</span> <span class='fl'>1945</span>), <span class='fl'>10</span>)</div><div class='output co'>#&gt;      feature     chi2 p n_target n_reference
#&gt; 1         we 702.0019 0      960         779
#&gt; 2          - 395.1361 0      450         312
#&gt; 3          . 226.6654 0     1804        3141
#&gt; 4        our 187.8329 0      874        1307
#&gt; 5         us 186.0132 0      262         216
#&gt; 6          : 178.1283 0      105          29
#&gt; 7    america 176.6114 0      130          54
#&gt; 8      world 175.1354 0      188         123
#&gt; 9  americans 150.6480 0       67           7
#&gt; 10       new 141.3690 0      150          97</div><div class='input'>
<span class='co'># compare Trump 2017 to other post-war preseidents</span>
<span class='no'>dfmat3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='fu'><a href='corpus_subset.html'>corpus_subset</a></span>(<span class='no'>data_corpus_inaugural</span>, <span class='no'>period</span> <span class='kw'>==</span> <span class='st'>"post-war"</span>))
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>textstat_keyness</span>(<span class='no'>dfmat3</span>, <span class='kw'>target</span> <span class='kw'>=</span> <span class='st'>"2017-Trump"</span>), <span class='fl'>10</span>)</div><div class='output co'>#&gt;         feature     chi2            p n_target n_reference
#&gt; 1     protected 76.64466 0.000000e+00        5           1
#&gt; 2          will 51.44795 7.351897e-13       40         299
#&gt; 3         while 48.23022 3.790079e-12        6           7
#&gt; 4         obama 47.85727 4.584000e-12        3           0
#&gt; 5         we've 47.85727 4.584000e-12        3           0
#&gt; 6       america 31.45537 2.040775e-08       18         112
#&gt; 7         again 27.81145 1.337322e-07        9          33
#&gt; 8      everyone 27.67876 1.432269e-07        4           5
#&gt; 9          your 26.67898 2.402201e-07       11          50
#&gt; 10 transferring 25.54569 4.320292e-07        2           0</div><div class='input'>
<span class='co'># using the likelihood ratio method</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>textstat_keyness</span>(<span class='fu'><a href='dfm_weight.html'>dfm_smooth</a></span>(<span class='no'>dfmat3</span>), <span class='kw'>measure</span> <span class='kw'>=</span> <span class='st'>"lr"</span>, <span class='kw'>target</span> <span class='kw'>=</span> <span class='st'>"2017-Trump"</span>), <span class='fl'>10</span>)</div><div class='output co'>#&gt;      feature        G2            p n_target n_reference
#&gt; 1       will 24.604106 7.040156e-07       41         317
#&gt; 2    america 14.040255 1.789387e-04       19         130
#&gt; 3       your 10.435140 1.236402e-03       12          68
#&gt; 4      again  9.758516 1.784939e-03       10          51
#&gt; 5      while  9.504990 2.049139e-03        7          25
#&gt; 6   american  8.877690 2.886766e-03       12          76
#&gt; 7  protected  8.820562 2.978550e-03        6          19
#&gt; 8       back  6.853526 8.846653e-03        7          34
#&gt; 9        you  6.713202 9.570175e-03       14         121
#&gt; 10   country  5.821599 1.583055e-02       10          72</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Jiong Wei Lua, Patrick O. Perry, Jouni Kuha, Benjamin Lauderdale, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


