<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Trim a dfm using frequency threshold-based feature selection — dfm_trim • quanteda</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Trim a dfm using frequency threshold-based feature selection — dfm_trim" />
<meta property="og:description" content="Returns a document by feature matrix reduced in size based on
  document and term frequency, usually in terms of a minimum frequency, but
  may also be in terms of maximum frequencies.  Setting a combination of
  minimum and maximum frequencies will select features based on a range.
Feature selection is implemented by considering features across
  all documents, by summing them for term frequency, or counting the
  documents in which they occur for document frequency. Rank and quantile
  versions of these are also implemented, for taking the first \(n\)
  features in terms of descending order of overall global counts or document
  frequencies, or as a quantile of all frequencies." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Trim a dfm using frequency threshold-based feature selection</h1>
    
    <div class="hidden name"><code>dfm_trim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns a document by feature matrix reduced in size based on
  document and term frequency, usually in terms of a minimum frequency, but
  may also be in terms of maximum frequencies.  Setting a combination of
  minimum and maximum frequencies will select features based on a range.</p>
<p>Feature selection is implemented by considering features across
  all documents, by summing them for term frequency, or counting the
  documents in which they occur for document frequency. Rank and quantile
  versions of these are also implemented, for taking the first \(n\)
  features in terms of descending order of overall global counts or document
  frequencies, or as a quantile of all frequencies.</p>
    </div>

    <pre class="usage"><span class='fu'>dfm_trim</span>(
  <span class='no'>x</span>,
  <span class='kw'>min_termfreq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>max_termfreq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>termfreq_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"count"</span>, <span class='st'>"prop"</span>, <span class='st'>"rank"</span>, <span class='st'>"quantile"</span>),
  <span class='kw'>min_docfreq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>max_docfreq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>docfreq_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"count"</span>, <span class='st'>"prop"</span>, <span class='st'>"rank"</span>, <span class='st'>"quantile"</span>),
  <span class='kw'>sparsity</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fu'><a href='quanteda_options.html'>quanteda_options</a></span>(<span class='st'>"verbose"</span>),
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <a href='dfm.html'>dfm</a> object</p></td>
    </tr>
    <tr>
      <th>min_termfreq, max_termfreq</th>
      <td><p>minimum/maximum values of feature frequencies
across all documents, below/above which features will
  be removed</p></td>
    </tr>
    <tr>
      <th>termfreq_type</th>
      <td><p>how <code>min_termfreq</code> and <code>max_termfreq</code> are
interpreted.  <code>"count"</code> sums the frequencies; <code>"prop"</code> divides the
term frequencies by the total sum; <code>"rank"</code> is matched against the
inverted ranking of features in terms of overall frequency, so that 1, 2,
... are the highest and second highest frequency features, and so on;
<code>"quantile"</code> sets the cutoffs according to the quantiles (see
<code><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></code>) of term frequencies.</p></td>
    </tr>
    <tr>
      <th>min_docfreq, max_docfreq</th>
      <td><p>minimum/maximum values of a feature's document
frequency, below/above which features will be removed</p></td>
    </tr>
    <tr>
      <th>docfreq_type</th>
      <td><p>specify how <code>min_docfreq</code> and <code>max_docfreq</code> are
interpreted.   <code>"count"</code> is the same as <code><a href='docfreq.html'>docfreq</a>(x, scheme
= "count")</code>; <code>"prop"</code> divides the document frequencies by the total
sum; <code>"rank"</code> is matched against the inverted ranking of document
frequency, so that 1, 2, ... are the features with the highest and second
highest document frequencies, and so on; <code>"quantile"</code> sets the cutoffs
according to the quantiles (see <code><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></code>) of document
frequencies.</p></td>
    </tr>
    <tr>
      <th>sparsity</th>
      <td><p>equivalent to <code>1 - min_docfreq</code>, included for comparison
with <span class="pkg">tm</span></p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>print messages</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not used</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <a href='dfm.html'>dfm</a> reduced in features (with the same number of documents)</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Trimming a <a href='dfm.html'>dfm</a> object is an operation based on the <em>values</em>
  in the document-feature matrix.  To select subsets of a dfm based on the
  features themselves (meaning the feature labels from
  <code><a href='featnames.html'>featnames</a></code>) -- such as those matching a regular expression, or
  removing features matching a stopword list, use <code><a href='dfm_select.html'>dfm_select</a></code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='dfm_select.html'>dfm_select</a></code>, <code><a href='dfm_sample.html'>dfm_sample</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>(<span class='no'>dfmat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dfm.html'>dfm</a></span>(<span class='no'>data_corpus_inaugural</span>[<span class='fl'>1</span>:<span class='fl'>5</span>]))</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 1,948 features (69.5% sparse).</div><div class='input'>
<span class='co'># keep only words occurring &gt;= 10 times and in &gt;= 2 documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>min_termfreq</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>min_docfreq</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 107 features (16.3% sparse).</div><div class='input'>
<span class='co'># keep only words occurring &gt;= 10 times and in at least 0.4 of the documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>min_termfreq</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>min_docfreq</span> <span class='kw'>=</span> <span class='fl'>0.4</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 107 features (16.3% sparse).</div><div class='input'>
<span class='co'># keep only words occurring &lt;= 10 times and in &lt;=2 documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>max_termfreq</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>max_docfreq</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 1,675 features (76.5% sparse).</div><div class='input'>
<span class='co'># keep only words occurring &lt;= 10 times and in at most 3/4 of the documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>max_termfreq</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>max_docfreq</span> <span class='kw'>=</span> <span class='fl'>0.75</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 0 features.
#&gt; 5 x 0 sparse Matrix of class "dfm"
#&gt;                  features
#&gt; docs             
#&gt;   1789-Washington
#&gt;   1793-Washington
#&gt;   1797-Adams     
#&gt;   1801-Jefferson 
#&gt;   1805-Jefferson </div><div class='input'>
<span class='co'># keep only words occurring 5 times in 1000, and in 2 of 5 of documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>min_docfreq</span> <span class='kw'>=</span> <span class='fl'>0.4</span>, <span class='kw'>min_termfreq</span> <span class='kw'>=</span> <span class='fl'>0.005</span>, <span class='kw'>termfreq_type</span> <span class='kw'>=</span> <span class='st'>"prop"</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 30 features (7.33% sparse).</div><div class='input'>
<span class='co'># keep only words occurring frequently (top 20%) and in &lt;=2 documents</span>
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>min_termfreq</span> <span class='kw'>=</span> <span class='fl'>0.2</span>, <span class='kw'>max_docfreq</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>termfreq_type</span> <span class='kw'>=</span> <span class='st'>"quantile"</span>)</div><div class='output co'>#&gt; Document-feature matrix of: 5 documents, 1,676 features (76.5% sparse).</div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># compare to removeSparseTerms from the tm package</span>
(<span class='no'>dfmattm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='convert.html'>convert</a></span>(<span class='no'>dfmat</span>, <span class='st'>"tm"</span>))
<span class='kw pkg'>tm</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tm/man/removeSparseTerms.html'>removeSparseTerms</a></span>(<span class='no'>dfmattm</span>, <span class='fl'>0.7</span>)
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>min_docfreq</span> <span class='kw'>=</span> <span class='fl'>0.3</span>)
<span class='fu'>dfm_trim</span>(<span class='no'>dfmat</span>, <span class='kw'>sparsity</span> <span class='kw'>=</span> <span class='fl'>0.7</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Jiong Wei Lua, Patrick O. Perry, Jouni Kuha, Benjamin Lauderdale, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


