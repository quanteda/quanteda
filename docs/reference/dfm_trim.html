<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Trim a dfm using frequency threshold-based feature selection — dfm_trim • quanteda</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Trim a dfm using frequency threshold-based feature selection — dfm_trim"><meta property="og:description" content="Returns a document by feature matrix reduced in size based on
document and term frequency, usually in terms of a minimum frequency, but
may also be in terms of maximum frequencies.  Setting a combination of
minimum and maximum frequencies will select features based on a range.
Feature selection is implemented by considering features across
all documents, by summing them for term frequency, or counting the
documents in which they occur for document frequency. Rank and quantile
versions of these are also implemented, for taking the first \(n\)
features in terms of descending order of overall global counts or document
frequencies, or as a quantile of all frequencies."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0F398Z98L1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0F398Z98L1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/tokens_xptr.html">External pointer tokens objects</a>
    </li>
    <li>
      <a href="../articles/pkgdown/benchmarks_xptr.html">Performance benchmarks for v4</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/quanteda/quanteda" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Trim a dfm using frequency threshold-based feature selection</h1>
    <small class="dont-index">Source: <a href="https://github.com/quanteda/quanteda/blob/HEAD/R/dfm_trim.R" class="external-link"><code>R/dfm_trim.R</code></a></small>
    <div class="hidden name"><code>dfm_trim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns a document by feature matrix reduced in size based on
document and term frequency, usually in terms of a minimum frequency, but
may also be in terms of maximum frequencies.  Setting a combination of
minimum and maximum frequencies will select features based on a range.</p>
<p>Feature selection is implemented by considering features across
all documents, by summing them for term frequency, or counting the
documents in which they occur for document frequency. Rank and quantile
versions of these are also implemented, for taking the first \(n\)
features in terms of descending order of overall global counts or document
frequencies, or as a quantile of all frequencies.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dfm_trim</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  min_termfreq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_termfreq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  termfreq_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"prop"</span>, <span class="st">"rank"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  min_docfreq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_docfreq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  docfreq_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count"</span>, <span class="st">"prop"</span>, <span class="st">"rank"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  sparsity <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="quanteda_options.html">quanteda_options</a></span><span class="op">(</span><span class="st">"verbose"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a <a href="dfm.html">dfm</a> object</p></dd>


<dt>min_termfreq, max_termfreq</dt>
<dd><p>minimum/maximum values of feature frequencies
across all documents, below/above which features will
be removed</p></dd>


<dt>termfreq_type</dt>
<dd><p>how <code>min_termfreq</code> and <code>max_termfreq</code> are
interpreted.  <code>"count"</code> sums the frequencies; <code>"prop"</code> divides the
term frequencies by the total sum; <code>"rank"</code> is matched against the
inverted ranking of features in terms of overall frequency, so that 1, 2,
... are the highest and second highest frequency features, and so on;
<code>"quantile"</code> sets the cutoffs according to the quantiles (see
<code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>) of term frequencies.</p></dd>


<dt>min_docfreq, max_docfreq</dt>
<dd><p>minimum/maximum values of a feature's document
frequency, below/above which features will be removed</p></dd>


<dt>docfreq_type</dt>
<dd><p>specify how <code>min_docfreq</code> and <code>max_docfreq</code> are
interpreted.   <code>"count"</code> is the same as <code>[docfreq](x, scheme = "count")</code>; <code>"prop"</code> divides the document frequencies by the total
sum; <code>"rank"</code> is matched against the inverted ranking of document
frequency, so that 1, 2, ... are the features with the highest and second
highest document frequencies, and so on; <code>"quantile"</code> sets the cutoffs
according to the quantiles (see <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>) of document
frequencies.</p></dd>


<dt>sparsity</dt>
<dd><p>equivalent to <code>1 - min_docfreq</code>, included for comparison
with <span class="pkg">tm</span></p></dd>


<dt>verbose</dt>
<dd><p>print messages</p></dd>


<dt>...</dt>
<dd><p>not used</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <a href="dfm.html">dfm</a> reduced in features (with the same number of documents)</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Trimming a <a href="dfm.html">dfm</a> object is an operation based on the <em>values</em>
in the document-feature matrix.  To select subsets of a dfm based on the
features themselves (meaning the feature labels from
<code><a href="featnames.html">featnames()</a></code>) -- such as those matching a regular expression, or
removing features matching a stopword list, use <code><a href="dfm_select.html">dfm_select()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="dfm_select.html">dfm_select()</a></code>, <code><a href="dfm_sample.html">dfm_sample()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dfmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="dfm.html">dfm</a></span><span class="op">(</span><span class="fu"><a href="tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring &gt;= 10 times and in &gt;= 2 documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_termfreq <span class="op">=</span> <span class="fl">10</span>, min_docfreq <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 59 documents, 1,533 features (68.72% sparse) and 4 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              fellow-citizens  of the senate and house representatives :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington               1  71 116      1  48     2               2 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington               0  11  13      0   2     0               0 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams                    3 140 163      1 130     0               2 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson                2 104 130      0  81     0               0 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson                0 101 143      0  93     0               0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison                  1  69 104      0  43     0               0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              among to</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington     1 48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington     0  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams          4 72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson      1 61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson      7 83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison        0 61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ reached max_ndoc ... 53 more documents, reached max_nfeat ... 1,523 more features ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring &gt;= 10 times and in at least 0.4 of the documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_termfreq <span class="op">=</span> <span class="fl">10</span>, min_docfreq <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 59 documents, 1,534 features (68.74% sparse) and 4 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              fellow-citizens  of the senate and house representatives :</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington               1  71 116      1  48     2               2 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington               0  11  13      0   2     0               0 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams                    3 140 163      1 130     0               2 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson                2 104 130      0  81     0               0 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson                0 101 143      0  93     0               0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison                  1  69 104      0  43     0               0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              among to</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington     1 48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington     0  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams          4 72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson      1 61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson      7 83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison        0 61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ reached max_ndoc ... 53 more documents, reached max_nfeat ... 1,524 more features ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring &lt;= 10 times and in &lt;=2 documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, max_termfreq <span class="op">=</span> <span class="fl">10</span>, max_docfreq <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 59 documents, 5,675 features (97.86% sparse) and 4 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              notification 14th month fondest predilection flattering</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington            1    1     1       1            1          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington            0    0     0       0            0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams                 0    0     0       0            0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson             0    0     0       0            0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson             0    0     0       0            0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison               0    0     0       0            0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs              immutable asylum interruptions gradual</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington         2      1             1       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington         0      0             0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams              0      0             0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson          0      0             0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson          0      0             0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison            0      0             0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ reached max_ndoc ... 53 more documents, reached max_nfeat ... 5,665 more features ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring &lt;= 10 times and in at most 3/4 of the documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, max_termfreq <span class="op">=</span> <span class="fl">10</span>, max_docfreq <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 59 documents, 0 features (0.00% sparse) and 4 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ reached max_ndoc ... 53 more documents ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring 5 times in 1000, and in 2 of 5 of documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_docfreq <span class="op">=</span> <span class="fl">0.4</span>, min_termfreq <span class="op">=</span> <span class="fl">0.005</span>, termfreq_type <span class="op">=</span> <span class="st">"prop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 59 documents, 27 features (0.88% sparse) and 4 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs               of the and to have with that which by   ,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1789-Washington  71 116  48 48   12   17   18    36 20  70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1793-Washington  11  13   2  5    1    0    1     1  2   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1797-Adams      140 163 130 72    7   16   22    20 30 201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1801-Jefferson  104 130  81 61   10   20   24    25 16 128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1805-Jefferson  101 143  93 83   24   28   37    23 22 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1809-Madison     69 104  43 61    8   10    9    14 11  47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [ reached max_ndoc ... 53 more documents, reached max_nfeat ... 17 more features ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## quantiles</span></span></span>
<span class="r-in"><span><span class="va">toks</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.tokens.html">as.tokens</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span><span class="va">rep</span>, <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="fl">10</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dfmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="dfm.html">dfm</a></span><span class="op">(</span><span class="va">toks</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dfmat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 1 document, 10 features (0.00% sparse) and 0 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs     a b c d e f g h i j</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   text1 10 9 8 7 6 5 4 3 2 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only the top 20th percentile or higher features</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words above the 80th percentile</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_termfreq <span class="op">=</span> <span class="fl">0.800001</span>, termfreq_type <span class="op">=</span> <span class="st">"quantile"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removing features occurring: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - fewer than 9 times: 8</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Total features removed: 8 (80.0%).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 1 document, 2 features (0.00% sparse) and 0 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs     a b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   text1 10 9</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keep only words occurring frequently (top 20%) and in &lt;=2 documents</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_termfreq <span class="op">=</span> <span class="fl">0.2</span>, max_docfreq <span class="op">=</span> <span class="fl">2</span>, termfreq_type <span class="op">=</span> <span class="st">"quantile"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Document-feature matrix of: 1 document, 9 features (0.00% sparse) and 0 docvars.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> docs     a b c d e f g h i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   text1 10 9 8 7 6 5 4 3 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># compare to removeSparseTerms from the tm package</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">dfmattm</span> <span class="op">&lt;-</span> <span class="fu"><a href="convert.html">convert</a></span><span class="op">(</span><span class="va">dfmat</span>, <span class="st">"tm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tm</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tm/man/removeSparseTerms.html" class="external-link">removeSparseTerms</a></span><span class="op">(</span><span class="va">dfmattm</span>, <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, min_docfreq <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dfm_trim</span><span class="op">(</span><span class="va">dfmat</span>, sparsity <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

