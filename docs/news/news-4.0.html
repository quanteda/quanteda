<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Version 4.0 • quanteda</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Version 4.0"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0F398Z98L1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0F398Z98L1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/tokens_xptr.html">External pointer tokens objects</a>
    </li>
    <li>
      <a href="../articles/pkgdown/benchmarks_xptr.html">Performance benchmarks for v4</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/quanteda/quanteda" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small>4.0</small></h1>
      
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="4.0.0" id="quanteda-400">quanteda 4.0.0<small>2024-04-04</small><a class="anchor" aria-label="anchor" href="#quanteda-400"></a></h2>
<div class="section level3">
<h3 id="changes-and-additions-4-0-0">Changes and additions<a class="anchor" aria-label="anchor" href="#changes-and-additions-4-0-0"></a></h3>
<ul><li><p>Introduces the <code>tokens_xptr</code> objects that extend the <code>tokens</code> objects with external pointers for a greater efficiency. Once <code>tokens</code> objects are converted to <code>tokens_xptr</code> objects using <code><a href="../reference/tokens_xptr.html">as.tokens_xptr()</a></code>, <code>tokens_*.tokens_xptr()</code> methods are called automatically.</p></li>
<li><p>Improved C++ functions to allow the users to change the number of threads for parallel computing in more flexible manner using <code><a href="../reference/quanteda_options.html">quanteda_options()</a></code>. The value of <code>threads</code> can be changed in the middle of analysis pipeline.</p></li>
<li><p>Makes <code>"word4"</code> the default (word) tokeniser, with improved efficiency, language handling, and customisation options.</p></li>
<li><p>Replaced all occurrences of the <strong>magrittr</strong> <code>%&gt;%</code> pipe with the R pipe <code>|&gt;</code> introduced in R 4.1, although the <code>%&gt;%</code> pipe is still re-exported and therefore available to all users of <strong>quanteda</strong> without loading any additional packages.</p></li>
<li><p>Added <code>min_ntoken</code> and <code>max_ntoken</code> to <code><a href="../reference/tokens_subset.html">tokens_subset()</a></code> and <code><a href="../reference/dfm_subset.html">dfm_subset()</a></code> to extract documents based on number of tokens easily. It is equivalent to selecting documents using <code><a href="../reference/ntoken.html">ntoken()</a></code>.</p></li>
<li><p>Added a new argument <code>apply_if</code> that allows a tokens-based operation to apply only to documents that meet a logical condition. This argument has been added to <code><a href="../reference/tokens_select.html">tokens_select()</a></code>, <code><a href="../reference/tokens_compound.html">tokens_compound()</a></code>, <code><a href="../reference/tokens_replace.html">tokens_replace()</a></code>, <code><a href="../reference/tokens_split.html">tokens_split()</a></code>, and <code><a href="../reference/tokens_lookup.html">tokens_lookup()</a></code>. This is similar to applying <code><a href="https://purrr.tidyverse.org/reference/map_if.html" class="external-link">purrr::map_if()</a></code> to a tokens object, but is implemented within the function so that it can be performed efficiently in C++.</p></li>
<li><p>Added new arguments <code>append_key</code>, <code>separator</code> and <code>concatenator</code> to <code><a href="../reference/tokens_lookup.html">tokens_lookup()</a></code>. These allow tokens matched by dictionary values to be retained with their keys appended to them, separated by <code>separator</code>. The addition of the <code>concatenator</code> argument allows additional control at the lookup stage for tokens that will be concatenated from having matched multi-word dictionary values. (<a href="https://github.com/quanteda/quanteda/issues/2324" class="external-link">#2324</a>)</p></li>
<li><p>Added a new argument <code>remove_padding</code> to <code><a href="../reference/ntoken.html">ntoken()</a></code> and <code><a href="../reference/ntoken.html">ntype()</a></code> that allows for not counting padding that might have been left over from <code>tokens_remove(x, padding = TRUE</code>). This changes the previous number of types from <code><a href="../reference/ntoken.html">ntype()</a></code> when pads exist, by counting pads by default. (<a href="https://github.com/quanteda/quanteda/issues/2336" class="external-link">#2336</a>)</p></li>
<li><p>Removed dependency on <strong>RcppParallel</strong> to improve the stability of the C++ code. This change requires the users of Linux-like OS to install the Intel TBB library manually to enable parallel computing.</p></li>
</ul></div>
<div class="section level3">
<h3 id="removals-4-0-0">Removals<a class="anchor" aria-label="anchor" href="#removals-4-0-0"></a></h3>
<ul><li><p><code><a href="../reference/bootstrap_dfm.html">bootstrap_dfm()</a></code> was removed for character and corpus objects. The correct way to bootstrap sentences is not to tokenize them as sentences and then bootstrap them from the dfm. This is consistent with requiring the user to tokenise objects prior to forming dfms or other “downstream” objects.</p></li>
<li><p><code><a href="../reference/dfm.html">dfm()</a></code> no longer works on character or corpus objects, only on tokens or other dfm objects. This was deprecated in v3 and removed in v4.</p></li>
<li><p>Very old arguments to <code><a href="../reference/dfm.html">dfm()</a></code> options that were not visible but worked with warnings (such as <code>stem = TRUE</code>) are removed.</p></li>
<li><p>Deprecated or renamed arguments formerly passed in <code><a href="../reference/tokens.html">tokens()</a></code> that formerly mapped to the v3 arguments with a warning are removed.</p></li>
<li><p>Methods for <strong>readtext</strong> objects are removed, since these are data.frame objects that are straightforward to convert into a <code>corpus</code> object.</p></li>
<li><p><code><a href="../reference/topfeatures.html">topfeatures()</a></code> no longer works on an fcm object. (<a href="https://github.com/quanteda/quanteda/issues/2141" class="external-link">#2141</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecations-4-0-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-4-0-0"></a></h3>
<ul><li>Some on-the-fly calculations applied to character or corpus objects that require a temporary tokenisation are now deprecated. This includes:
<ul><li>
<code><a href="../reference/nsentence.html">nsentence()</a></code> – use <code>lengths(tokens(x, what = "sentence"))</code> instead;<br></li>
<li>
<code><a href="../reference/ntoken.html">ntype()</a></code> – use <code>ntype(tokens(x))</code> instead; and.</li>
<li>
<code><a href="../reference/ntoken.html">ntoken()</a></code> – use <code>ntoken(tokens(x))</code> instead.</li>
<li>
<code><a href="../reference/tokens_ngrams.html">char_ngrams()</a></code> – use <code>tokens_ngrams(tokens(x))</code> instead.</li>
</ul></li>
<li>
<code><a href="../reference/corpus.html">corpus.kwic()</a></code> is deprecated, with the suggestion to form a corpus from using <code>tokens_select(x, window = ...)</code> instead.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-stability-enhancements-4-0-0">Bug fixes and stability enhancements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-stability-enhancements-4-0-0"></a></h3>
<ul><li>
<code><a href="../reference/tokens_group.html">tokens_group()</a></code> works efficiently even when the number of documents and groups are very large.</li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

