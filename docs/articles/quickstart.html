<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Start Guide • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Quick Start Guide">
<meta property="og:description" content="quanteda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0F398Z98L1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0F398Z98L1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/tokens_xptr.html">External pointer tokens objects</a>
    </li>
    <li>
      <a href="../articles/pkgdown/benchmarks_xptr.html">Performance benchmarks for v4</a>
    </li>
    <li>
      <a href="../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick Start Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quanteda/quanteda/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="installing-the-package">Installing the package<a class="anchor" aria-label="anchor" href="#installing-the-package"></a>
</h2>
<p>Since <strong>quanteda</strong> is available on <a href="https://CRAN.R-project.org/package=quanteda" class="external-link">CRAN</a>, you can
install by using your GUI’s R package installer, or execute:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"quanteda"</span><span class="op">)</span></span></code></pre></div>
<p>See an instructions at <a href="https://github.com/quanteda/quanteda" class="external-link uri">https://github.com/quanteda/quanteda</a> to install the
(development) GitHub version.</p>
<div class="section level3">
<h3 id="additional-recommended-packages">Additional recommended packages:<a class="anchor" aria-label="anchor" href="#additional-recommended-packages"></a>
</h3>
<p>The following packages contain modularised functions that were
formerly part of <strong>quanteda</strong>, and we recommend that you
always install them along with <strong>quanteda</strong>:</p>
<ul>
<li>
<a href="https://github.com/quanteda/quanteda.textmodels" class="external-link"><strong>quanteda.textmodels</strong></a>:
Functions for scaling and classifying textual data.<br>
</li>
<li>
<a href="https://github.com/quanteda/quanteda.textstats" class="external-link"><strong>quanteda.textstats</strong></a>:
Statistics for textual data.<br>
</li>
<li>
<a href="https://github.com/quanteda/quanteda.textplots" class="external-link"><strong>quanteda.textplots</strong></a>:
Statistics for textual data.</li>
</ul>
<p>The following packages work well with or extend
<strong>quanteda</strong> and we recommend that you also install
them:</p>
<ul>
<li><p><a href="https://github.com/quanteda/readtext" class="external-link"><strong>readtext</strong></a>:
An easy way to read text data into R, from almost any input
format.</p></li>
<li><p><a href="https://github.com/quanteda/spacyr" class="external-link"><strong>spacyr</strong></a>:
NLP using the <a href="https://spacy.io" class="external-link">spaCy</a> library, including
part-of-speech tagging, entity recognition, and dependency
parsing.</p></li>
<li>
<p><a href="https://github.com/quanteda/quanteda.corpora" class="external-link"><strong>quanteda.corpora</strong></a>:
Additional textual data for use with <strong>quanteda</strong>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"quanteda/quanteda.corpora"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><a href="https://github.com/kbenoit/quanteda.dictionaries" class="external-link"><strong>quanteda.dictionaries</strong></a>:
Various dictionaries for use with <strong>quanteda</strong>, including
the function <code>liwcalike()</code>, an R implementation of the <a href="https://www.liwc.app" class="external-link">Linguistic Inquiry and Word Count</a>
approach to text analysis.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"kbenoit/quanteda.dictionaries"</span><span class="op">)</span></span></code></pre></div>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-corpus">Creating a Corpus<a class="anchor" aria-label="anchor" href="#creating-a-corpus"></a>
</h2>
<p>You load the package to access to functions and data in the
package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io">"quanteda"</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="currently-available-corpus-sources">Currently available corpus sources<a class="anchor" aria-label="anchor" href="#currently-available-corpus-sources"></a>
</h3>
<p><strong>quanteda</strong> has a simple and powerful companion package
for loading texts: <a href="https://github.com/quanteda/readtext" class="external-link"><strong>readtext</strong></a>.
The main function in this package, <code><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext()</a></code>, takes a file
or fileset from disk or a URL, and returns a type of data.frame that can
be used directly with the <code><a href="../reference/corpus.html">corpus()</a></code> constructor function, to
create a <strong>quanteda</strong> corpus object.</p>
<p><code><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext()</a></code> works on:</p>
<ul>
<li>text (<code>.txt</code>) files;</li>
<li>comma-separated-value (<code>.csv</code>) files;</li>
<li>XML formatted data;</li>
<li>data from the Facebook API, in JSON format;</li>
<li>data from the Twitter API, in JSON format; and</li>
<li>generic JSON data.</li>
</ul>
<p>The corpus constructor command <code><a href="../reference/corpus.html">corpus()</a></code> works directly
on:</p>
<ul>
<li>a vector of character objects, for instance that you have already
loaded into the workspace using other tools;</li>
<li>a <code>VCorpus</code> corpus object from the <strong>tm</strong>
package.</li>
<li>a data.frame containing a text column and any other document-level
metadata.</li>
</ul>
<div class="section level4">
<h4 id="building-a-corpus-from-a-character-vector">Building a corpus from a character vector<a class="anchor" aria-label="anchor" href="#building-a-corpus-from-a-character-vector"></a>
</h4>
<p>The simplest case is to create a corpus from a vector of texts
already in memory in R. This gives the advanced R user complete
flexibility with his or her choice of text inputs, as there are almost
endless ways to get a vector of texts into R.</p>
<p>If we already have the texts in this form, we can call the corpus
constructor function directly. We can demonstrate this on the built-in
character object of the texts about immigration policy extracted from
the 2010 election manifestos of the UK political parties (called
<code>data_char_ukimmig2010</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span><span class="op">)</span>  <span class="co"># build a new corpus from the texts</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_uk</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 9 documents, showing 9 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences</span></span>
<span><span class="co">##           BNP  1125   3280        88</span></span>
<span><span class="co">##     Coalition   142    260         4</span></span>
<span><span class="co">##  Conservative   251    499        15</span></span>
<span><span class="co">##        Greens   322    679        21</span></span>
<span><span class="co">##        Labour   298    683        29</span></span>
<span><span class="co">##        LibDem   251    483        14</span></span>
<span><span class="co">##            PC    77    114         5</span></span>
<span><span class="co">##           SNP    88    134         4</span></span>
<span><span class="co">##          UKIP   346    723        26</span></span></code></pre>
<p>If we wanted, we could add some document-level variables – what
quanteda calls <em>docvars</em> – to this corpus.</p>
<p>We can do this using the R’s <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> function to get the
names of the character vector <code>data_char_ukimmig2010</code>, and
assign this to a document variable (<em>docvar</em>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corp_uk</span>, <span class="st">"Party"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corp_uk</span>, <span class="st">"Year"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2010</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_uk</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 9 documents, showing 9 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences        Party Year</span></span>
<span><span class="co">##           BNP  1125   3280        88          BNP 2010</span></span>
<span><span class="co">##     Coalition   142    260         4    Coalition 2010</span></span>
<span><span class="co">##  Conservative   251    499        15 Conservative 2010</span></span>
<span><span class="co">##        Greens   322    679        21       Greens 2010</span></span>
<span><span class="co">##        Labour   298    683        29       Labour 2010</span></span>
<span><span class="co">##        LibDem   251    483        14       LibDem 2010</span></span>
<span><span class="co">##            PC    77    114         5           PC 2010</span></span>
<span><span class="co">##           SNP    88    134         4          SNP 2010</span></span>
<span><span class="co">##          UKIP   346    723        26         UKIP 2010</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="loading-in-files-using-the-readtext-package">Loading in files using the readtext package<a class="anchor" aria-label="anchor" href="#loading-in-files-using-the-readtext-package"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/quanteda/readtext" class="external-link">readtext</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Twitter json</span></span>
<span><span class="va">dat_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"social_media/zombies/tweets.json"</span><span class="op">)</span></span>
<span><span class="va">corp_twitter</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_json</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_twitter</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generic json - needs a textfield specifier</span></span>
<span><span class="va">dat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"corpora/sotu/sotu.json"</span>, text_field <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_sotu</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># text file</span></span>
<span><span class="va">dat_txtone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"corpora/project_gutenberg/pg2701.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtone</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># multiple text files</span></span>
<span><span class="va">dat_txtmultiple1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"corpora/inaugural/*.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtmultiple1</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># multiple text files with docvars from filenames</span></span>
<span><span class="va">dat_txtmultiple2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"corpora/inaugural/*.txt"</span>,</span>
<span>                             docvarsfrom <span class="op">=</span> <span class="st">"filenames"</span>, sep <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>                             docvarnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>, <span class="st">"President"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtmultiple2</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># XML data</span></span>
<span><span class="va">dat_xml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"xmlData/plant_catalog.xml"</span>, text_field <span class="op">=</span> <span class="st">"COMMON"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_xml</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># csv file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>inaug_speech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span>,</span>
<span>                     <span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          file <span class="op">=</span> <span class="st">"/tmp/inaug_texts.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dat_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"/tmp/inaug_texts.csv"</span>, text_field <span class="op">=</span> <span class="st">"inaug_speech"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_csv</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="working-with-a-quanteda-corpus">Working with a quanteda corpus<a class="anchor" aria-label="anchor" href="#working-with-a-quanteda-corpus"></a>
</h3>
<div class="section level4">
<h4 id="corpus-principles">Corpus principles<a class="anchor" aria-label="anchor" href="#corpus-principles"></a>
</h4>
<p>A corpus is designed to be a “library” of original documents that
have been converted to plain, UTF-8 encoded text, and stored along with
meta-data at the corpus level and at the document-level. We have a
special name for document-level meta-data: <em>docvars</em>. These are
variables or features that describe attributes of each document.</p>
<p>A corpus is designed to be a more or less static container of texts
with respect to processing and analysis. This means that the texts in
corpus are not designed to be changed internally through (for example)
cleaning or pre-processing steps, such as stemming or removing
punctuation. Rather, texts can be extracted from the corpus as part of
processing, and assigned to new objects, but the idea is that the corpus
will remain as an original reference copy so that other analyses – for
instance those in which stems and punctuation were required, such as
analysing a reading ease index – can be performed on the same
corpus.</p>
<p>A corpus is a special form of character vector, meaning most
functions that work with a character input will also work on a corpus.
But a corpus object (as do other <strong>quanteda</strong> core objects)
has its own convenient print method.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 59 documents and 4 docvars.</span></span>
<span><span class="co">## 1789-Washington :</span></span>
<span><span class="co">## "Fellow-Citizens of the Senate and of the House of Representa..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1793-Washington :</span></span>
<span><span class="co">## "Fellow citizens, I am again called upon by the voice of my c..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1797-Adams :</span></span>
<span><span class="co">## "When it was first perceived, in early times, that no middle ..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1801-Jefferson :</span></span>
<span><span class="co">## "Friends and Fellow Citizens: Called upon to undertake the du..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1805-Jefferson :</span></span>
<span><span class="co">## "Proceeding, fellow citizens, to that qualification which the..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1809-Madison :</span></span>
<span><span class="co">## "Unwilling to depart from examples of the most revered author..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [ reached max_ndoc ... 53 more documents ]</span></span></code></pre>
<p>To coerce a corpus to a plain character type, stripping its special
attributes, use <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington </span></span>
<span><span class="co">## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</span></span></code></pre>
<p>To summarize the texts from a corpus, we can call a
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method defined for a corpus.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 59 documents, showing 5 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Text Types Tokens Sentences Year  President FirstName</span></span>
<span><span class="co">##  1789-Washington   625   1537        23 1789 Washington    George</span></span>
<span><span class="co">##  1793-Washington    96    147         4 1793 Washington    George</span></span>
<span><span class="co">##       1797-Adams   826   2577        37 1797      Adams      John</span></span>
<span><span class="co">##   1801-Jefferson   717   1923        41 1801  Jefferson    Thomas</span></span>
<span><span class="co">##   1805-Jefferson   804   2380        45 1805  Jefferson    Thomas</span></span>
<span><span class="co">##                  Party</span></span>
<span><span class="co">##                   none</span></span>
<span><span class="co">##                   none</span></span>
<span><span class="co">##             Federalist</span></span>
<span><span class="co">##  Democratic-Republican</span></span>
<span><span class="co">##  Democratic-Republican</span></span></code></pre>
<p>We can save the output from the summary command as a data frame, and
plot some basic descriptive statistics with this information:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokeninfo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></span>
<span><span class="va">tokeninfo</span><span class="op">$</span><span class="va">Year</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="st">"Year"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tokeninfo</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Year</span>, y <span class="op">=</span> <span class="va">Tokens</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: ggplot2</span></span></code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># longest inaugural address: William Henry Harrison</span></span>
<span><span class="va">tokeninfo</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">tokeninfo</span><span class="op">$</span><span class="va">Tokens</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##             Text Types Tokens Sentences Year President     FirstName Party</span></span>
<span><span class="co">## 14 1841-Harrison  1896   9125       210 1841  Harrison William Henry  Whig</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="tools-for-handling-corpus-objects">Tools for handling corpus objects<a class="anchor" aria-label="anchor" href="#tools-for-handling-corpus-objects"></a>
</h3>
<div class="section level4">
<h4 id="adding-two-corpus-objects-together">Adding two corpus objects together<a class="anchor" aria-label="anchor" href="#adding-two-corpus-objects-together"></a>
</h4>
<p>The <code>+</code> operator provides a simple method for
concatenating two corpus objects. If they contain different sets of
document-level variables, these will be stitched together in a fashion
that guarantees that no information is lost. Corpus-level meta-data is
also concatenated.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">corp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">corp3</span> <span class="op">&lt;-</span> <span class="va">corp1</span> <span class="op">+</span> <span class="va">corp2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 4 documents, showing 4 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Text Types Tokens Sentences Year  President FirstName      Party</span></span>
<span><span class="co">##  1789-Washington   625   1537        23 1789 Washington    George       none</span></span>
<span><span class="co">##  1793-Washington    96    147         4 1793 Washington    George       none</span></span>
<span><span class="co">##       2017-Trump   582   1660        88 2017      Trump Donald J. Republican</span></span>
<span><span class="co">##       2021-Biden   812   2766       216 2021      Biden Joseph R. Democratic</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="subsetting-corpus-objects">Subsetting corpus objects<a class="anchor" aria-label="anchor" href="#subsetting-corpus-objects"></a>
</h4>
<p>There is a method of the <code><a href="../reference/corpus_subset.html">corpus_subset()</a></code> function
defined for corpus objects, where a new corpus can be extracted based on
logical conditions applied to <em>docvars</em>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 8 documents, showing 8 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences Year President FirstName      Party</span></span>
<span><span class="co">##  1993-Clinton   642   1833        81 1993   Clinton      Bill Democratic</span></span>
<span><span class="co">##  1997-Clinton   773   2436       111 1997   Clinton      Bill Democratic</span></span>
<span><span class="co">##     2001-Bush   621   1806        97 2001      Bush George W. Republican</span></span>
<span><span class="co">##     2005-Bush   772   2312        99 2005      Bush George W. Republican</span></span>
<span><span class="co">##    2009-Obama   938   2689       110 2009     Obama    Barack Democratic</span></span>
<span><span class="co">##    2013-Obama   814   2317        88 2013     Obama    Barack Democratic</span></span>
<span><span class="co">##    2017-Trump   582   1660        88 2017     Trump Donald J. Republican</span></span>
<span><span class="co">##    2021-Biden   812   2766       216 2021     Biden Joseph R. Democratic</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">President</span> <span class="op">==</span> <span class="st">"Adams"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 2 documents, showing 2 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##        Text Types Tokens Sentences Year President   FirstName</span></span>
<span><span class="co">##  1797-Adams   826   2577        37 1797     Adams        John</span></span>
<span><span class="co">##  1825-Adams  1003   3147        74 1825     Adams John Quincy</span></span>
<span><span class="co">##                  Party</span></span>
<span><span class="co">##             Federalist</span></span>
<span><span class="co">##  Democratic-Republican</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="exploring-corpus-texts">Exploring corpus texts<a class="anchor" aria-label="anchor" href="#exploring-corpus-texts"></a>
</h3>
<p>The <code>kwic</code> function (keywords-in-context) performs a
search for a word and allows us to view the contexts in which it
occurs:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tokens_inaugural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"terror"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 8 matches.                                                                    </span></span>
<span><span class="co">##     [1797-Adams, 1324]              fraud or violence, by | terror |</span></span>
<span><span class="co">##  [1933-Roosevelt, 111] nameless, unreasoning, unjustified | terror |</span></span>
<span><span class="co">##  [1941-Roosevelt, 285]      seemed frozen by a fatalistic | terror |</span></span>
<span><span class="co">##    [1961-Kennedy, 850]    alter that uncertain balance of | terror |</span></span>
<span><span class="co">##     [1981-Reagan, 811]     freeing all Americans from the | terror |</span></span>
<span><span class="co">##   [1997-Clinton, 1047]        They fuel the fanaticism of | terror |</span></span>
<span><span class="co">##   [1997-Clinton, 1647]  maintain a strong defense against | terror |</span></span>
<span><span class="co">##     [2009-Obama, 1619]     advance their aims by inducing | terror |</span></span>
<span><span class="co">##                                   </span></span>
<span><span class="co">##  , intrigue, or venality          </span></span>
<span><span class="co">##  which paralyzes needed efforts to</span></span>
<span><span class="co">##  , we proved that this            </span></span>
<span><span class="co">##  that stays the hand of           </span></span>
<span><span class="co">##  of runaway living costs.         </span></span>
<span><span class="co">##  . And they torment the           </span></span>
<span><span class="co">##  and destruction. Our children    </span></span>
<span><span class="co">##  and slaughtering innocents, we</span></span></code></pre>
<p>Patterns in <strong>quanteda</strong> can take the form of “glob”
patterns (the default), regular expressions, or fixed expressions, set
through the <code>valuetype</code> argument.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"terror"</span>, valuetype <span class="op">=</span> <span class="st">"regex"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 12 matches.                                                                            </span></span>
<span><span class="co">##     [1797-Adams, 1324]                   fraud or violence, by |  terror   |</span></span>
<span><span class="co">##  [1933-Roosevelt, 111]      nameless, unreasoning, unjustified |  terror   |</span></span>
<span><span class="co">##  [1941-Roosevelt, 285]           seemed frozen by a fatalistic |  terror   |</span></span>
<span><span class="co">##    [1961-Kennedy, 850]         alter that uncertain balance of |  terror   |</span></span>
<span><span class="co">##    [1961-Kennedy, 972]               of science instead of its |  terrors  |</span></span>
<span><span class="co">##     [1981-Reagan, 811]          freeing all Americans from the |  terror   |</span></span>
<span><span class="co">##    [1981-Reagan, 2187]        understood by those who practice | terrorism |</span></span>
<span><span class="co">##   [1997-Clinton, 1047]             They fuel the fanaticism of |  terror   |</span></span>
<span><span class="co">##   [1997-Clinton, 1647]       maintain a strong defense against |  terror   |</span></span>
<span><span class="co">##     [2009-Obama, 1619]          advance their aims by inducing |  terror   |</span></span>
<span><span class="co">##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism |</span></span>
<span><span class="co">##      [2021-Biden, 544]             , white supremacy, domestic | terrorism |</span></span>
<span><span class="co">##                                   </span></span>
<span><span class="co">##  , intrigue, or venality          </span></span>
<span><span class="co">##  which paralyzes needed efforts to</span></span>
<span><span class="co">##  , we proved that this            </span></span>
<span><span class="co">##  that stays the hand of           </span></span>
<span><span class="co">##  . Together let us explore        </span></span>
<span><span class="co">##  of runaway living costs.         </span></span>
<span><span class="co">##  and prey upon their neighbors    </span></span>
<span><span class="co">##  . And they torment the           </span></span>
<span><span class="co">##  and destruction. Our children    </span></span>
<span><span class="co">##  and slaughtering innocents, we   </span></span>
<span><span class="co">##  , which we will eradicate        </span></span>
<span><span class="co">##  that we must confront and</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"communist*"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 2 matches.                                                                  </span></span>
<span><span class="co">##   [1949-Truman, 832] the actions resulting from the | Communist  |</span></span>
<span><span class="co">##  [1961-Kennedy, 510]     required - not because the | Communists |</span></span>
<span><span class="co">##                            </span></span>
<span><span class="co">##  philosophy are a threat to</span></span>
<span><span class="co">##  may be doing it,</span></span></code></pre>
<p>Using <code><a href="../reference/phrase.html">phrase()</a></code> we can also look up multi-word
expressions.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show context of the first six occurrences of "United States"</span></span>
<span><span class="fu"><a href="../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="fu"><a href="../reference/phrase.html">phrase</a></span><span class="op">(</span><span class="st">"United States"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 6 matches.                                                                             </span></span>
<span><span class="co">##  [1789-Washington, 433:434]            of the people of the | United States |</span></span>
<span><span class="co">##  [1789-Washington, 529:530]          more than those of the | United States |</span></span>
<span><span class="co">##       [1797-Adams, 524:525]     saw the Constitution of the | United States |</span></span>
<span><span class="co">##     [1797-Adams, 1716:1717]      to the Constitution of the | United States |</span></span>
<span><span class="co">##     [1797-Adams, 2480:2481] support the Constitution of the | United States |</span></span>
<span><span class="co">##   [1805-Jefferson, 441:442]       sees a taxgatherer of the | United States |</span></span>
<span><span class="co">##                                       </span></span>
<span><span class="co">##  a Government instituted by themselves</span></span>
<span><span class="co">##  . Every step by which                </span></span>
<span><span class="co">##  in a foreign country.                </span></span>
<span><span class="co">##  , and a conscientious determination  </span></span>
<span><span class="co">##  , I entertain no doubt               </span></span>
<span><span class="co">##  ? These contributions enable us</span></span></code></pre>
<p>In the above summary, <code>Year</code> and <code>President</code>
are variables associated with each document. We can access such
variables with the <code><a href="../reference/docvars.html">docvars()</a></code> function.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># inspect the document-level variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Year  President FirstName                 Party</span></span>
<span><span class="co">## 1 1789 Washington    George                  none</span></span>
<span><span class="co">## 2 1793 Washington    George                  none</span></span>
<span><span class="co">## 3 1797      Adams      John            Federalist</span></span>
<span><span class="co">## 4 1801  Jefferson    Thomas Democratic-Republican</span></span>
<span><span class="co">## 5 1805  Jefferson    Thomas Democratic-Republican</span></span>
<span><span class="co">## 6 1809    Madison     James Democratic-Republican</span></span></code></pre>
<p>More corpora are available from the <a href="https://github.com/quanteda/quanteda.corpora" class="external-link">quanteda.corpora</a>
package.</p>
</div>
</div>
<div class="section level2">
<h2 id="tokenizing-texts">Tokenizing texts<a class="anchor" aria-label="anchor" href="#tokenizing-texts"></a>
</h2>
<p>To simply tokenize a text, quanteda provides a powerful command
called <code><a href="../reference/tokens.html">tokens()</a></code>. This produces an intermediate object,
consisting of a list of tokens in the form of character vectors, where
each element of the list corresponds to an input document.</p>
<p><code><a href="../reference/tokens.html">tokens()</a></code> is deliberately conservative, meaning that it
does not remove anything from the text unless told to do so.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>text1 <span class="op">=</span> <span class="st">"This is $10 in 999 different ways,\n up and down; left and right!"</span>,</span>
<span>         text2 <span class="op">=</span> <span class="st">"@koheiw7 working: on #quanteda 2day\t4ever, http://textasdata.com?page=123."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      ","         "up"        "and"       "down"     </span></span>
<span><span class="co">## [ ... and 5 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@koheiw7"                        "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>,  remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "in"        "different" "ways"     </span></span>
<span><span class="co">##  [7] "up"        "and"       "down"      "left"      "and"       "right"    </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@koheiw7"                        "working"                        </span></span>
<span><span class="co">## [3] "on"                              "#quanteda"                      </span></span>
<span><span class="co">## [5] "2day"                            "4ever"                          </span></span>
<span><span class="co">## [7] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      "up"        "and"       "down"      "left"     </span></span>
<span><span class="co">## [ ... and 2 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@koheiw7"                        "working"                        </span></span>
<span><span class="co">## [3] "on"                              "#quanteda"                      </span></span>
<span><span class="co">## [5] "2day"                            "4ever"                          </span></span>
<span><span class="co">## [7] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>,  remove_punct <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "in"        "different" "ways"     </span></span>
<span><span class="co">##  [7] ","         "up"        "and"       "down"      ";"         "left"     </span></span>
<span><span class="co">## [ ... and 3 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@koheiw7"                        "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      ","         "up"        "and"       "down"     </span></span>
<span><span class="co">## [ ... and 5 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@koheiw7"                        "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">FALSE</span>, remove_separators <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      " "         "is"        " "         "$"         "10"       </span></span>
<span><span class="co">##  [7] " "         "in"        " "         "999"       " "         "different"</span></span>
<span><span class="co">## [ ... and 18 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">##  [1] "@koheiw7"  " "         "working"   ":"         " "         "on"       </span></span>
<span><span class="co">##  [7] " "         "#quanteda" " "         "2day"      "\t"        "4ever"    </span></span>
<span><span class="co">## [ ... and 3 more ]</span></span></code></pre>
<p>We also have the option to tokenize characters:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"Great website: http://textasdata.com?page=123."</span>, what <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e"</span></span>
<span><span class="co">## [ ... and 32 more ]</span></span></code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"Great website: http://textasdata.com?page=123."</span>, what <span class="op">=</span> <span class="st">"character"</span>,</span>
<span>         remove_separators <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t"</span></span>
<span><span class="co">## [ ... and 34 more ]</span></span></code></pre>
<p>and sentences:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sentence level       </span></span>
<span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>,</span>
<span>         <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>,</span>
<span>         <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span><span class="op">)</span>,</span>
<span>          what <span class="op">=</span> <span class="st">"sentence"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 3 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "Kurt Vongeut said; only assholes use semi-colons."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "Today is Thursday in Canberra:  It is yesterday in London."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text3 :</span></span>
<span><span class="co">## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span></span></code></pre>
<div class="section level4">
<h4 id="pre-processing-tokens">“Pre-processing” tokens<a class="anchor" aria-label="anchor" href="#pre-processing-tokens"></a>
</h4>
<p>A common step at the tokenisation stage is to apply certain
transformations to the text such as removal of punctuation, numbers, or
symbols, removing “stopwords”, removing URLs, etc. Other options might
involve rules for how to treat hyphenated words (splitting versus
preserving them) or whether or how to treat special characters such as
those found in social media (hashtags starting with “#” or usernames
starting with “@”).</p>
<p>The approach taken in <strong>quanteda</strong> to what is common
known as “pre-processing” the texts involves three core principles.</p>
<ol style="list-style-type: decimal">
<li><p>No transformations should be applied directly to the corpus
object (except for cleaning out non-textual elements or correcting
errors). The corpus should remain a complete representation of the
original documents.</p></li>
<li>
<p>Tokenisation through the default <strong>quanteda</strong>
tokeniser involves only two forms of token manipulation: removals and
splits. By default, the tokeniser is very conservative, removing only
separators by default.</p>
<ol style="list-style-type: lower-alpha">
<li><p><em>Removals</em> take the the form of <code>remove_*</code>
arguments – e.g., <code>remove_punct</code> for removing punctuation
characters – that remove classes of characters or tokens, such as URLs.
With the sole exception of <code>remove_separators = TRUE</code>, all of
these removals are <code>FALSE</code> by default.</p></li>
<li><p><em>Splits</em> take the form of two arguments,
<code>split_hyphens</code> and <code>split_tags</code>, both
<code>FALSE</code> by default. “Tags” in this case means whether to
break up social media hashtags or whether to preserve them.</p></li>
</ol>
</li>
<li><p>Other transformations, including (word-based) patterns or
removals, case transformations, n-gram formation, chunking, etc. all
take place through additional functions, such as
<code><a href="../reference/tokens_tolower.html">tokens_tolower()</a></code> to lower-case tokens or tokens_remove()`
to remove patterns such as stopwords.</p></li>
</ol>
<p>Pre-defined stopwords are available defined for numerous languages,
accessed through the <code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords()</a></code> function (which re-exports
the <a href="https://github.com/quanteda/stopwords" class="external-link">stopwords</a>
package function <code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords()</a></code>):</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span>, <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "i"          "me"         "my"         "myself"     "we"        </span></span>
<span><span class="co">##  [6] "our"        "ours"       "ourselves"  "you"        "your"      </span></span>
<span><span class="co">## [11] "yours"      "yourself"   "yourselves" "he"         "him"       </span></span>
<span><span class="co">## [16] "his"        "himself"    "she"        "her"        "hers"</span></span></code></pre>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"ru"</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</span></span></code></pre>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"ar"</span>, source <span class="op">=</span> <span class="st">"misc"</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="splitting-and-compounding-tokens">Splitting and compounding tokens<a class="anchor" aria-label="anchor" href="#splitting-and-compounding-tokens"></a>
</h4>
<p>With <code><a href="../reference/tokens_compound.html">tokens_compound()</a></code>, we can concatenate multi-word
expressions and keep them as a single feature in subsequent
analyses:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"New York City is located in the United States."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/tokens_compound.html">tokens_compound</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="../reference/phrase.html">phrase</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York City"</span>, <span class="st">"United States"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "New_York_City" "is"            "located"       "in"           </span></span>
<span><span class="co">## [5] "the"           "United_States" "."</span></span></code></pre>
<p>Conversely, the function <code><a href="../reference/tokens_split.html">tokens_split()</a></code> can split tokens
by a pattern.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"one~two~three"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/tokens_split.html">tokens_split</a></span><span class="op">(</span>separator <span class="op">=</span> <span class="st">"~"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "one"   "two"   "three"</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="constructing-a-document-feature-matrix">Constructing a document-feature matrix<a class="anchor" aria-label="anchor" href="#constructing-a-document-feature-matrix"></a>
</h2>
<p>In order to perform statistical analysis such as document scaling, we
must extract a matrix associating values for certain features with each
document. In quanteda, we use the <code><a href="../reference/dfm.html">dfm()</a></code> function to produce
such a matrix. “dfm” is short for <em>document-feature matrix</em>, and
always refers to documents in rows and “features” as columns. We fix
this dimensional orientation because it is standard in data analysis to
have a unit of analysis as a row, and features or variables pertaining
to each unit as columns. We call them “features” rather than terms,
because features are more general than terms: they can be defined as raw
terms, stemmed terms, the parts of speech of terms, terms after
stopwords have been removed, or a dictionary class to which a term
belongs. Features can be entirely general, such as ngrams or syntactic
dependencies, and we leave this open-ended.</p>
<p>The <code><a href="../reference/dfm.html">dfm()</a></code> function is slightly less conservative than
the <code><a href="../reference/tokens.html">tokens()</a></code> function, applying one transformation by
default: converting the texts to lower case, via the default
<code>tolower = TRUE</code>.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_inaug_post1990</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a dfm</span></span>
<span><span class="va">dfmat_inaug_post1990</span> <span class="op">&lt;-</span> <span class="va">corp_inaug_post1990</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dfmat_inaug_post1990</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 8 documents, 2,691 features (73.83% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           my fellow citizens   , today we celebrate the mystery  of</span></span>
<span><span class="co">##   1993-Clinton  7      5        2 139    10 52         3  89       1  46</span></span>
<span><span class="co">##   1997-Clinton  6      7        7 131     5 42         1 133       0  96</span></span>
<span><span class="co">##   2001-Bush     3      1        9 110     2 47         0  53       0  58</span></span>
<span><span class="co">##   2005-Bush     2      3        6 120     3 37         1 142       0 116</span></span>
<span><span class="co">##   2009-Obama    2      1        1 130     6 62         0 135       0  82</span></span>
<span><span class="co">##   2013-Obama    3      3        6  99     4 68         0 104       0  69</span></span>
<span><span class="co">## [ reached max_ndoc ... 2 more documents, reached max_nfeat ... 2,681 more features ]</span></span></code></pre>
<div class="section level4">
<h4 id="analysing-the-document-feature-matrix">Analysing the document-feature matrix<a class="anchor" aria-label="anchor" href="#analysing-the-document-feature-matrix"></a>
</h4>
<p>The dfm can be inspected in the Environment pane in RStudio, or by
calling R’s <code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code> function. Calling
<code><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html" class="external-link">textplot_wordcloud()</a></code> on a dfm will display a wordcloud.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_uk</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 9 documents, 1,547 features (83.78% sparse) and 0 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           immigration unparalleled crisis bnp can solve current birth</span></span>
<span><span class="co">##   BNP                   21            1      2  13   1     2       4     4</span></span>
<span><span class="co">##   Coalition              6            0      0   0   0     0       1     0</span></span>
<span><span class="co">##   Conservative           3            0      0   0   2     0       0     0</span></span>
<span><span class="co">##   Greens                 8            0      0   0   1     0       0     0</span></span>
<span><span class="co">##   Labour                13            0      0   0   1     0       0     0</span></span>
<span><span class="co">##   LibDem                 5            0      0   0   2     0       0     0</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           rates indigenous</span></span>
<span><span class="co">##   BNP              2          5</span></span>
<span><span class="co">##   Coalition        0          0</span></span>
<span><span class="co">##   Conservative     0          0</span></span>
<span><span class="co">##   Greens           0          0</span></span>
<span><span class="co">##   Labour           0          0</span></span>
<span><span class="co">##   LibDem           0          0</span></span>
<span><span class="co">## [ reached max_ndoc ... 3 more documents, reached max_nfeat ... 1,537 more features ]</span></span></code></pre>
<p>To access a list of the most frequently occurring features, we can
use <code><a href="../reference/topfeatures.html">topfeatures()</a></code>:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 20 most frequent words</span></span>
<span><span class="fu"><a href="../reference/topfeatures.html">topfeatures</a></span><span class="op">(</span><span class="va">dfmat_uk</span>, <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## immigration     british      people      asylum     britain          uk </span></span>
<span><span class="co">##          66          37          35          29          28          27 </span></span>
<span><span class="co">##      system  population     country         new  immigrants      ensure </span></span>
<span><span class="co">##          27          21          20          19          17          17 </span></span>
<span><span class="co">##       shall citizenship      social    national         bnp     illegal </span></span>
<span><span class="co">##          17          16          14          14          13          13 </span></span>
<span><span class="co">##        work     percent </span></span>
<span><span class="co">##          13          12</span></span></code></pre>
<p>Plotting a word cloud can be done using the
<strong>quanteda.textplots</strong> package for a <code>dfm</code> class
object.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"quanteda.textplots"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html" class="external-link">textplot_wordcloud</a></span><span class="op">(</span><span class="va">dfmat_uk</span>, min_count <span class="op">=</span> <span class="fl">6</span>, random_order <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                   rotation <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>                   color <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"Dark2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-29-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="grouping-documents-by-document-variable">Grouping documents by document variable<a class="anchor" aria-label="anchor" href="#grouping-documents-by-document-variable"></a>
</h4>
<p>Often, we are interested in analysing how texts differ according to
substantive factors which may be encoded in the document variables,
rather than simply by the boundaries of the document files. We can group
documents that share the same value for a document variable using
<code><a href="../reference/dfm_group.html">dfm_group()</a></code>. When the variables for selection in functions
such as <code><a href="../reference/dfm_group.html">dfm_group()</a></code> are document variables attached to the
dfm, then they can be referred to directly.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_pres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">Party</span><span class="op">)</span></span></code></pre></div>
<p>We can sort the features of this dfm, by default in terms of greatest
frequency first, and inspect it:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dfm_sort.html">dfm_sort</a></span><span class="op">(</span><span class="va">dfmat_pres</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 2 documents, 4,371 features (32.21% sparse) and 1 docvar.</span></span>
<span><span class="co">##             features</span></span>
<span><span class="co">## docs          us world can people must new america nation freedom time</span></span>
<span><span class="co">##   Democratic 149    89  96     80   93  87      65     73      37   52</span></span>
<span><span class="co">##   Republican 140   107  84     89   68  66      83     62      84   58</span></span>
<span><span class="co">## [ reached max_nfeat ... 4,361 more features ]</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="dictionary-functions">Dictionary functions<a class="anchor" aria-label="anchor" href="#dictionary-functions"></a>
</h3>
<p>For some applications we have prior knowledge of sets of words that
are indicative of traits we would like to measure from the text. For
example, a general list of positive words might indicate positive
sentiment in a movie review, or we might have a dictionary of political
terms which are associated with a particular ideological stance. In
these cases, it is sometimes useful to treat these groups of words as
equivalent for the purposes of analysis, and sum their counts into
classes.</p>
<p>For example, let’s look at how words associated with terrorism and
words associated with the economy vary by President in the inaugural
speeches corpus. From the original corpus, we select Presidents since
Clinton:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_inaug_post1991</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1991</span><span class="op">)</span></span></code></pre></div>
<p>Now we define a demonstration dictionary:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dictionary.html">dictionary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>terror <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span><span class="op">)</span>,</span>
<span>                        economy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can use the dictionary when making the dfm:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_inaug_post1991_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">corp_inaug_post1991</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_lookup.html">tokens_lookup</a></span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">dict</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_post1991_dict</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 8 documents, 2 features (12.50% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           terror economy</span></span>
<span><span class="co">##   1993-Clinton      0       8</span></span>
<span><span class="co">##   1997-Clinton      1       8</span></span>
<span><span class="co">##   2001-Bush         0       4</span></span>
<span><span class="co">##   2005-Bush         1       6</span></span>
<span><span class="co">##   2009-Obama        1      10</span></span>
<span><span class="co">##   2013-Obama        1       6</span></span>
<span><span class="co">## [ reached max_ndoc ... 2 more documents ]</span></span></code></pre>
<p>The constructor function <code><a href="../reference/dictionary.html">dictionary()</a></code> also works with
several common “foreign” dictionary formats: the LIWC and Provalis
Research’s Wordstat format. For instance, we can load the LIWC and apply
this to the Presidential inaugural speech corpus:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dictliwc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dictionary.html">dictionary</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"LIWC2001_English.dic"</span>, format <span class="op">=</span> <span class="st">"LIWC"</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">[</span><span class="fl">52</span><span class="op">:</span><span class="fl">58</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>                      <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>                      <span class="fu"><a href="../reference/dfm_lookup.html">dfm_lookup</a></span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">dictliwc</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_subset</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 7 documents, 10 features (1.43% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           Pronoun  I  We Self You Other Negate Assent Article Preps</span></span>
<span><span class="co">##   1993-Clinton     179 15 124  139  12    12     25      2     115   211</span></span>
<span><span class="co">##   1997-Clinton     188  8 134  142   0    27     27      4     194   310</span></span>
<span><span class="co">##   2001-Bush        176 15 111  126   8    16     40      2     104   208</span></span>
<span><span class="co">##   2005-Bush        171 10  92  102  25    20     25      5     174   307</span></span>
<span><span class="co">##   2009-Obama       243  5 156  161  17    34     40      2     185   294</span></span>
<span><span class="co">##   2013-Obama       219  7 168  175   5    21     42      1     148   265</span></span>
<span><span class="co">## [ reached max_ndoc ... 1 more document ]</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="further-examples">Further examples<a class="anchor" aria-label="anchor" href="#further-examples"></a>
</h2>
<div class="section level3">
<h3 id="similarities-between-texts">Similarities between texts<a class="anchor" aria-label="anchor" href="#similarities-between-texts"></a>
</h3>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io">"quanteda.textstats"</a></span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_post1980</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1980</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">tstat_obama</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span><span class="va">dfmat_inaug_post1980</span>,</span>
<span>                              <span class="va">dfmat_inaug_post1980</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2009-Obama"</span>, <span class="st">"2013-Obama"</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>                              margin <span class="op">=</span> <span class="st">"documents"</span>, method <span class="op">=</span> <span class="st">"cosine"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">tstat_obama</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/dotchart.html" class="external-link">dotchart</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">tstat_obama</span><span class="op">)</span><span class="op">$</span><span class="st">"2013-Obama"</span>, xlab <span class="op">=</span> <span class="st">"Cosine similarity"</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<p><img src="../../../../../Dropbox%20(Personal)/GitHub/quanteda/quanteda/articles/images/fig1.png" width="700"></p>
<p>We can use these distances to plot a dendrogram, clustering
presidents.<br>
First, load some data.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_corpus_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="st">"https://quanteda.org/data/data_corpus_sotu.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dfmat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_sotu</span>, <span class="va">Date</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1980-01-01"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">dfmat_sotu</span>, min_termfreq <span class="op">=</span> <span class="fl">5</span>, min_docfreq <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>Now we compute clusters and plot the dendrogram:</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hierarchical clustering - get distances on normalized dfm</span></span>
<span><span class="va">tstat_dist</span> <span class="op">&lt;-</span> <span class="va">dfmat_sotu</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/dfm_weight.html">dfm_weight</a></span><span class="op">(</span>scheme <span class="op">=</span> <span class="st">"prop"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_dist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># hiarchical clustering the distance object</span></span>
<span><span class="va">pres_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/hclust.html" class="external-link">hclust</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">as.dist</a></span><span class="op">(</span><span class="va">tstat_dist</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># label with document names</span></span>
<span><span class="va">pres_cluster</span><span class="op">$</span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/docnames.html">docnames</a></span><span class="op">(</span><span class="va">dfmat_sotu</span><span class="op">)</span></span>
<span><span class="co"># plot as a dendrogram</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pres_cluster</span>, xlab <span class="op">=</span> <span class="st">""</span>, sub <span class="op">=</span> <span class="st">""</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span><span class="op">)</span></span></code></pre></div>
<p><img src="../../../../../Dropbox%20(Personal)/GitHub/quanteda/quanteda/articles/images/fig2.png" width="700"></p>
<p>We can also look at term similarities:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tstat_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span><span class="va">dfmat_sotu</span>, <span class="va">dfmat_sotu</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                          method <span class="op">=</span> <span class="st">"cosine"</span>, margin <span class="op">=</span> <span class="st">"features"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">tstat_sim</span><span class="op">)</span>, <span class="va">head</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $fair</span></span>
<span><span class="co">##      time    better       far  strategi        us     lower      long       one   practic      onli </span></span>
<span><span class="co">## 0.8266617 0.8135324 0.8036487 0.8002557 0.8000581 0.7995066 0.7977770 0.7949795 0.7944127 0.7899963 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $health</span></span>
<span><span class="co">##    system      issu    privat      need    expand    reform   support      hous    dramat      mani </span></span>
<span><span class="co">## 0.9232094 0.9229859 0.9175231 0.9145142 0.9118901 0.9072380 0.9072374 0.9063870 0.9051588 0.9045851 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $terror</span></span>
<span><span class="co">## terrorist    coalit    cheney      evil  homeland   liberti      11th    sudden     regim   septemb </span></span>
<span><span class="co">## 0.8539894 0.8179609 0.8175618 0.7949619 0.7878223 0.7697739 0.7603221 0.7556575 0.7533021 0.7502925 </span></span></code></pre>
</div>
<div class="section level3">
<h3 id="scaling-document-positions">Scaling document positions<a class="anchor" aria-label="anchor" href="#scaling-document-positions"></a>
</h3>
<p>Here is a demonstration of unsupervised document scaling comparing
the “Wordfish” model:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/quanteda/quanteda.textmodels" class="external-link">"quanteda.textmodels"</a></span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st">"quanteda.textplots"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dfmat_ire</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">tmod_wf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html" class="external-link">textmodel_wordfish</a></span><span class="op">(</span><span class="va">dfmat_ire</span>, dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># plot the Wordfish estimates by party</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_scale1d.html" class="external-link">textplot_scale1d</a></span><span class="op">(</span><span class="va">tmod_wf</span>, groups <span class="op">=</span> <span class="fu"><a href="../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">dfmat_ire</span>, <span class="st">"party"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: quanteda.textmodels</span></span></code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-41-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="topic-models">Topic models<a class="anchor" aria-label="anchor" href="#topic-models"></a>
</h3>
<p><strong>quanteda</strong> makes it very easy to fit topic models as
well, e.g.:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/quanteda/quanteda.textmodels" class="external-link">"quanteda.textmodels"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">quant_dfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">quant_dfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">quant_dfm</span>, min_termfreq <span class="op">=</span> <span class="fl">4</span>, max_docfreq <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span>    <span class="va">quant_dfm</span> </span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 14 documents, 1,263 features (64.52% sparse) and 6 docvars.</span></span>
<span><span class="co">##                       features</span></span>
<span><span class="co">## docs                   supplementary april said period severe today report</span></span>
<span><span class="co">##   Lenihan, Brian (FF)              7     1    1      2      3     9      6</span></span>
<span><span class="co">##   Bruton, Richard (FG)             0     1    0      0      0     6      5</span></span>
<span><span class="co">##   Burton, Joan (LAB)               0     0    4      2      0    13      1</span></span>
<span><span class="co">##   Morgan, Arthur (SF)              1     3    0      3      0     4      0</span></span>
<span><span class="co">##   Cowen, Brian (FF)                0     0    0      4      1     3      2</span></span>
<span><span class="co">##   Kenny, Enda (FG)                 1     4    4      1      0     2      0</span></span>
<span><span class="co">##                       features</span></span>
<span><span class="co">## docs                   difficulties months road</span></span>
<span><span class="co">##   Lenihan, Brian (FF)             6     11    2</span></span>
<span><span class="co">##   Bruton, Richard (FG)            0      0    1</span></span>
<span><span class="co">##   Burton, Joan (LAB)              1      3    1</span></span>
<span><span class="co">##   Morgan, Arthur (SF)             1      4    2</span></span>
<span><span class="co">##   Cowen, Brian (FF)               1      3    2</span></span>
<span><span class="co">##   Kenny, Enda (FG)                0      2    5</span></span>
<span><span class="co">## [ reached max_ndoc ... 8 more documents, reached max_nfeat ... 1,253 more features ]</span></span></code></pre>
<p>Now we can fit the topic model and plot it:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="http://www.structuraltopicmodel.com/" class="external-link">"stm"</a></span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/quanteda/quanteda.textmodels" class="external-link">"quanteda.textmodels"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span>    <span class="va">my_lda_fit20</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/stm/man/stm.html" class="external-link">stm</a></span><span class="op">(</span><span class="va">quant_dfm</span>, K <span class="op">=</span> <span class="fl">20</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_lda_fit20</span><span class="op">)</span>    </span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: stm</span></span></code></pre>
<pre><code><span><span class="co">## stm v1.3.7 successfully loaded. See ?stm for help. </span></span>
<span><span class="co">##  Papers, resources, and other materials at structuraltopicmodel.com</span></span></code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-43-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
