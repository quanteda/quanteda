<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Structure of quanteda • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="The Structure of quanteda">
<meta property="og:description" content="quanteda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0F398Z98L1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0F398Z98L1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/tokens_xptr.html">External pointer tokens objects</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/benchmarks_xptr.html">Performance benchmarks for v4</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Structure of quanteda</h1>
                        <h4 data-toc-skip class="author">Kenneth
Benoit</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quanteda/quanteda/blob/HEAD/vignettes/pkgdown/design.Rmd" class="external-link"><code>vignettes/pkgdown/design.Rmd</code></a></small>
      <div class="hidden name"><code>design.Rmd</code></div>

    </div>

    
    
<p>See <a href="https://quanteda.io" class="uri">https://quanteda.io</a>
for additional tutorials, examples, and general documentation.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
</div>
<div class="section level2">
<h2 id="the-logic-of-quantedas-design">The logic of Quanteda’s design<a class="anchor" aria-label="anchor" href="#the-logic-of-quantedas-design"></a>
</h2>
<div class="section level3">
<h3 id="grammatical-rules">Grammatical rules<a class="anchor" aria-label="anchor" href="#grammatical-rules"></a>
</h3>
<p>The “grammar” of the package is split between three basic types of
functions and data objects:</p>
<ul>
<li><p><em>object</em>: a constructor function named
<code>object()</code> that returns an object of class <em>object</em>.
Example: <code><a href="../../reference/corpus.html">corpus()</a></code> constructs a <code>corpus</code> class
object.</p></li>
<li><p><em>object</em><code>_</code><em>verb</em>: a function that
inputs an object of class <em>object</em>, and returns a a modified
<em>object</em> class object. There are no exceptions to this naming
rule, so that even functions that operate on character objects following
this convention, such as <code><a href="../../reference/char_tolower.html">char_tolower()</a></code>. (Ok, so there is a
slight exception: we abbreviated <code>character</code> to
<code>char</code>!)</p></li>
<li><p><code>data_</code><em>class</em><code>_</code><em>descriptor</em>:
data objects are named this way to clearly distinguish them and to make
them easy to identify in the index. The first part identifies them as
data, the second names their object class, and the third component is a
descriptor. Example: <code>data_corpus_inaugural</code> is the
<strong>quanteda</strong> <code><a href="../../reference/corpus.html">corpus()</a></code> class object consisting
of the US presidents’ inaugural addresses.</p></li>
<li><p><code>text</code><em>general</em><code>_</code><em>specific</em>:
functions that input a <strong>quanteda</strong> object and return the
result of an analysis, as a new type of object. Only the underscored
functions that begin with <code>text</code> break the previous rule
about the first part of the name identifying the object class that is
input and output. Examples: <code>textstat_readability()</code> takes a
character or corpus as input, and returns a data.frame;
<code>textplot_xray()</code> takes a <code>kwic</code> object as input,
and generates a dispersion plot (named “x-ray” because of its similarity
to the plot produced by Kindle).</p></li>
<li><p>Extensions of R functions: These are commonly used R functions,
such as <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, that are also defined for
<strong>quanteda</strong> objects. Examples: <code><a href="../../reference/head.dfm.html">head.dfm()</a></code>,
coercion functions such as <code>as.list.tokens</code>, and Boolean
class type checking functions such as <code><a href="../../reference/as.dfm.html">is.dfm()</a></code>. Many
post-estimation methods defined for <code>lm</code> objects, for
instance <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>, are also defined for most
<code>textmodel</code> objects</p></li>
<li><p>R-like functions. These are functions for
<strong>quanteda</strong> objects that follow naming conventions and
functionality that should be very familiar to users of R. Example:
<code><a href="../../reference/ndoc.html">ndoc()</a></code> returns the number of documents in a corpus, tokens,
or dfm object, similar to <code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">base::nrow()</a></code>. Note that like
<code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow()</a></code>, <code><a href="../../reference/ndoc.html">ndoc()</a></code> is not plural. Other examples
include <code><a href="../../reference/docnames.html">docnames()</a></code> and <code><a href="../../reference/featnames.html">featnames()</a></code> – similar
to <code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames()</a></code> and <code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames()</a></code>.</p></li>
<li>
<p>Grammatical exceptions: Every language has these, usually due to
path dependency from historical development, and
<strong>quanteda</strong> is no exception. The list, however, is
short:</p>
<ul>
<li>
<code><a href="../../reference/convert.html">convert()</a></code>: converts from a dfm to foreign package
formats<br>
</li>
<li>
<code><a href="../../reference/sparsity.html">sparsity()</a></code>: returns the sparsity (as a proportion) of a
dfm<br>
</li>
<li>
<code><a href="../../reference/topfeatures.html">topfeatures()</a></code>: returns a named vector of the counts of
the most frequently occurring features in a <code>dfm</code>.</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="constructors-for-core-data-types">Constructors for core data types<a class="anchor" aria-label="anchor" href="#constructors-for-core-data-types"></a>
</h3>
<p>The <strong>quanteda</strong> package consists of a few core data
types, created by calling constructors with identical names. These are
all “nouns” in the sense of declaring what they construct. This follows
very similar R behaviour in many of the core R objects, such as
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>, <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>, etc.</p>
<p>Core object types and their constructor functions:</p>
<ul>
<li>
<code>corpus</code><br>
</li>
<li><code>tokens</code></li>
<li>
<code>dfm</code><br>
</li>
<li><code>fcm</code></li>
<li><code>kwic</code></li>
<li><code>dictionary</code></li>
</ul>
<p>Note that a core object class in <strong>quanteda</strong> is also
the <code>character</code> atomic type, for which there is no
constructor function, and is abbreviated as <code>char</code> in the
function nomenclature.</p>
</div>
<div class="section level3">
<h3 id="functions-for-manipulating-core-data-types">Functions for manipulating core data types<a class="anchor" aria-label="anchor" href="#functions-for-manipulating-core-data-types"></a>
</h3>
<div class="section level4">
<h4 id="naming-convention">Naming convention<a class="anchor" aria-label="anchor" href="#naming-convention"></a>
</h4>
<p>All functions that begin with the name of a core object class will
both <em>input</em> and <em>output</em> an object of this class, without
exception.</p>
<p>This replaces the approach in versions up to 0.9.8.5 where a general
method such as <code>selectFeatures()</code> was defined for each
applicable class of core object. This approach made the specific
function behaviour unpredictable from the description of the general
behaviour. It also made it difficult to get an overview of the
functionality available for each object class. By renaming these
functions following the convention of object class, followed by an
underscore, followed by a verb (or verb-like statement), we could both
separate the behaviours into specific functions, as well as clearly
describe through the function name what action is taken on what type of
object.</p>
</div>
<div class="section level4">
<h4 id="advantages">Advantages<a class="anchor" aria-label="anchor" href="#advantages"></a>
</h4>
<p>In our view, the advantages of this clarity outweigh whatever
advantages might be found from overloading a generic function. The
functions <code><a href="../../reference/corpus_sample.html">corpus_sample()</a></code>, <code><a href="../../reference/tokens_sample.html">tokens_sample()</a></code>,
and <code><a href="../../reference/dfm_sample.html">dfm_sample()</a></code>, for instance, are clearer to understand
and read from a package’s function index, than the previously overloaded
version of <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> that could be dispatched on a corpus,
tokenized text, or dfm object. Additionally, in the case of
<code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code>, we avoid the namespace “conflict” caused by
redefining the function as a generic, so that it could be overloaded.
Our new, more specific naming conventions therefore reduce the
likelihood of namespace conflicts with other packages.</p>
</div>
<div class="section level4">
<h4 id="why-are-some-operations-unavailable-for-specific-object-types">Why are some operations unavailable for specific object types?<a class="anchor" aria-label="anchor" href="#why-are-some-operations-unavailable-for-specific-object-types"></a>
</h4>
<p>Because not every operation makes sense for every object type. Take
the example of a “feature co-occurrence matrix”, or <code>fcm</code>.
Construction of a feature co-occurrence matrix is slightly different
from constructing a dfm. Unlike the “Swiss-army” knife approach of
<code><a href="../../reference/dfm.html">dfm()</a></code>, which can operate directly on texts,
<code><a href="../../reference/fcm.html">fcm()</a></code> works only on tokens, since the definition of how the
context of co-occurrence is defined is dependent on token sequences and
therefore highly dependent on tokenization options. In addition,
<code><a href="../../reference/fcm.html">fcm()</a></code> is likely to be used a lot less frequently, and
primarily by more expert users.</p>
<p>Furthermore, many functions defined for <code><a href="../../reference/fcm.html">fcm()</a></code> objects
<em>should</em> be unavailable, because they violate the principles of
the object. For instance, <code>fcm_wordstem()</code> and
<code><a href="../../reference/dfm_tolower.html">fcm_tolower()</a></code> should not be applied to <code><a href="../../reference/fcm.html">fcm()</a></code>
objects, because collapsing these and treating them as equivalent (as
for a dfm object) is incorrect for the context in which co-occurrence is
defined, such as a +/- 5 token window.</p>
</div>
</div>
<div class="section level3">
<h3 id="extensions-of-core-r-functions">Extensions of core R functions<a class="anchor" aria-label="anchor" href="#extensions-of-core-r-functions"></a>
</h3>
<p>Many simple base R functions – simpler at least than the example of
<code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> cited above – are still extended to quanteda
objects through overloading. The logic of allowing is that these
functions, e.g. <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> for a dfm, are very simple and very
common, and therefore are well-known to users. Furthermore, they can
operate in only one fashion on the object for which they are defined,
such as <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> combining two dfm objects by joining
columns. Similar functions extended in this way include
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code>, and
<code><a href="https://rdrr.io/r/base/t.html" class="external-link">t()</a></code>. Most of these functions are so natural that their
documentation is not included in the package index.</p>
</div>
<div class="section level3">
<h3 id="additions-to-core-r-like-functions">Additions to core R(-like) functions<a class="anchor" aria-label="anchor" href="#additions-to-core-r-like-functions"></a>
</h3>
<p>Additional functions have been defined for <strong>quanteda</strong>
objects that are <a href="#r-like-functions">very similar to simple base
R functions</a>, but are not named using the <code>class_action</code>
format because they do not return a modified object of the same class.
These follow as closely as possible the naming conventions found in the
base R functions that are similar. For instance, <code><a href="../../reference/docnames.html">docnames()</a></code>
and <code><a href="../../reference/featnames.html">featnames()</a></code> return the document names of various
<strong>quanteda</strong> objects, in the same way that
<code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames()</a></code> does for matrix-like objects (a matrix,
data.frame, data.table, etc.). The abbreviation of
<code><a href="../../reference/featnames.html">featnames()</a></code> is intentionally modeled on
<code><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames()</a></code>. Likewise, <code><a href="../../reference/ndoc.html">ndoc()</a></code> returns the
number of documents, using the singular form similar to
<code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow()</a></code> and <code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="workflow-principles">Workflow principles<a class="anchor" aria-label="anchor" href="#workflow-principles"></a>
</h2>
<p><strong>quanteda</strong> is designed both to facilitate and to
enforce a “best-practice” workflow. This includes the following basic
principles.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Corpus texts should remain <em>unchanged</em> during
subsequent analysis and processing.</strong> In other words, after
<em>loading</em> and <em>encoding</em>, we should discourage users from
modifying a corpus of texts as a form of processing, so that the corpus
can act as a library and record of the original texts, prior to any
downstream processing. This not only aids in replication, but also means
that a corpus presents the unmodified texts to which any processing,
feature selection, transformations, or sampling may be applied or
reapplied, without hard-coding any changes made as part of the process
of analyzing the texts. The only exception is to reshape the units of
text in a corpus, but we will record the details of this reshaping to
make it relatively easy to reverse unit changes. Since the definition of
a “document” is part of the process of loading texts into a corpus,
however, rather than processing, we will take a less stringent line on
this aspect of changing a corpus.</p></li>
<li><p><strong>A corpus should be capable of holding additional objects
that will be associated with the corpus, such as dictionaries, stopword,
and phrase lists.</strong> These will be named objects, that can be
invoked when using (for instance) <code><a href="../../reference/dfm.html">dfm()</a></code>. This allows a
corpus to contain all of the additional objects that would normally be
associated with it, rather than requiring a set of separate,
extra-corpus objects.</p></li>
<li><p><strong>Objects should record histories of the operations applied
to them.</strong> This is for purposes of analytic transparency. A
tokens object and a dfm object, for instance, should have settings that
record the processing options applied to the texts or corpus from which
they were created. These provide a record of what was done to the text,
and where it came from. Examples are <code><a href="../../reference/tokens_tolower.html">tokens_tolower()</a></code>,
<code><a href="../../reference/tokens_wordstem.html">dfm_wordstem()</a></code>, and settings such as
<code>remove_twitter</code>. They also include any objects used in
feature selection, such as dictionaries or stopword lists.</p></li>
<li><p><strong>A dfm should always be a <em>documents</em> (or document
groups) in rows by <em>features</em> in columns.</strong> A
<code>dfm</code> object may be transposed but then it is no longer a
<code>dfm</code> class object.</p></li>
<li><p><strong>Encoding of texts</strong> should always be
UTF-8.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="basic-text-analysis-workflow">Basic text analysis workflow<a class="anchor" aria-label="anchor" href="#basic-text-analysis-workflow"></a>
</h2>
<div class="section level3">
<h3 id="working-with-a-corpus-documents-and-features">Working with a corpus, documents, and features<a class="anchor" aria-label="anchor" href="#working-with-a-corpus-documents-and-features"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<p><strong>Creating the corpus</strong></p>
<p>Reading files, probably using <code>readtext()</code> from the
<strong>readtext</strong> package, then creating a corpus using
<code><a href="../../reference/corpus.html">corpus()</a></code>, making sure the texts have a common encoding, and
adding document variables (<code><a href="../../reference/docvars.html">docvars()</a></code>) and metadata
(<code>meta</code>).</p>
</li>
<li>
<p><strong>Defining and delimiting documents</strong></p>
<p>Defining what are “texts”, for instance using
<code><a href="../../reference/corpus_reshape.html">corpus_reshape()</a></code> or grouping
(<code><a href="../../reference/corpus_segment.html">corpus_segment()</a></code>).</p>
</li>
<li>
<p><strong>Defining and delimiting textual features</strong></p>
<p>This step involves defining and extracting the relevant features from
each document, using <code><a href="../../reference/tokens.html">tokens()</a></code>, the main function for this
step, involves identifying instances of defined features (“tokens”) and
extracting them as vectors. Usually these will consist of words, but may
also consist of:</p>
<ul>
<li>
<code>ngrams</code>: adjacent sequences of words, not separated by
punctuation marks or sentence boundaries; including</li>
<li>multi-word expressions, through <code><a href="../../reference/tokens_compound.html">tokens_compound()</a></code>, for
selected word ngrams as identified in selected lists rather than simply
using all adjacent word pairs or n-sequences.</li>
</ul>
<p><code><a href="../../reference/tokens.html">tokens()</a></code> returns a new object class of tokenized texts,
a hashed list of index types, with each element in the list
corresponding to a document, and each hash vector representing the
tokens in that document.</p>
<p>By defining the broad class of tokens we wish to extract, in this
step we also apply rules that will keep or ignore elements such as
punctuation or digits, or special aggregations of word and other
characters that make up URLs, Twitter tags, or currency-prefixed digits.
This will involve adding the following options to
<code>tokens</code>:</p>
<ul>
<li><code>remove_numbers</code></li>
<li><code>remove_punct</code></li>
<li><code>remove_symbols</code></li>
<li><code>remove_twitter</code></li>
<li><code>remove_url</code></li>
</ul>
<p><strong>By default</strong>, <code><a href="../../reference/tokens.html">tokens()</a></code> extracts word
tokens, and only <code>remove_separators</code> is <code>TRUE</code>,
meaning that <code><a href="../../reference/tokens.html">tokens()</a></code> will return a list including
punctuation as tokens. This follows a philosophy of minimal
intervention, and one requiring that additional decisions be made
explicit by the user when invoking <code><a href="../../reference/tokens.html">tokens()</a></code>.</p>
<p>For converting to lowercase, it is actually faster to perform this
step <em>before</em> tokenization, but logically it falls under the next
workflow step. However for efficiency, <code>*_tolower()</code>
functions are defined for <code>character</code>, <code>tokens</code>,
and <code>dfm</code> objects.</p>
<p>Since the tokenizer we will use may not distinguish the punctuation
characters used in constructs such as URLs, email addresses, Twitter
handles, or digits prefixed by currency symbols, we will mostly need to
use a substitution strategy to replace these with alternative characters
prior to tokenization, and then replace the substitutions with the
original characters. This will slow down processing but will only be
active by explicit user request for this type of handling to take
place.</p>
<p>Note that that defining and delimiting features may also include
their <em>parts of speech</em>, meaning we will need to add
functionality for POS tagging and extraction in this step.</p>
</li>
<li>
<p><strong>Further feature selection</strong></p>
<p>Once features have been identified and separated from the texts in
the tokenization step, features may be removed from token lists, or
handled as part of <code>dfm</code> construction. Features may be:</p>
<ul>
<li>
<em>eliminated</em> through use of predefined lists or patterns of
<em>stop words</em>, using <code>dfm(x, remove = )</code> or
<code><a href="../../reference/tokens_select.html">tokens_remove()</a></code>
</li>
<li>
<em>kept</em> through use of predefined lists or patterns of
<em>stop words</em>, using <code>dfm(x, select = )</code> or
<code><a href="../../reference/tokens_select.html">tokens_select()</a></code>
</li>
<li>
<em>collapsed</em> by:
<ul>
<li>considering morphological variations as equivalent to a stem or
lemma, through <code>stem</code> option in <code>dfm</code> (or
<code><a href="../../reference/tokens_wordstem.html">dfm_wordstem()</a></code>)</li>
<li>considering lists of features as equivalent to a <em>dictionary</em>
key, either exclusively using <code>dfm(x, dictionary = )</code> or as a
supplement to uncollapsed features through
<code>dfm(x, thesaurus = )</code>
</li>
<li>
<code><a href="../../reference/tokens_tolower.html">tokens_tolower()</a></code> or <code><a href="../../reference/dfm_tolower.html">dfm_tolower()</a></code> to
consider as equivalent the same word features despite having different
cases, by converting all features to lower case</li>
</ul>
</li>
</ul>
<p>It will be sometimes possible to perform these steps separately from
the <code>dfm</code> creation stage, but in most cases these steps will
be performed as options to the <code><a href="../../reference/dfm.html">dfm()</a></code> function.</p>
</li>
<li>
<p><strong>Analysis of the documents and features</strong></p>
<ol style="list-style-type: decimal">
<li>
<p>From a corpus.</p>
<p>These steps don’t necessarily require the processing steps above.</p>
<ul>
<li><code><a href="../../reference/kwic.html">kwic()</a></code></li>
<li><code>textstat_readability()</code></li>
<li><code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code></li>
</ul>
</li>
<li><p>From a <code>dfm</code> – after <code><a href="../../reference/dfm.html">dfm()</a></code> on the
processed document and features.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="dfm-the-swiss-army-knife">dfm, the Swiss Army knife<a class="anchor" aria-label="anchor" href="#dfm-the-swiss-army-knife"></a>
</h3>
<p>In most cases, users will use the default settings to create a dfm
straight from a corpus. <code><a href="../../reference/dfm.html">dfm()</a></code> will combine steps 3–4, even
though basic functions will be available to perform these separately.
All options shown in steps 3–4 will be available in
<code><a href="../../reference/dfm.html">dfm()</a></code>.</p>
<p><code>dfm</code> objects can always be built up using constituent
steps, through tokenizing and then selecting on the tokens.
<strong>quanteda</strong> integrates the <strong>magrittr</strong>
<code>%&gt;%</code> pipe operator, to make it easy to chain functions
without creating intermediate objects:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/texts.html">texts</a></span><span class="op">(</span><span class="va">mycorpus</span>, group <span class="op">=</span> <span class="st">"party"</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../../reference/char_tolower.html">char_tolower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>We recognize however that not all sequences will make sense, for
instance <code><a href="../../reference/tokens_wordstem.html">tokens_wordstem()</a></code> will only work <em>after</em>
tokenization, and will try to catch these errors and make the proper
sequence clear to users.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
