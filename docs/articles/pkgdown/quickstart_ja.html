<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>クイック・スタートガイド • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="クイック・スタートガイド">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>クイック・スタートガイド</h1>
            
      
      
      <div class="hidden name"><code>quickstart_ja.Rmd</code></div>

    </div>

    
    
<p>本ページは<a href="../quickstart.html">Quick Start Guide</a>の日本語訳であり，英語のテキスト分析を通じて<strong>quanteda</strong>の基本的な使い方を説明する．日本語の分析法に関しては，以下のページを参照．</p>
<ul>
<li><a href="examples/japanese_speech_ja.html">事例: 衆議院外務委員会の議事録</a></li>
<li><a href="examples/japanese_twitter_ja.html">事例: 2017年総選挙に関するツイート</a></li>
</ul>
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>パッケージのインストール</h1>
<p><strong>quanteda</strong>は<a href="https://CRAN.R-project.org/package=quanteda">CRAN</a>からインストールできる．GUIのRパッケージインストーラを使用してインストールするか，次のコマンドを実行する．</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"quanteda"</span>)</a></code></pre></div>
<p>GitHubから最新の開発バージョンをインストールする方法については，<a href="https://github.com/quanteda/quanteda" class="uri">https://github.com/quanteda/quanteda</a> を参照．</p>
<div id="additional-recommended-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-recommended-packages" class="anchor"></a>インストールが推奨されるパッケージ</h2>
<p><strong>quanteda</strong>には連携して機能を拡張する一連のパッケージがあり，それらをインストールすることが推奨される．</p>
<ul>
<li>
<a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>：多くの入力形式からテキストデータをRに簡単に読み込むパッケージ</li>
<li>
<a href="https://github.com/kbenoit/spacyr"><strong>spacyr</strong></a>：Pythonの<a href="http://spacy.io">spaCy</a>ライブラリを使用した自然言語解析のためのパッケージで，品詞タグ付け，固有表現抽出，および係り受け関係の解析などができる</li>
<li>
<p><a href="https://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>：<strong>quanteda</strong>の本記事内の説明で使用する追加のテキストデータ</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"quanteda/quanteda.corpora"</span>)</a></code></pre></div>
</li>
<li>
<p><a href="https://github.com/kbenoit/quanteda.dictionaries"><strong>LIWCalike</strong></a>: <a href="http://liwc.wpengine.com">Linguistic Inquiry and Word Count</a> (LIWC) アプローチによるテキスト分析のR実装</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"kbenoit/quanteda.dictionaries"</span>)</a></code></pre></div>
</li>
</ul>
</div>
</div>
<div id="creating-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-corpus" class="anchor"></a>コーパスの作成</h1>
<p>まず，<strong>quanteda</strong>を読み込んで，パッケージの関数とデータにアクセスできるようにする．</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(quanteda)</a></code></pre></div>
<div id="currently-available-corpus-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#currently-available-corpus-sources" class="anchor"></a>利用可能なコーパス</h2>
<p><strong>quanteda</strong>にはテキストを読み込むためのシンプルで強力なパッケージ，<a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>があります．このパッケージの<code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code>は，ローカス・ストレージやインターネットからファイル読み込み，<code><a href="../../reference/corpus.html">corpus()</a></code>にデータ・フレームを返す．</p>
<p><code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code>で利用可能なファイルやデータの形式:</p>
<ul>
<li>テキスト（<code>.txt</code>）ファイル</li>
<li>コンマ区切り値（<code>.csv</code>）ファイル</li>
<li>XML形式のデータ</li>
<li>JSON形式のFacebook APIのデータ</li>
<li>JSON形式のTwitter APIのデータ</li>
<li>一般的なJSONデータ</li>
</ul>
<p><strong>quanteda</strong>のコーパスを生成する関数である <code><a href="../../reference/corpus.html">corpus()</a></code>は，以下の種類のデータを読み込むことができる．</p>
<ul>
<li>文字列ベクトル（例：<strong>readtext</strong>以外のツールを使用して読み込んだテキスト）</li>
<li>
<strong>tm</strong>パッケージの <code>VCorpus</code>コーパスオブジェクト</li>
<li>テキスト列と他の文書に対応したメタデータを含むデータ・フレーム</li>
</ul>
<div id="building-a-corpus-from-a-character-vector" class="section level3">
<h3 class="hasAnchor">
<a href="#building-a-corpus-from-a-character-vector" class="anchor"></a>文字列からコーパスを作成</h3>
<p>コーパスを作成する最も簡単な方法は，<code><a href="../../reference/corpus.html">corpus()</a></code>を用いて，すでにRに読み込まれた文字列ベクトル作成することである．文字列ベクトルをRに取り込む方法はさまざまなので，高度なRユーザーは，コーパスをいろいろな方法で作り出せる．</p>
<p>次の例では，<strong>quanteda</strong>パッケージに含まれているイギリスの政党が2010年の総選挙のために発行したマニフェストのテキストデータ（<code>data_char_ukimmig2010</code>）からコーパスを作成している．</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">corp_uk &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_char_ukimmig2010)  <span class="co"># テキストからコーパスを作成</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_uk)</a></code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences
##           BNP  1125   3280        88
##     Coalition   142    260         4
##  Conservative   251    499        15
##        Greens   322    679        21
##        Labour   298    683        29
##        LibDem   251    483        14
##            PC    77    114         5
##           SNP    88    134         4
##          UKIP   346    723        27
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/quanteda/vignettes/pkgdown/* on x86_64 by kbenoit
## Created: Mon Nov 25 08:46:51 2019
## Notes:</code></pre>
<p>コーパスを作成したあとでも，<code>docvars</code>を用いると，必要に応じて文書に対応した変数をこのコーパスに追加することができる．</p>
<p>たとえば，Rの<code><a href="https://rdrr.io/r/base/names.html">names()</a></code>関数を使って文字ベクトル（<code>data_char_ukimmig2010</code>）の名前を取得し，これを文書変数（<code>docvar()</code>）に追加することができる．</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(corp_uk, <span class="st">"Party"</span>) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(data_char_ukimmig2010)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(corp_uk, <span class="st">"Year"</span>) &lt;-<span class="st"> </span><span class="dv">2010</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_uk)</a></code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences        Party Year
##           BNP  1125   3280        88          BNP 2010
##     Coalition   142    260         4    Coalition 2010
##  Conservative   251    499        15 Conservative 2010
##        Greens   322    679        21       Greens 2010
##        Labour   298    683        29       Labour 2010
##        LibDem   251    483        14       LibDem 2010
##            PC    77    114         5           PC 2010
##           SNP    88    134         4          SNP 2010
##          UKIP   346    723        27         UKIP 2010
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/quanteda/vignettes/pkgdown/* on x86_64 by kbenoit
## Created: Mon Nov 25 08:46:51 2019
## Notes:</code></pre>
<p>分析の対象となる文書変数ではではないけれども，文書の属性として残しておきたいと思うメタデータも，<code><a href="../../reference/docvars.html">docvars()</a></code>を使って，コーパスに追加することができる．</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="../../reference/metadoc.html">metadoc</a></span>(corp_uk, <span class="st">"language"</span>) &lt;-<span class="st"> "english"</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw"><a href="../../reference/metadoc.html">metadoc</a></span>(corp_uk, <span class="st">"docsource"</span>)  &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"data_char_ukimmig2010"</span>, <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="../../reference/ndoc.html">ndoc</a></span>(corp_uk), <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_uk, <span class="dt">showmeta =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences _language              _docsource
##           BNP  1125   3280        88   english data_char_ukimmig2010_1
##     Coalition   142    260         4   english data_char_ukimmig2010_2
##  Conservative   251    499        15   english data_char_ukimmig2010_3
##        Greens   322    679        21   english data_char_ukimmig2010_4
##        Labour   298    683        29   english data_char_ukimmig2010_5
##        LibDem   251    483        14   english data_char_ukimmig2010_6
##            PC    77    114         5   english data_char_ukimmig2010_7
##           SNP    88    134         4   english data_char_ukimmig2010_8
##          UKIP   346    723        27   english data_char_ukimmig2010_9
##         Party Year
##           BNP 2010
##     Coalition 2010
##  Conservative 2010
##        Greens 2010
##        Labour 2010
##        LibDem 2010
##            PC 2010
##           SNP 2010
##          UKIP 2010
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/quanteda/vignettes/pkgdown/* on x86_64 by kbenoit
## Created: Mon Nov 25 08:46:51 2019
## Notes:</code></pre>
<p><code><a href="../../reference/metadoc.html">metadoc()</a></code>を用いると，文書メタデータのフィールドを自由に定義することができますが，単一の値（“english”）を文書変数（“language”）に付与するときには，Rが値を繰り替えして全ての文書に同じ値を付与していることに注意する必要がある．</p>
<p>独自の文書メタデータのフィールド（<code>docsource</code>）を作成するために，<strong>quanteda</strong>の関数である<code><a href="../../reference/ndoc.html">ndoc()</a></code>を使ってコーパスに含まれる文書の総数を取得している．<code><a href="../../reference/ndoc.html">ndoc()</a></code>は，<code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code>や<code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code>などのRの標準の関数と同じような方法で動作するように設計されている．</p>
</div>
<div id="loading-in-files-using-the-readtext-package" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-in-files-using-the-readtext-package" class="anchor"></a>readtextパッケージを用いたファイルの読み込み</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(readtext)</a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co"># Twitter json</span></a>
<a class="sourceLine" id="cb11-4" title="4">dat_json &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)</a>
<a class="sourceLine" id="cb11-5" title="5">corp_twitter &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_json)</a>
<a class="sourceLine" id="cb11-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_twitter, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co"># generic json - needs a textfield specifier</span></a>
<a class="sourceLine" id="cb11-8" title="8">dat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,</a>
<a class="sourceLine" id="cb11-9" title="9">                  <span class="dt">textfield =</span> <span class="st">"text"</span>)</a>
<a class="sourceLine" id="cb11-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_sotu), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co"># text file</span></a>
<a class="sourceLine" id="cb11-12" title="12">dat_txtone &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-13" title="13"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtone), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co"># multiple text files</span></a>
<a class="sourceLine" id="cb11-15" title="15">dat_txtmultiple1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-16" title="16"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtmultiple1), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co"># multiple text files with docvars from filenames</span></a>
<a class="sourceLine" id="cb11-18" title="18">dat_txtmultiple2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>,</a>
<a class="sourceLine" id="cb11-19" title="19">                             <span class="dt">docvarsfrom =</span> <span class="st">"filenames"</span>, <span class="dt">sep =</span> <span class="st">"-"</span>,</a>
<a class="sourceLine" id="cb11-20" title="20">                             <span class="dt">docvarnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))</a>
<a class="sourceLine" id="cb11-21" title="21"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtmultiple2), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-22" title="22"><span class="co"># XML data</span></a>
<a class="sourceLine" id="cb11-23" title="23">dat_xml &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>,</a>
<a class="sourceLine" id="cb11-24" title="24">                  <span class="dt">textfield =</span> <span class="st">"COMMON"</span>)</a>
<a class="sourceLine" id="cb11-25" title="25"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_xml), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-26" title="26"><span class="co"># csv file</span></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">inaug_speech =</span> <span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural),</a>
<a class="sourceLine" id="cb11-28" title="28">                     <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural)),</a>
<a class="sourceLine" id="cb11-29" title="29">          <span class="dt">file =</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-30" title="30">dat_csv &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">textfield =</span> <span class="st">"inaug_speech"</span>)</a>
<a class="sourceLine" id="cb11-31" title="31"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_csv), <span class="dv">5</span>)</a></code></pre></div>
</div>
</div>
<div id="how-a-quanteda-corpus-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-a-quanteda-corpus-works" class="anchor"></a>コーパスオブジェクトの使い方</h2>
<div id="corpus-principles" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-principles" class="anchor"></a>コーパスの原理</h3>
<p><strong>quanteda</strong>のコーパスは，元の文書をユニコード（UTF-8）に変換し，文書に対するメタデータと一緒に格納しすることで、ステミングや句読点の削除などの処理よって変更されないテキストデータの静的な保管庫になるように設計されている．これによって，コーパスから文書を抽出して新しいオブジェクトを作成した後でも，コーパスには元のデータが残り，別の分析を，同じコーパスを用いて行うことができる．</p>
<p>コーパスから文書を取り出すためには，<code><a href="../../reference/texts.html">texts()</a></code>と呼ばれる関数を使用する．</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural)[<span class="dv">2</span>]</a></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington 
## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</code></pre>
<p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>により，コーパス内のテキストの要約を行うことができる．</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(data_corpus_irishbudget2010)</a></code></pre></div>
<pre><code>## Corpus consisting of 14 documents:
## 
##                       Text Types Tokens Sentences year debate number      foren
##        Lenihan, Brian (FF)  1953   8641       374 2010 BUDGET     01      Brian
##       Bruton, Richard (FG)  1040   4446       217 2010 BUDGET     02    Richard
##         Burton, Joan (LAB)  1624   6393       307 2010 BUDGET     03       Joan
##        Morgan, Arthur (SF)  1595   7107       343 2010 BUDGET     04     Arthur
##          Cowen, Brian (FF)  1629   6599       250 2010 BUDGET     05      Brian
##           Kenny, Enda (FG)  1148   4232       153 2010 BUDGET     06       Enda
##      ODonnell, Kieran (FG)   678   2297       133 2010 BUDGET     07     Kieran
##       Gilmore, Eamon (LAB)  1181   4177       201 2010 BUDGET     08      Eamon
##     Higgins, Michael (LAB)   488   1286        44 2010 BUDGET     09    Michael
##        Quinn, Ruairi (LAB)   439   1284        59 2010 BUDGET     10     Ruairi
##      Gormley, John (Green)   401   1030        49 2010 BUDGET     11       John
##        Ryan, Eamon (Green)   510   1643        90 2010 BUDGET     12      Eamon
##      Cuffe, Ciaran (Green)   442   1240        45 2010 BUDGET     13     Ciaran
##  OCaolain, Caoimhghin (SF)  1188   4044       176 2010 BUDGET     14 Caoimhghin
##      name party
##   Lenihan    FF
##    Bruton    FG
##    Burton   LAB
##    Morgan    SF
##     Cowen    FF
##     Kenny    FG
##  ODonnell    FG
##   Gilmore   LAB
##   Higgins   LAB
##     Quinn   LAB
##   Gormley Green
##      Ryan Green
##     Cuffe Green
##  OCaolain    SF
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/* on x86_64 by kbenoit
## Created: Wed Jun 28 22:04:18 2017
## Notes:</code></pre>
<p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>の出力をデータ・フレームとして保存し，基本的な記述統計を描画することができる．</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">tokeninfo &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(data_corpus_inaugural)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(ggplot2))</a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> tokeninfo, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Tokens, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)), <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>()</a></code></pre></div>
<pre><code>## Loading required package: ggplot2</code></pre>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># Longest inaugural address: William Henry Harrison</span></a>
<a class="sourceLine" id="cb18-2" title="2">tokeninfo[<span class="kw"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span>(tokeninfo<span class="op">$</span>Tokens), ]</a></code></pre></div>
<pre><code>##             Text Types Tokens Sentences Year President     FirstName
## 14 1841-Harrison  1896   9144       210 1841  Harrison William Henry</code></pre>
</div>
</div>
<div id="tools-for-handling-corpus-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-handling-corpus-objects" class="anchor"></a>コーパスに対する操作</h2>
<div id="adding-two-corpus-objects-together" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-two-corpus-objects-together" class="anchor"></a>コーパスの結合</h3>
<p><code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>演算子を用いると，簡単に二個のコーパスを連結できます．コーパスが異なる構造を持つ場合でも，文書変数が失われることはなく，コーパスのメタデータも引き継がれる．</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(quanteda)</a>
<a class="sourceLine" id="cb20-2" title="2">corp1 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a>
<a class="sourceLine" id="cb20-3" title="3">corp2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">53</span><span class="op">:</span><span class="dv">58</span>])</a>
<a class="sourceLine" id="cb20-4" title="4">corp3 &lt;-<span class="st"> </span>corp1 <span class="op">+</span><span class="st"> </span>corp2</a>
<a class="sourceLine" id="cb20-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp3)</a></code></pre></div>
<pre><code>## Corpus consisting of 11 documents:
## 
##             Text Types Tokens Sentences
##  1789-Washington   625   1538        23
##  1793-Washington    96    147         4
##       1797-Adams   826   2578        37
##   1801-Jefferson   717   1927        41
##   1805-Jefferson   804   2381        45
##     1997-Clinton   773   2449       111
##        2001-Bush   621   1808        97
##        2005-Bush   773   2319       100
##       2009-Obama   938   2711       110
##       2013-Obama   814   2317        88
##       2017-Trump   582   1660        88
## 
## Source: Combination of corpuses corp1 and corp2
## Created: Mon Nov 25 08:46:52 2019
## Notes:</code></pre>
</div>
<div id="subsetting-corpus-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-corpus-objects" class="anchor"></a>コーパスから文書を抽出</h3>
<p><code><a href="../../reference/corpus_subset.html">corpus_subset()</a></code>により，文書変数に適用される論理条件に基づいて文書を抽出することができる．</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>))</a></code></pre></div>
<pre><code>## Corpus consisting of 7 documents:
## 
##          Text Types Tokens Sentences Year President FirstName
##  1993-Clinton   642   1833        81 1993   Clinton      Bill
##  1997-Clinton   773   2449       111 1997   Clinton      Bill
##     2001-Bush   621   1808        97 2001      Bush George W.
##     2005-Bush   773   2319       100 2005      Bush George W.
##    2009-Obama   938   2711       110 2009     Obama    Barack
##    2013-Obama   814   2317        88 2013     Obama    Barack
##    2017-Trump   582   1660        88 2017     Trump Donald J.
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, President <span class="op">==</span><span class="st"> "Adams"</span>))</a></code></pre></div>
<pre><code>## Corpus consisting of 2 documents:
## 
##        Text Types Tokens Sentences Year President   FirstName
##  1797-Adams   826   2578        37 1797     Adams        John
##  1825-Adams  1003   3152        74 1825     Adams John Quincy
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
</div>
</div>
<div id="exploring-corpus-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-corpus-texts" class="anchor"></a>コーパス内の文書の探索</h2>
<p><code><a href="../../reference/kwic.html">kwic()</a></code>（keywords-in-context）は単語の検索を行い，その単語が現れる文脈を表示する．</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"terror"</span>)</a></code></pre></div>
<pre><code>##                                                                     
##     [1797-Adams, 1325]              fraud or violence, by | terror |
##  [1933-Roosevelt, 112] nameless, unreasoning, unjustified | terror |
##  [1941-Roosevelt, 287]      seemed frozen by a fatalistic | terror |
##    [1961-Kennedy, 866]    alter that uncertain balance of | terror |
##     [1981-Reagan, 813]     freeing all Americans from the | terror |
##   [1997-Clinton, 1055]        They fuel the fanaticism of | terror |
##   [1997-Clinton, 1655]  maintain a strong defense against | terror |
##     [2009-Obama, 1632]     advance their aims by inducing | terror |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  of runaway living costs.         
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"terror"</span>, <span class="dt">valuetype =</span> <span class="st">"regex"</span>)</a></code></pre></div>
<pre><code>##                                                                             
##     [1797-Adams, 1325]                   fraud or violence, by |  terror   |
##  [1933-Roosevelt, 112]      nameless, unreasoning, unjustified |  terror   |
##  [1941-Roosevelt, 287]           seemed frozen by a fatalistic |  terror   |
##    [1961-Kennedy, 866]         alter that uncertain balance of |  terror   |
##    [1961-Kennedy, 990]               of science instead of its |  terrors  |
##     [1981-Reagan, 813]          freeing all Americans from the |  terror   |
##    [1981-Reagan, 2196]        understood by those who practice | terrorism |
##   [1997-Clinton, 1055]             They fuel the fanaticism of |  terror   |
##   [1997-Clinton, 1655]       maintain a strong defense against |  terror   |
##     [2009-Obama, 1632]          advance their aims by inducing |  terror   |
##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  . Together let us explore        
##  of runaway living costs.         
##  and prey upon their neighbors    
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we   
##  , which we will eradicate</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"communist*"</span>)</a></code></pre></div>
<pre><code>##                                                                   
##   [1949-Truman, 834] the actions resulting from the | Communist  |
##  [1961-Kennedy, 519]             -- not because the | Communists |
##                            
##  philosophy are a threat to
##  may be doing it,</code></pre>
<p>上記の要約では，“Year”と“President”は各文書に結び付けられた変数であり，<code><a href="../../reference/docvars.html">docvars()</a></code>によってそれらにアクセスできる．</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural))</a></code></pre></div>
<pre><code>##                 Year  President FirstName
## 1789-Washington 1789 Washington    George
## 1793-Washington 1793 Washington    George
## 1797-Adams      1797      Adams      John
## 1801-Jefferson  1801  Jefferson    Thomas
## 1805-Jefferson  1805  Jefferson    Thomas
## 1809-Madison    1809    Madison     James</code></pre>
<p><a href="http://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>をインストールすることで，より多くのコーパスを試すことができる．</p>
</div>
</div>
<div id="extracting-features-from-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-features-from-a-corpus" class="anchor"></a>コーパスから特長を抽出</h1>
<p>文書のスケーリングなどの統計分析を行うためには，それぞれの文書の特長をまとめた行列を作成する必要があり，<strong>quanteda</strong>では，このような行列を生成するために <code><a href="../../reference/dfm.html">dfm()</a></code>を使いる． dfmは<em>document-feature matrix</em>の略で，行が文書（document），列が特長（feature）となる行列である．行と列をこのように定義する理由は，データ分析では行が分析単位になり，各列が分析対象になる変数となるのが一般的だからである．多くのソフトウェアでは，この行列を<em>document-term matrix</em>と呼ぶが，<strong>quanteda</strong>が語（term）でなはく特長（feature）という用語を使うのは，特長のほうが一般性を持つからで，テキスト分析では，単語，語幹，単語の集合，Nグラム，品詞など様々なものが文書の特長となる．</p>
<div id="tokenizing-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#tokenizing-texts" class="anchor"></a>文書のトークン化</h2>
<p>テキストを簡単にトークン化するために，<strong>quanteda</strong>は <code><a href="../../reference/tokens.html">tokens()</a></code>と呼ばれる強力なコマンドを提供する．この関数は，文字ベクトルのトークンのリストからなるオブジェクトを生成する．このオブジェクトでは，リストの一つ一つの要素は入力された文書に対応している．</p>
<p><code><a href="../../reference/tokens.html">tokens()</a></code>は保守的に設計されており、ユーザーが明示的に指示を与えないかぎりは，要素を削除しない．</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">txt &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">text1 =</span> <span class="st">"This is $10 in 999 different ways,</span><span class="ch">\n</span><span class="st"> up and down; left and right!"</span>,</a>
<a class="sourceLine" id="cb34-2" title="2">         <span class="dt">text2 =</span> <span class="st">"@kenbenoit working: on #quanteda 2day</span><span class="ch">\t</span><span class="st">4ever, http://textasdata.com?page=123."</span>)</a>
<a class="sourceLine" id="cb34-3" title="3"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [13] ";"         "left"      "and"       "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "in"        "different" "ways"      "up"       
##  [7] "and"       "down"      "left"      "and"       "right"    
## 
## text2 :
## [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
## [5] "2day"           "4ever"          "http"           "textasdata.com"
## [9] "page"</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "10"        "in"        "999"       "different"
##  [7] "ways"      "up"        "and"       "down"      "left"      "and"      
## [13] "right"    
## 
## text2 :
##  [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
##  [5] "2day"           "4ever"          "http"           "textasdata.com"
##  [9] "page"           "123"</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different" "ways"     
##  [7] ","         "up"        "and"       "down"      ";"         "left"     
## [13] "and"       "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "."</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [13] ";"         "left"      "and"       "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>, <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      " "         "is"        " "         "$"         "10"       
##  [7] " "         "in"        " "         "999"       " "         "different"
## [13] " "         "ways"      ","         "\n"        " "         "up"       
## [19] " "         "and"       " "         "down"      ";"         " "        
## [25] "left"      " "         "and"       " "         "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     " "              "working"        ":"             
##  [5] " "              "on"             " "              "#quanteda"     
##  [9] " "              "2day"           "\t"             "4ever"         
## [13] ","              " "              "http"           ":"             
## [17] "/"              "/"              "textasdata.com" "?"             
## [21] "page"           "="              "123"            "."</code></pre>
<p>また，<code><a href="../../reference/tokens.html">tokens()</a></code>には個々の文字をトークン化するオプションもある．</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>)</a></code></pre></div>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e" ":" "h" "t" "t" "p" ":" "/"
## [20] "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m" "?" "p" "a" "g"
## [39] "e" "=" "1" "2" "3" "."</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>,</a>
<a class="sourceLine" id="cb48-2" title="2">         <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t" "e" ":" " " "h" "t" "t" "p"
## [20] ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m" "?" "p"
## [39] "a" "g" "e" "=" "1" "2" "3" "."</code></pre>
<p>もしくは，一文ごとにトークン化するオプションもある．</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="co"># sentence level         </span></a>
<a class="sourceLine" id="cb50-2" title="2"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>,</a>
<a class="sourceLine" id="cb50-3" title="3">         <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>,</a>
<a class="sourceLine" id="cb50-4" title="4">         <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>),</a>
<a class="sourceLine" id="cb50-5" title="5">         <span class="dt">what =</span> <span class="st">"sentence"</span>)</a></code></pre></div>
<pre><code>## tokens from 3 documents.
## text1 :
## [1] "Kurt Vongeut said; only assholes use semi-colons."
## 
## text2 :
## [1] "Today is Thursday in Canberra:  It is yesterday in London."
## 
## text3 :
## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</code></pre>
</div>
<div id="constructing-a-document-feature-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-document-feature-matrix" class="anchor"></a>文書行列の作成</h2>
<p>データからすぐに文書行列を作成したい場合は、<code><a href="../../reference/dfm.html">dfm()</a></code>に直接文字列ベクトルもしくはコーパスを渡すと、自動的にトークン化が行われ。<code><a href="../../reference/dfm.html">dfm()</a></code>は、デフォルトで大文字から小文字への置換や，句読点を除去などの操作を適用する．また，<code><a href="../../reference/dfm.html">dfm()</a></code>から<code><a href="../../reference/tokens.html">tokens()</a></code>の全てのオプションを利用できる．</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">corp_inaug_post1990 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>)</a>
<a class="sourceLine" id="cb52-2" title="2"></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="co"># make a dfm</span></a>
<a class="sourceLine" id="cb52-4" title="4">dfmat_inaug_post1990 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(corp_inaug_post1990)</a>
<a class="sourceLine" id="cb52-5" title="5">dfmat_inaug_post1990[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (0.0% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           my fellow citizens   , today
##   1993-Clinton  7      5        2 139    10
##   1997-Clinton  6      7        7 131     5
##   2001-Bush     3      1        9 110     2
##   2005-Bush     2      3        6 120     3
##   2009-Obama    2      1        1 130     6
##   2013-Obama    3      3        6  99     4
##   2017-Trump    1      1        4  96     4</code></pre>
<p>以下の例では<code><a href="../../reference/dfm.html">dfm()</a></code>の追加のオプションを用いて、ストップワードの削除（<code>remove</code>）と語のステミング（<code>stem</code>）を行っている．</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="co"># make a dfm, removing stopwords and applying stemming</span></a>
<a class="sourceLine" id="cb54-2" title="2">dfmat_inaug_post1990 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(dfmat_inaug_post1990,</a>
<a class="sourceLine" id="cb54-3" title="3">                            <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>),</a>
<a class="sourceLine" id="cb54-4" title="4">                            <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Warning: Argument remove_punct not used.</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">dfmat_inaug_post1990[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (2.86% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           fellow citizen   , today celebr
##   1993-Clinton      5       2 139    10      4
##   1997-Clinton      7       8 131     6      1
##   2001-Bush         1      10 110     2      0
##   2005-Bush         3       7 120     3      2
##   2009-Obama        1       1 130     6      2
##   2013-Obama        3       8  99     6      1
##   2017-Trump        1       4  96     5      3</code></pre>
<p><code>remove</code>によって，文書行列から除外するトークンを指定する．<code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords()</a></code>は，幾つかの言語で定義されたストップワードのリストを返す．</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"en"</span>), <span class="dv">20</span>)</a></code></pre></div>
<pre><code>##  [1] "i"          "me"         "my"         "myself"     "we"        
##  [6] "our"        "ours"       "ourselves"  "you"        "your"      
## [11] "yours"      "yourself"   "yourselves" "he"         "him"       
## [16] "his"        "himself"    "she"        "her"        "hers"</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ru"</span>), <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ar"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>), <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</code></pre>
<div id="viewing-the-document-feature-matrix" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-the-document-feature-matrix" class="anchor"></a>文書行列の表示</h3>
<p>RStudioの“Environment”パネル，またはRの<code><a href="../../reference/View.html">View()</a></code>を用いることで，dfmに格納された値を見ることができる．</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">dfmat_uk &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_char_ukimmig2010, <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb64-2" title="2">dfmat_uk</a></code></pre></div>
<pre><code>## Document-feature matrix of: 9 documents, 1,547 features (83.8% sparse).</code></pre>
<p>頻度が最も高い特長を見るには，<code><a href="../../reference/topfeatures.html">topfeatures()</a></code>を用いる．</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(dfmat_uk, <span class="dv">20</span>)  <span class="co"># 20 most frequent words</span></a></code></pre></div>
<pre><code>## immigration     british      people      asylum     britain          uk 
##          66          37          35          29          28          27 
##      system  population     country         new  immigrants      ensure 
##          27          21          20          19          17          17 
##       shall citizenship      social    national         bnp     illegal 
##          17          16          14          14          13          13 
##        work     percent 
##          13          12</code></pre>
<p>dfmを<code><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>に渡すことで，ワードクラウドを描画できる．この関数は，オブジェクトや引数を<strong>wordcloud</strong>パッケージの<code><a href="../../reference/wordcloud.html">wordcloud()</a></code>に渡すので，ワードクラウドの表示を変更できる．</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb68-2" title="2"><span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(dfmat_uk, <span class="dt">min_count =</span> <span class="dv">6</span>, <span class="dt">random_order =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb68-3" title="3">                   <span class="dt">rotation =</span> <span class="fl">.25</span>,</a>
<a class="sourceLine" id="cb68-4" title="4">                   <span class="dt">color =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</a></code></pre></div>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</div>
<div id="grouping-documents-by-document-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-documents-by-document-variable" class="anchor"></a>変数による文書のグループ化</h3>
<p><strong>quanteda</strong>では，dfmを作成する際に，文書変数の値によって文書をグループ化するすることができる．</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">dfmat_ire &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">groups =</span> <span class="st">"party"</span>,</a>
<a class="sourceLine" id="cb69-2" title="2">                  <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>また、以下のように，dfmを語の頻度順に並べ替えて，中身を確かめられる．</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1"><span class="kw"><a href="../../reference/dfm_sort.html">dfm_sort</a></span>(dfmat_ire)[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 5 documents, 10 features (0.0% sparse).
## 5 x 10 sparse Matrix of class "dfm"
##        features
## docs    people budget government public minister tax economy pay jobs billion
##   FF        23     44         47     65       11  60      37  41   41      32
##   FG        78     71         61     47       62  11      20  29   17      21
##   Green     15     26         19      4        4  11      16   4   15       3
##   LAB       69     66         36     32       54  47      37  24   20      34
##   SF        81     53         73     31       39  34      50  24   27      29</code></pre>
</div>
<div id="grouping-words-by-dictionary-or-equivalence-class" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-words-by-dictionary-or-equivalence-class" class="anchor"></a>辞書による語のグループ化</h3>
<p>キーワードがあらかじめ分かっている場合，<code><a href="../../reference/dictionary.html">dictionary()</a></code>によって辞書を作成し、語の出現回数を測定できる。次の例では，テロリズムに関連する言葉や経済に関連する言葉が，クリントン以降の大統領演説でどのように異なるかを示している．</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">corp_inaug_post1991 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1991</span>)</a></code></pre></div>
<p>テロリズムと経済という2つのリストからなる辞書を作成する．</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">dict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">terror =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>),</a>
<a class="sourceLine" id="cb73-2" title="2">                        <span class="dt">economy =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</a></code></pre></div>
<p>文書行列を作成するときに，この辞書を<code><a href="../../reference/dfm.html">dfm()</a></code>の<code>dictionary</code>に渡す．</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">dfmat_inaug_post1991_dict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(corp_inaug_post1991, <span class="dt">dictionary =</span> dict)</a>
<a class="sourceLine" id="cb74-2" title="2">dfmat_inaug_post1991_dict</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 2 features (14.3% sparse).
## 7 x 2 sparse Matrix of class "dfm"
##               features
## docs           terror economy
##   1993-Clinton      0       8
##   1997-Clinton      1       8
##   2001-Bush         0       4
##   2005-Bush         1       6
##   2009-Obama        1      10
##   2013-Obama        1       6
##   2017-Trump        1       5</code></pre>
<p><code><a href="../../reference/dictionary.html">dictionary()</a></code>は，LIWCやWordstatなどの一般的な辞書ファイルを読み込むことができる．以下では，LIWCの辞書を大統領就任演説に適用している．</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">dictliwc &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="dt">file =</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,</a>
<a class="sourceLine" id="cb76-2" title="2">                       <span class="dt">format =</span> <span class="st">"LIWC"</span>)</a>
<a class="sourceLine" id="cb76-3" title="3">dfmat_inaug_subset &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural[<span class="dv">52</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">dictionary =</span> dictliwc)</a>
<a class="sourceLine" id="cb76-4" title="4">dfmat_inaug_subset[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
</div>
</div>
</div>
<div id="further-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#further-examples" class="anchor"></a>追加の事例</h1>
<div id="similarities-between-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#similarities-between-texts" class="anchor"></a>文書の類似性</h2>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">dfmat_inaug_post1980 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1980</span>),</a>
<a class="sourceLine" id="cb77-2" title="2">                            <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb77-3" title="3">tstat_obama &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(dfmat_inaug_post1980,</a>
<a class="sourceLine" id="cb77-4" title="4">                              dfmat_inaug_post1980[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2009-Obama"</span>, <span class="st">"2013-Obama"</span>), ],</a>
<a class="sourceLine" id="cb77-5" title="5">                              <span class="dt">margin =</span> <span class="st">"documents"</span>, <span class="dt">method =</span> <span class="st">"cosine"</span>)</a>
<a class="sourceLine" id="cb77-6" title="6">tstat_obama</a></code></pre></div>
<pre><code>## textstat_simil object; method = "cosine"
##              2009-Obama 2013-Obama
## 1981-Reagan       0.623      0.638
## 1985-Reagan       0.643      0.663
## 1989-Bush         0.625      0.578
## 1993-Clinton      0.628      0.627
## 1997-Clinton      0.659      0.647
## 2001-Bush         0.602      0.619
## 2005-Bush         0.527      0.587
## 2009-Obama        1.000      0.682
## 2013-Obama        0.682      1.000
## 2017-Trump        0.519      0.516</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="co"># dotchart(as.list(tstat_obama)$"2009-Obama", xlab = "Cosine similarity")</span></a></code></pre></div>
<p>上記の文書間の類似性から樹形図を作成して，大統領を階層的に分類することができる．</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1">data_corpus_sotu &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/connections.html">url</a></span>(<span class="st">"https://quanteda.org/data/data_corpus_sotu.rds"</span>))</a>
<a class="sourceLine" id="cb80-2" title="2"></a>
<a class="sourceLine" id="cb80-3" title="3">dfmat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_sotu, Date <span class="op">&gt;</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"1980-01-01"</span>)),</a>
<a class="sourceLine" id="cb80-4" title="4">               <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb80-5" title="5">               <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</a>
<a class="sourceLine" id="cb80-6" title="6">dfmat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(dfmat_sotu, <span class="dt">min_termfreq =</span> <span class="dv">5</span>, <span class="dt">min_docfreq =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb80-7" title="7"></a>
<a class="sourceLine" id="cb80-8" title="8"><span class="co"># hierarchical clustering - get distances on normalized dfm</span></a>
<a class="sourceLine" id="cb80-9" title="9">tstat_dist &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_dist</a></span>(<span class="kw"><a href="../../reference/dfm_weight.html">dfm_weight</a></span>(dfmat_sotu, <span class="dt">scheme =</span> <span class="st">"prop"</span>))</a>
<a class="sourceLine" id="cb80-10" title="10"><span class="co"># hiarchical clustering the distance object</span></a>
<a class="sourceLine" id="cb80-11" title="11">pres_cluster &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/hclust.html">hclust</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/dist.html">as.dist</a></span>(tstat_dist))</a>
<a class="sourceLine" id="cb80-12" title="12"><span class="co"># label with document names</span></a>
<a class="sourceLine" id="cb80-13" title="13">pres_cluster<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/docnames.html">docnames</a></span>(dfmat_sotu)</a>
<a class="sourceLine" id="cb80-14" title="14"><span class="co"># plot as a dendrogram</span></a>
<a class="sourceLine" id="cb80-15" title="15"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(pres_cluster, <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>,</a>
<a class="sourceLine" id="cb80-16" title="16">     <span class="dt">main =</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</a></code></pre></div>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-35-1.png" width="960"></p>
<p>文書間と同様に用語間の類似性も測定できる．</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">tstat_sim &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(dfmat_sotu, dfmat_sotu[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>)],</a>
<a class="sourceLine" id="cb81-2" title="2">                          <span class="dt">method =</span> <span class="st">"cosine"</span>, <span class="dt">margin =</span> <span class="st">"features"</span>)</a>
<a class="sourceLine" id="cb81-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(tstat_sim), head, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## $fair
##      time    better       far  strategi     lower        us      long       one 
## 0.8266617 0.8135324 0.8036487 0.8002557 0.7995066 0.7992766 0.7977770 0.7949795 
##   practic  american 
## 0.7944127 0.7892432 
## 
## $health
##    system      issu    privat      need    expand   support    reform      hous 
## 0.9232094 0.9229859 0.9175231 0.9143293 0.9118901 0.9072374 0.9057456 0.9054303 
##    dramat      mani 
## 0.9051588 0.9045851 
## 
## $terror
## terrorist    coalit    cheney      evil  homeland      11th    sudden     regim 
## 0.8539894 0.8179609 0.8175618 0.7949619 0.7878223 0.7603221 0.7556575 0.7533021 
##   septemb   tyranni 
## 0.7502925 0.7383253</code></pre>
</div>
<div id="scaling-document-positions" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-document-positions" class="anchor"></a>文書のスケーリング</h2>
<p><strong>quanteda</strong>には多数のテキスト分析のためのモデルが含まれている．ここでは，ワードフィッシュ（<code><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish()</a></code>）による教師なしの文書のスケーリングを2010年のアイルランドの予算討論の分析に用いている．</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">dfmat_ire &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)</a>
<a class="sourceLine" id="cb83-2" title="2">tmod_wf &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(dfmat_ire, <span class="dt">dir =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb83-3" title="3"></a>
<a class="sourceLine" id="cb83-4" title="4"><span class="co"># plot the Wordfish estimates by party</span></a>
<a class="sourceLine" id="cb83-5" title="5"><span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(tmod_wf, <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(dfmat_ire, <span class="st">"party"</span>))</a></code></pre></div>
<p><img src="quickstart_ja_files/figure-html/unnamed-chunk-37-1.png" width="700"></p>
</div>
<div id="topic-models" class="section level2">
<h2 class="hasAnchor">
<a href="#topic-models" class="anchor"></a>トピックモデル</h2>
<p><code><a href="../../reference/convert.html">convert()</a></code>を用いると，dfmを<strong>topicmodels</strong>の<code><a href="https://rdrr.io/pkg/topicmodels/man/lda.html">LDA()</a></code>形式のデータに転換し，簡単にトピックモデルを適用できる．</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1">dfmat_ire2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010,</a>
<a class="sourceLine" id="cb84-2" title="2">                <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</a>
<a class="sourceLine" id="cb84-3" title="3">dfmat_ire2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(dfmat_ire2, <span class="dt">min_termfreq =</span> <span class="dv">4</span>, <span class="dt">max_docfreq =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb84-4" title="4">dfmat_ire2</a></code></pre></div>
<pre><code>## Document-feature matrix of: 14 documents, 1,263 features (64.5% sparse).</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb86-2" title="2"><span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(topicmodels)) {</a>
<a class="sourceLine" id="cb86-3" title="3">    my_lda_fit20 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/topicmodels/man/lda.html">LDA</a></span>(<span class="kw"><a href="../../reference/convert.html">convert</a></span>(dfmat_ire2, <span class="dt">to =</span> <span class="st">"topicmodels"</span>), <span class="dt">k =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb86-4" title="4">    <span class="kw"><a href="https://rdrr.io/pkg/topicmodels/man/get.html">get_terms</a></span>(my_lda_fit20, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb86-5" title="5">}</a></code></pre></div>
<pre><code>## Loading required package: topicmodels</code></pre>
<pre><code>##      Topic 1   Topic 2      Topic 3      Topic 4     Topic 5      
## [1,] "system"  "system"     "support"    "taoiseach" "alternative"
## [2,] "per"     "welfare"    "welfare"    "employees" "citizenship"
## [3,] "review"  "pre-budget" "investment" "rate"      "wealth"     
## [4,] "want"    "workers"    "continue"   "debate"    "adjustment" 
## [5,] "changes" "deficit"    "confidence" "referred"  "breaks"     
##      Topic 6        Topic 7     Topic 8     Topic 9   Topic 10      
## [1,] "society"      "failed"    "fianna"    "levy"    "welfare"     
## [2,] "enterprising" "strategy"  "fáil"      "million" "taxation"    
## [3,] "create"       "needed"    "education" "carbon"  "system"      
## [4,] "kind"         "ministers" "know"      "change"  "government's"
## [5,] "sense"        "system"    "societies" "welfare" "fianna"      
##      Topic 11    Topic 12       Topic 13  Topic 14    Topic 15  Topic 16   
## [1,] "set"       "million"      "side"    "care"      "child"   "taoiseach"
## [2,] "taoiseach" "rates"        "level"   "welfare"   "benefit" "fine"     
## [3,] "welfare"   "particularly" "third"   "per"       "day"     "gael"     
## [4,] "irish"     "back"         "screwed" "allowance" "today"   "may"      
## [5,] "fáil"      "create"       "never"   "hit"       "bank"    "irish"    
##      Topic 17   Topic 18     Topic 19     Topic 20 
## [1,] "fianna"   "taoiseach"  "million"    "fianna" 
## [2,] "fáil"     "days"       "measures"   "fáil"   
## [3,] "national" "per"        "scheme"     "rates"  
## [4,] "irish"    "use"        "spending"   "welfare"
## [5,] "support"  "businesses" "investment" "deficit"</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#installing-the-package">パッケージのインストール</a><ul class="nav nav-pills nav-stacked">
<li><a href="#additional-recommended-packages">インストールが推奨されるパッケージ</a></li>
      </ul>
</li>
      <li>
<a href="#creating-a-corpus">コーパスの作成</a><ul class="nav nav-pills nav-stacked">
<li><a href="#currently-available-corpus-sources">利用可能なコーパス</a></li>
      <li><a href="#how-a-quanteda-corpus-works">コーパスオブジェクトの使い方</a></li>
      <li><a href="#tools-for-handling-corpus-objects">コーパスに対する操作</a></li>
      <li><a href="#exploring-corpus-texts">コーパス内の文書の探索</a></li>
      </ul>
</li>
      <li>
<a href="#extracting-features-from-a-corpus">コーパスから特長を抽出</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tokenizing-texts">文書のトークン化</a></li>
      <li><a href="#constructing-a-document-feature-matrix">文書行列の作成</a></li>
      </ul>
</li>
      <li>
<a href="#further-examples">追加の事例</a><ul class="nav nav-pills nav-stacked">
<li><a href="#similarities-between-texts">文書の類似性</a></li>
      <li><a href="#scaling-document-positions">文書のスケーリング</a></li>
      <li><a href="#topic-models">トピックモデル</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Jiong Wei Lua, Patrick O. Perry, Jouni Kuha, Benjamin Lauderdale, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
