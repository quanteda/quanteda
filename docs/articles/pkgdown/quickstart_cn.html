<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>快速入门指南 • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="快速入门指南">
<meta property="og:description" content="quanteda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0F398Z98L1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0F398Z98L1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_hi.html">त्वरित आरंभ </a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/tokens_xptr.html">External pointer tokens objects</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/benchmarks_xptr.html">Performance benchmarks for v4</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>快速入门指南</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quanteda/quanteda/blob/HEAD/vignettes/pkgdown/quickstart_cn.Rmd" class="external-link"><code>vignettes/pkgdown/quickstart_cn.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart_cn.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="installing-the-package">软件包安装<a class="anchor" aria-label="anchor" href="#installing-the-package"></a>
</h2>
<p><strong>quanteda</strong>已上传在<a href="https://CRAN.R-project.org/package=quanteda" class="external-link">CRAN</a>上，所以可以使用GUI的R软件包安装程序进行安装，或执行：</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"quanteda"</span><span class="op">)</span></span></code></pre></div>
<p>请参阅https://github.com/quanteda/quanteda上的说明来安装GitHub版本。</p>
<div class="section level3">
<h3 id="additional-recommended-packages">推荐安装<a class="anchor" aria-label="anchor" href="#additional-recommended-packages"></a>
</h3>
<p>我们建议安装以下软件包，以便更好地支持和扩展<strong>quanteda</strong>的功能：</p>
<ul>
<li>
<a href="https://github.com/quanteda/readtext" class="external-link"><strong>readtext</strong></a>:
可将几乎任何格式的文本文件读入R</li>
<li>
<a href="https://github.com/quanteda/spacyr" class="external-link"><strong>spacyr</strong></a>:
使用<a href="http://spacy.io" class="external-link">spaCy</a>库的NLP，包括词性标注，命名实体和依存语法</li>
<li>
<a href="https://github.com/quanteda/quanteda.corpora" class="external-link"><strong>quanteda.corpora</strong></a>:
用于<strong>quanteda</strong>的附加文本数据</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"quanteda/quanteda.corpora"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<a href="https://github.com/kbenoit/quanteda.dictionaries" class="external-link"><strong>quanteda.dictionaries</strong></a>:
R版<a href="http://liwc.wpengine.com" class="external-link">Linguistic Inquiry and Word
Count</a> 文本分析软件</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"kbenoit/quanteda.dictionaries"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-corpus">创建语料库<a class="anchor" aria-label="anchor" href="#creating-a-corpus"></a>
</h2>
<p>加载<strong>quanteda</strong>以便使用软件包中的数据和功能。</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="currently-available-corpus-sources">目前可用的语料库资源<a class="anchor" aria-label="anchor" href="#currently-available-corpus-sources"></a>
</h3>
<p><strong>quanteda</strong>有一个简单而强大的配套软件包用于加载文本文件:
<a href="https://github.com/quanteda/readtext" class="external-link"><strong>readtext</strong></a>。
这个软件包的主函数<code><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext()</a></code>从磁盘或者URL中读取文件或者文件集，并且返回一个可以直接和<code><a href="../../reference/corpus.html">corpus()</a></code>构造函数一起使用的data.frame，可用来创建一个<strong>quanteda</strong>语料库。</p>
<p><code><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext()</a></code>可读取：</p>
<ul>
<li>文本文件 (<code>.txt</code>)</li>
<li>逗号分割的（<code>.csv</code>）文本文件</li>
<li>XML数据</li>
<li>取自脸书API的JSON格式的数据</li>
<li>取自TwitterAPI的JSON格式的数据</li>
<li>常用的JSON数据</li>
</ul>
<p>语料库创建函数<code><a href="../../reference/corpus.html">corpus()</a></code>可用于：</p>
<ul>
<li>字符类向量，比如你使用其他工具已经加载到R工作空间的</li>
<li>
<strong>tm</strong> 软件包中<code>VCorpus</code>语料库对象</li>
<li>data.frame 包含文本列和其他任何文件级元数据</li>
</ul>
<div class="section level4">
<h4 id="building-a-corpus-from-a-character-vector">从字符向量构建语料库<a class="anchor" aria-label="anchor" href="#building-a-corpus-from-a-character-vector"></a>
</h4>
<p>最简单的方式是从R中已经存在的文本向量创建一个语料库。这使得高级R用户可以灵活地选择文本输入，因为R有很多可以读取文本向量的方法。</p>
<p>一旦我们有了这种格式的文本数据，我们就可以直接调用语料库构造函数。以从内置的英国政党2010年选举宣言（<code>data_char_ukimmig2010</code>）中提取的有关移民政策的文本为例：</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span><span class="op">)</span>  <span class="co"># 从文本构建语料库</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_uk</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 9 documents, showing 9 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences</span></span>
<span><span class="co">##           BNP  1125   3280        88</span></span>
<span><span class="co">##     Coalition   142    260         4</span></span>
<span><span class="co">##  Conservative   251    499        15</span></span>
<span><span class="co">##        Greens   322    679        21</span></span>
<span><span class="co">##        Labour   298    683        29</span></span>
<span><span class="co">##        LibDem   251    483        14</span></span>
<span><span class="co">##            PC    77    114         5</span></span>
<span><span class="co">##           SNP    88    134         4</span></span>
<span><span class="co">##          UKIP   346    723        26</span></span></code></pre>
<p>我们也可以添加一些文档变量– <strong>quanteda</strong>
称之为此语料库的<code><a href="../../reference/docvars.html">docvars()</a></code>。</p>
<p>我们可以使用R的<code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code>函数来读取字符向量<code>data_char_ukimmig2010</code>的名称，并且将其给文档变量赋值。</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corp_uk</span>, <span class="st">"Party"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corp_uk</span>, <span class="st">"Year"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2010</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_uk</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 9 documents, showing 9 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences        Party Year</span></span>
<span><span class="co">##           BNP  1125   3280        88          BNP 2010</span></span>
<span><span class="co">##     Coalition   142    260         4    Coalition 2010</span></span>
<span><span class="co">##  Conservative   251    499        15 Conservative 2010</span></span>
<span><span class="co">##        Greens   322    679        21       Greens 2010</span></span>
<span><span class="co">##        Labour   298    683        29       Labour 2010</span></span>
<span><span class="co">##        LibDem   251    483        14       LibDem 2010</span></span>
<span><span class="co">##            PC    77    114         5           PC 2010</span></span>
<span><span class="co">##           SNP    88    134         4          SNP 2010</span></span>
<span><span class="co">##          UKIP   346    723        26         UKIP 2010</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="loading-in-files-using-the-readtext-package">readtext软件包加载文件<a class="anchor" aria-label="anchor" href="#loading-in-files-using-the-readtext-package"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/quanteda/readtext" class="external-link">readtext</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Twitter json</span></span>
<span><span class="va">dat_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span><span class="op">)</span></span>
<span><span class="va">corp_twitter</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_json</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp_twitter</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># 通用json - 需要“textfield”说明符</span></span>
<span><span class="va">dat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,</span>
<span>                     textfield <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_sotu</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># 文本文件</span></span>
<span><span class="va">dat_txtone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtone</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># 多文本文件</span></span>
<span><span class="va">dat_txtmultiple1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtmultiple1</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># 包含取自文件名的docvars的多个文本文件</span></span>
<span><span class="va">dat_txtmultiple2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>,</span>
<span>                             docvarsfrom <span class="op">=</span> <span class="st">"filenames"</span>, sep <span class="op">=</span> <span class="st">"-"</span>, docvarnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>, <span class="st">"President"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_txtmultiple2</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># XML 数据</span></span>
<span><span class="va">dat_xml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>,</span>
<span>                    dat_xml <span class="op">=</span> <span class="st">"COMMON"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_xml</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># csv 文件</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>inaug_speech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span>,</span>
<span>                     <span class="fu"><a href="../../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          file <span class="op">=</span> <span class="st">"/tmp/inaug_texts.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">dat_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/readtext/man/readtext.html" class="external-link">readtext</a></span><span class="op">(</span><span class="st">"/tmp/inaug_texts.csv"</span>, textfield <span class="op">=</span> <span class="st">"inaug_speech"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">dat_csv</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="how-a-quanteda-corpus-works">quanteda语料库工作方式<a class="anchor" aria-label="anchor" href="#how-a-quanteda-corpus-works"></a>
</h3>
<div class="section level4">
<h4 id="corpus-principles">语料库的原则<a class="anchor" aria-label="anchor" href="#corpus-principles"></a>
</h4>
<p>语料库被设计成原始文档的“库”，该文档被转换为UTF-8编码的纯文本文件，并与元数据一起分别存储于语料库级和文档级。我们给文档级元数据一个特殊的名字：<code><a href="../../reference/docvars.html">docvars()</a></code>。这些变量或特征描述了每个文档的属性。</p>
<p>从处理和分析的角度，语料库被设计成相对静态的文本容器。这意味着语料库中的文本不能从内部通过（例如）清理或预处理改变，比如词干提取或去除标点符号。相反，作为处理过程的一部分文本可以从语料库中提取，并赋值给新的对象，但是设计的思路是将语料库作为原始参考副本保留下来，以便于其他分析
- 例如那些需要词干和标点符号的分析-比如分析阅读难易指数 -
可以在相同的语料库上执行。</p>
<p>为了从语料库中提取文本，我们使用一个名为<code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code>的提取器。</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington </span></span>
<span><span class="co">## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</span></span></code></pre>
<p>为了总结语料库中的文本，我们可以调用一个为语料库定义的函数<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>。</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span>, package <span class="op">=</span> <span class="st">"quanteda.textmodels"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 14 documents, showing 14 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                       Text Types Tokens Sentences year debate number      foren</span></span>
<span><span class="co">##        Lenihan, Brian (FF)  1953   8641       374 2010 BUDGET     01      Brian</span></span>
<span><span class="co">##       Bruton, Richard (FG)  1040   4446       217 2010 BUDGET     02    Richard</span></span>
<span><span class="co">##         Burton, Joan (LAB)  1624   6393       309 2010 BUDGET     03       Joan</span></span>
<span><span class="co">##        Morgan, Arthur (SF)  1595   7107       344 2010 BUDGET     04     Arthur</span></span>
<span><span class="co">##          Cowen, Brian (FF)  1629   6599       251 2010 BUDGET     05      Brian</span></span>
<span><span class="co">##           Kenny, Enda (FG)  1148   4232       155 2010 BUDGET     06       Enda</span></span>
<span><span class="co">##      ODonnell, Kieran (FG)   678   2297       133 2010 BUDGET     07     Kieran</span></span>
<span><span class="co">##       Gilmore, Eamon (LAB)  1181   4177       203 2010 BUDGET     08      Eamon</span></span>
<span><span class="co">##     Higgins, Michael (LAB)   488   1286        44 2010 BUDGET     09    Michael</span></span>
<span><span class="co">##        Quinn, Ruairi (LAB)   439   1284        59 2010 BUDGET     10     Ruairi</span></span>
<span><span class="co">##      Gormley, John (Green)   401   1030        49 2010 BUDGET     11       John</span></span>
<span><span class="co">##        Ryan, Eamon (Green)   510   1643        90 2010 BUDGET     12      Eamon</span></span>
<span><span class="co">##      Cuffe, Ciaran (Green)   442   1240        45 2010 BUDGET     13     Ciaran</span></span>
<span><span class="co">##  OCaolain, Caoimhghin (SF)  1188   4044       176 2010 BUDGET     14 Caoimhghin</span></span>
<span><span class="co">##      name party</span></span>
<span><span class="co">##   Lenihan    FF</span></span>
<span><span class="co">##    Bruton    FG</span></span>
<span><span class="co">##    Burton   LAB</span></span>
<span><span class="co">##    Morgan    SF</span></span>
<span><span class="co">##     Cowen    FF</span></span>
<span><span class="co">##     Kenny    FG</span></span>
<span><span class="co">##  ODonnell    FG</span></span>
<span><span class="co">##   Gilmore   LAB</span></span>
<span><span class="co">##   Higgins   LAB</span></span>
<span><span class="co">##     Quinn   LAB</span></span>
<span><span class="co">##   Gormley Green</span></span>
<span><span class="co">##      Ryan Green</span></span>
<span><span class="co">##     Cuffe Green</span></span>
<span><span class="co">##  OCaolain    SF</span></span></code></pre>
<p>我们可以将汇总命令的输出保存为data.frame，并用这些信息绘制出一些基本的描述性统计信息：</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokeninfo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tokeninfo</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Year</span>, y <span class="op">=</span> <span class="va">Tokens</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1789</span>, <span class="fl">2017</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: ggplot2</span></span></code></pre>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 最长的就职演说: William Henry Harrison</span></span>
<span><span class="va">tokeninfo</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">tokeninfo</span><span class="op">$</span><span class="va">Tokens</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##             Text Types Tokens Sentences Year President     FirstName Party</span></span>
<span><span class="co">## 14 1841-Harrison  1896   9125       210 1841  Harrison William Henry  Whig</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="tools-for-handling-corpus-objects">处理语料库对象的功能<a class="anchor" aria-label="anchor" href="#tools-for-handling-corpus-objects"></a>
</h3>
<div class="section level4">
<h4 id="adding-two-corpus-objects-together">合并两个语料库对象<a class="anchor" aria-label="anchor" href="#adding-two-corpus-objects-together"></a>
</h4>
<p><code>+</code>运算符提供了一个连接两个语料库对象的简单方法。如果它们包含了不同的文档级别的变量，这些也将被合并起来以保证不丢失任何信息。语料库级别的元数据也被连接在一起。</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda</a></span><span class="op">)</span></span>
<span><span class="va">corp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">corp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus.html">corpus</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">[</span><span class="fl">53</span><span class="op">:</span><span class="fl">58</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">corp3</span> <span class="op">&lt;-</span> <span class="va">corp1</span> <span class="op">+</span> <span class="va">corp2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">corp3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 11 documents, showing 11 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Text Types Tokens Sentences Year  President FirstName</span></span>
<span><span class="co">##  1789-Washington   625   1537        23 1789 Washington    George</span></span>
<span><span class="co">##  1793-Washington    96    147         4 1793 Washington    George</span></span>
<span><span class="co">##       1797-Adams   826   2577        37 1797      Adams      John</span></span>
<span><span class="co">##   1801-Jefferson   717   1923        41 1801  Jefferson    Thomas</span></span>
<span><span class="co">##   1805-Jefferson   804   2380        45 1805  Jefferson    Thomas</span></span>
<span><span class="co">##     1997-Clinton   773   2436       111 1997    Clinton      Bill</span></span>
<span><span class="co">##        2001-Bush   621   1806        97 2001       Bush George W.</span></span>
<span><span class="co">##        2005-Bush   772   2312        99 2005       Bush George W.</span></span>
<span><span class="co">##       2009-Obama   938   2689       110 2009      Obama    Barack</span></span>
<span><span class="co">##       2013-Obama   814   2317        88 2013      Obama    Barack</span></span>
<span><span class="co">##       2017-Trump   582   1660        88 2017      Trump Donald J.</span></span>
<span><span class="co">##                  Party</span></span>
<span><span class="co">##                   none</span></span>
<span><span class="co">##                   none</span></span>
<span><span class="co">##             Federalist</span></span>
<span><span class="co">##  Democratic-Republican</span></span>
<span><span class="co">##  Democratic-Republican</span></span>
<span><span class="co">##             Democratic</span></span>
<span><span class="co">##             Republican</span></span>
<span><span class="co">##             Republican</span></span>
<span><span class="co">##             Democratic</span></span>
<span><span class="co">##             Democratic</span></span>
<span><span class="co">##             Republican</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="subsetting-corpus-objects">提取语料库的子集<a class="anchor" aria-label="anchor" href="#subsetting-corpus-objects"></a>
</h4>
<p><code><a href="../../reference/corpus_subset.html">corpus_subset()</a></code>是为语料库定义的一个函数，用于根据基于<code><a href="../../reference/docvars.html">docvars()</a></code>的逻辑条件提取语料库子集：</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 8 documents, showing 8 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##          Text Types Tokens Sentences Year President FirstName      Party</span></span>
<span><span class="co">##  1993-Clinton   642   1833        81 1993   Clinton      Bill Democratic</span></span>
<span><span class="co">##  1997-Clinton   773   2436       111 1997   Clinton      Bill Democratic</span></span>
<span><span class="co">##     2001-Bush   621   1806        97 2001      Bush George W. Republican</span></span>
<span><span class="co">##     2005-Bush   772   2312        99 2005      Bush George W. Republican</span></span>
<span><span class="co">##    2009-Obama   938   2689       110 2009     Obama    Barack Democratic</span></span>
<span><span class="co">##    2013-Obama   814   2317        88 2013     Obama    Barack Democratic</span></span>
<span><span class="co">##    2017-Trump   582   1660        88 2017     Trump Donald J. Republican</span></span>
<span><span class="co">##    2021-Biden   812   2766       216 2021     Biden Joseph R. Democratic</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">President</span> <span class="op">==</span> <span class="st">"Adams"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 2 documents, showing 2 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##        Text Types Tokens Sentences Year President   FirstName</span></span>
<span><span class="co">##  1797-Adams   826   2577        37 1797     Adams        John</span></span>
<span><span class="co">##  1825-Adams  1003   3147        74 1825     Adams John Quincy</span></span>
<span><span class="co">##                  Party</span></span>
<span><span class="co">##             Federalist</span></span>
<span><span class="co">##  Democratic-Republican</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="exploring-corpus-texts">浏览语料库文本<a class="anchor" aria-label="anchor" href="#exploring-corpus-texts"></a>
</h3>
<p><code>kwic</code>功能（keywords-in-context）可以搜索一个指定的词并显示它的上下文：</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tokens_inaugural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"terror"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 8 matches.                                                                    </span></span>
<span><span class="co">##     [1797-Adams, 1324]              fraud or violence, by | terror |</span></span>
<span><span class="co">##  [1933-Roosevelt, 111] nameless, unreasoning, unjustified | terror |</span></span>
<span><span class="co">##  [1941-Roosevelt, 285]      seemed frozen by a fatalistic | terror |</span></span>
<span><span class="co">##    [1961-Kennedy, 850]    alter that uncertain balance of | terror |</span></span>
<span><span class="co">##     [1981-Reagan, 811]     freeing all Americans from the | terror |</span></span>
<span><span class="co">##   [1997-Clinton, 1047]        They fuel the fanaticism of | terror |</span></span>
<span><span class="co">##   [1997-Clinton, 1647]  maintain a strong defense against | terror |</span></span>
<span><span class="co">##     [2009-Obama, 1619]     advance their aims by inducing | terror |</span></span>
<span><span class="co">##                                   </span></span>
<span><span class="co">##  , intrigue, or venality          </span></span>
<span><span class="co">##  which paralyzes needed efforts to</span></span>
<span><span class="co">##  , we proved that this            </span></span>
<span><span class="co">##  that stays the hand of           </span></span>
<span><span class="co">##  of runaway living costs.         </span></span>
<span><span class="co">##  . And they torment the           </span></span>
<span><span class="co">##  and destruction. Our children    </span></span>
<span><span class="co">##  and slaughtering innocents, we</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"terror"</span>, valuetype <span class="op">=</span> <span class="st">"regex"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 12 matches.                                                                            </span></span>
<span><span class="co">##     [1797-Adams, 1324]                   fraud or violence, by |  terror   |</span></span>
<span><span class="co">##  [1933-Roosevelt, 111]      nameless, unreasoning, unjustified |  terror   |</span></span>
<span><span class="co">##  [1941-Roosevelt, 285]           seemed frozen by a fatalistic |  terror   |</span></span>
<span><span class="co">##    [1961-Kennedy, 850]         alter that uncertain balance of |  terror   |</span></span>
<span><span class="co">##    [1961-Kennedy, 972]               of science instead of its |  terrors  |</span></span>
<span><span class="co">##     [1981-Reagan, 811]          freeing all Americans from the |  terror   |</span></span>
<span><span class="co">##    [1981-Reagan, 2187]        understood by those who practice | terrorism |</span></span>
<span><span class="co">##   [1997-Clinton, 1047]             They fuel the fanaticism of |  terror   |</span></span>
<span><span class="co">##   [1997-Clinton, 1647]       maintain a strong defense against |  terror   |</span></span>
<span><span class="co">##     [2009-Obama, 1619]          advance their aims by inducing |  terror   |</span></span>
<span><span class="co">##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism |</span></span>
<span><span class="co">##      [2021-Biden, 544]             , white supremacy, domestic | terrorism |</span></span>
<span><span class="co">##                                   </span></span>
<span><span class="co">##  , intrigue, or venality          </span></span>
<span><span class="co">##  which paralyzes needed efforts to</span></span>
<span><span class="co">##  , we proved that this            </span></span>
<span><span class="co">##  that stays the hand of           </span></span>
<span><span class="co">##  . Together let us explore        </span></span>
<span><span class="co">##  of runaway living costs.         </span></span>
<span><span class="co">##  and prey upon their neighbors    </span></span>
<span><span class="co">##  . And they torment the           </span></span>
<span><span class="co">##  and destruction. Our children    </span></span>
<span><span class="co">##  and slaughtering innocents, we   </span></span>
<span><span class="co">##  , which we will eradicate        </span></span>
<span><span class="co">##  that we must confront and</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/kwic.html">kwic</a></span><span class="op">(</span><span class="va">data_tokens_inaugural</span>, pattern <span class="op">=</span> <span class="st">"communist*"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Keyword-in-context with 2 matches.                                                                  </span></span>
<span><span class="co">##   [1949-Truman, 832] the actions resulting from the | Communist  |</span></span>
<span><span class="co">##  [1961-Kennedy, 510]     required - not because the | Communists |</span></span>
<span><span class="co">##                            </span></span>
<span><span class="co">##  philosophy are a threat to</span></span>
<span><span class="co">##  may be doing it,</span></span></code></pre>
<p>在上面的汇总中，<code>Year</code>和<code>President</code>是与每个文档相关的变量。我们可以用<code><a href="../../reference/docvars.html">docvars()</a></code>函数访问这些变量。</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 浏览文档变量</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Year  President FirstName                 Party</span></span>
<span><span class="co">## 1 1789 Washington    George                  none</span></span>
<span><span class="co">## 2 1793 Washington    George                  none</span></span>
<span><span class="co">## 3 1797      Adams      John            Federalist</span></span>
<span><span class="co">## 4 1801  Jefferson    Thomas Democratic-Republican</span></span>
<span><span class="co">## 5 1805  Jefferson    Thomas Democratic-Republican</span></span>
<span><span class="co">## 6 1809    Madison     James Democratic-Republican</span></span></code></pre>
<p><a href="https://github.com/quanteda/quanteda.corpora" class="external-link"><strong>quanteda.corpora</strong></a>软件包提供更多语料库资源。</p>
</div>
</div>
<div class="section level2">
<h2 id="extracting-features-from-a-corpus">从语料库中提取特征<a class="anchor" aria-label="anchor" href="#extracting-features-from-a-corpus"></a>
</h2>
<p>为了执行文档缩放等统计分析，我们必须提取一个将某些特征与文档关联起来矩阵。在quanteda中，dfm函数用来生成这样一个矩阵。“dfm”是文档特征矩阵的缩写，矩阵的行总是为文档而列为“特征”。我们这样定义矩阵的行与列是因为在数据分析中标准的做法是将一个分析单元作为行，而将与每个单元有关的特征或变量作为列。我们称之为“特征”而不是“词项”，因为特征比词项更通用：词项可以被定义为原始词项，词干词项，词性词项，停用词去除后的词项，或者词项归属的字典。而特征可以是完全通用的，例如ngram或者句法依存，我们对矩阵的定义持开放式态度。</p>
<div class="section level3">
<h3 id="tokenizing-texts">文本分词<a class="anchor" aria-label="anchor" href="#tokenizing-texts"></a>
</h3>
<p>为了简单地对文本分词，quanteda提供了一个强大的命令<code><a href="../../reference/tokens.html">tokens()</a></code>。这个命令会产生了一个以字符向量形式存在的分词表，表中的每单元元素
都对应于一个输入文档。</p>
<p><code><a href="../../reference/tokens.html">tokens()</a></code>有意设计成保守的，意味着除非有指令，它不会从文本中删除任何东西。</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>text1 <span class="op">=</span> <span class="st">"This is $10 in 999 different ways,\n up and down; left and right!"</span>,</span>
<span>         text2 <span class="op">=</span> <span class="st">"@kenbenoit working: on #quanteda 2day\t4ever, http://textasdata.com?page=123."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      ","         "up"        "and"       "down"     </span></span>
<span><span class="co">## [ ... and 5 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@kenbenoit"                      "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>,  remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "in"        "different" "ways"     </span></span>
<span><span class="co">##  [7] "up"        "and"       "down"      "left"      "and"       "right"    </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@kenbenoit"                      "working"                        </span></span>
<span><span class="co">## [3] "on"                              "#quanteda"                      </span></span>
<span><span class="co">## [5] "2day"                            "4ever"                          </span></span>
<span><span class="co">## [7] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      "up"        "and"       "down"      "left"     </span></span>
<span><span class="co">## [ ... and 2 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@kenbenoit"                      "working"                        </span></span>
<span><span class="co">## [3] "on"                              "#quanteda"                      </span></span>
<span><span class="co">## [5] "2day"                            "4ever"                          </span></span>
<span><span class="co">## [7] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>,  remove_punct <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "in"        "different" "ways"     </span></span>
<span><span class="co">##  [7] ","         "up"        "and"       "down"      ";"         "left"     </span></span>
<span><span class="co">## [ ... and 3 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@kenbenoit"                      "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      "is"        "$"         "10"        "in"        "999"      </span></span>
<span><span class="co">##  [7] "different" "ways"      ","         "up"        "and"       "down"     </span></span>
<span><span class="co">## [ ... and 5 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "@kenbenoit"                      "working"                        </span></span>
<span><span class="co">## [3] ":"                               "on"                             </span></span>
<span><span class="co">## [5] "#quanteda"                       "2day"                           </span></span>
<span><span class="co">## [7] "4ever"                           ","                              </span></span>
<span><span class="co">## [9] "http://textasdata.com?page=123."</span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">txt</span>, remove_numbers <span class="op">=</span> <span class="cn">FALSE</span>, remove_punct <span class="op">=</span> <span class="cn">FALSE</span>, remove_separators <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 2 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "This"      " "         "is"        " "         "$"         "10"       </span></span>
<span><span class="co">##  [7] " "         "in"        " "         "999"       " "         "different"</span></span>
<span><span class="co">## [ ... and 18 more ]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">##  [1] "@kenbenoit" " "          "working"    ":"          " "         </span></span>
<span><span class="co">##  [6] "on"         " "          "#quanteda"  " "          "2day"      </span></span>
<span><span class="co">## [11] "\t"         "4ever"     </span></span>
<span><span class="co">## [ ... and 3 more ]</span></span></code></pre>
<p>也可以按字符分词：</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"Great website: http://textasdata.com?page=123."</span>, what <span class="op">=</span> <span class="st">"character"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e"</span></span>
<span><span class="co">## [ ... and 32 more ]</span></span></code></pre>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"Great website: http://textasdata.com?page=123."</span>, what <span class="op">=</span> <span class="st">"character"</span>,</span>
<span>         remove_separators <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t"</span></span>
<span><span class="co">## [ ... and 34 more ]</span></span></code></pre>
<p>以及按句子分词：</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sentence level         </span></span>
<span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>,</span>
<span>         <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>,</span>
<span>         <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span><span class="op">)</span>,</span>
<span>       what <span class="op">=</span> <span class="st">"sentence"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 3 documents.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "Kurt Vongeut said; only assholes use semi-colons."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text2 :</span></span>
<span><span class="co">## [1] "Today is Thursday in Canberra:  It is yesterday in London."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## text3 :</span></span>
<span><span class="co">## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="constructing-a-document-feature-matrix">构建文档特征矩阵<a class="anchor" aria-label="anchor" href="#constructing-a-document-feature-matrix"></a>
</h3>
<p>分词只是一个中间结果，而大多数用户都希望直接构建一个文档特征矩阵。为此，我们提供一个瑞士军刀功能<code><a href="../../reference/dfm.html">dfm()</a></code>，此项功能执行分词并将所提取的特征归纳成文档特征矩阵。不同于<code><a href="../../reference/tokens.html">tokens()</a></code>所采用的保守方法，<code><a href="../../reference/dfm.html">dfm()</a></code>函数默认某些应用选项，比如<code>toLower()</code>
- 一个单独的用于转换为小写的函数，以及 -
删除标点符号。不过<code><a href="../../reference/tokens.html">tokens()</a></code>的所有选项都可以传递给<code><a href="../../reference/dfm.html">dfm()</a></code>。</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_inaug_post1990</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 构建dfm</span></span>
<span><span class="va">dfmat_inaug_post1990</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">corp_inaug_post1990</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_post1990</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 8 documents, 5 features (0.00% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           my fellow citizens   , today</span></span>
<span><span class="co">##   1993-Clinton  7      5        2 139    10</span></span>
<span><span class="co">##   1997-Clinton  6      7        7 131     5</span></span>
<span><span class="co">##   2001-Bush     3      1        9 110     2</span></span>
<span><span class="co">##   2005-Bush     2      3        6 120     3</span></span>
<span><span class="co">##   2009-Obama    2      1        1 130     6</span></span>
<span><span class="co">##   2013-Obama    3      3        6  99     4</span></span>
<span><span class="co">## [ reached max_ndoc ... 2 more documents ]</span></span></code></pre>
<p><code><a href="../../reference/dfm.html">dfm()</a></code>的其他选项还包括去除停用词和分词的词干提取。</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 构建dfm, 去除停用词以及提取词干</span></span>
<span></span>
<span><span class="va">dfmat_inaug_post1990_stem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">corp_inaug_post1990</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_post1990_stem</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 8 documents, 5 features (17.50% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           fellow citizen today celebr mysteri</span></span>
<span><span class="co">##   1993-Clinton      5       2    10      4       1</span></span>
<span><span class="co">##   1997-Clinton      7       8     6      1       0</span></span>
<span><span class="co">##   2001-Bush         1      10     2      0       0</span></span>
<span><span class="co">##   2005-Bush         3       7     3      2       0</span></span>
<span><span class="co">##   2009-Obama        1       1     6      2       0</span></span>
<span><span class="co">##   2013-Obama        3       8     6      1       0</span></span>
<span><span class="co">## [ reached max_ndoc ... 2 more documents ]</span></span></code></pre>
<p><code>remove</code>选项提供一个需要被去除的分词的列表。大多数用户会提供一个为多语种预定义的“停用词”的列表，可通过<code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords()</a></code>函数获取：</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span>, <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "i"          "me"         "my"         "myself"     "we"        </span></span>
<span><span class="co">##  [6] "our"        "ours"       "ourselves"  "you"        "your"      </span></span>
<span><span class="co">## [11] "yours"      "yourself"   "yourselves" "he"         "him"       </span></span>
<span><span class="co">## [16] "his"        "himself"    "she"        "her"        "hers"</span></span></code></pre>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"ru"</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</span></span></code></pre>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"ar"</span>, source <span class="op">=</span> <span class="st">"misc"</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</span></span></code></pre>
<div class="section level4">
<h4 id="viewing-the-document-feature-matrix">查看文档特征矩阵<a class="anchor" aria-label="anchor" href="#viewing-the-document-feature-matrix"></a>
</h4>
<p>可以在RStudio 的Enviroment
pane中查看dfm,或者调用R的View功能。调用<code>plot</code>dfm将调用<a href="https://cran.r-project.org/web/packages/wordcloud/index.html" class="external-link">wordcloud软件包</a>绘制词云图。</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_char_ukimmig2010</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_uk</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 9 documents, 1,547 features (83.78% sparse) and 0 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           immigration unparalleled crisis bnp can solve current birth</span></span>
<span><span class="co">##   BNP                   21            1      2  13   1     2       4     4</span></span>
<span><span class="co">##   Coalition              6            0      0   0   0     0       1     0</span></span>
<span><span class="co">##   Conservative           3            0      0   0   2     0       0     0</span></span>
<span><span class="co">##   Greens                 8            0      0   0   1     0       0     0</span></span>
<span><span class="co">##   Labour                13            0      0   0   1     0       0     0</span></span>
<span><span class="co">##   LibDem                 5            0      0   0   2     0       0     0</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           rates indigenous</span></span>
<span><span class="co">##   BNP              2          5</span></span>
<span><span class="co">##   Coalition        0          0</span></span>
<span><span class="co">##   Conservative     0          0</span></span>
<span><span class="co">##   Greens           0          0</span></span>
<span><span class="co">##   Labour           0          0</span></span>
<span><span class="co">##   LibDem           0          0</span></span>
<span><span class="co">## [ reached max_ndoc ... 3 more documents, reached max_nfeat ... 1,537 more features ]</span></span></code></pre>
<p>使用<code><a href="../../reference/topfeatures.html">topfeatures()</a></code>可以访问出现频率最高的特征：</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/topfeatures.html">topfeatures</a></span><span class="op">(</span><span class="va">dfmat_uk</span>, <span class="fl">20</span><span class="op">)</span>  <span class="co"># 20 词频最高的词</span></span></code></pre></div>
<pre><code><span><span class="co">## immigration     british      people      asylum     britain          uk </span></span>
<span><span class="co">##          66          37          35          29          28          27 </span></span>
<span><span class="co">##      system  population     country         new  immigrants      ensure </span></span>
<span><span class="co">##          27          21          20          19          17          17 </span></span>
<span><span class="co">##       shall citizenship      social    national         bnp     illegal </span></span>
<span><span class="co">##          17          16          14          14          13          13 </span></span>
<span><span class="co">##        work     percent </span></span>
<span><span class="co">##          13          12</span></span></code></pre>
<p>使用<code><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html" class="external-link">textplot_wordcloud()</a></code>可以绘制<code>dfm</code>对象的词云图。这个函数将参数传递给<strong>wordcloud</strong>包的<code>wordcloud()</code>函数，并且可以使用相同的参数来对图进行美化：</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"quanteda.textplots"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html" class="external-link">textplot_wordcloud</a></span><span class="op">(</span><span class="va">dfmat_uk</span>, min_count <span class="op">=</span> <span class="fl">6</span>, random_order <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                   rotation <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>                   color <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"Dark2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="grouping-documents-by-document-variable">按文档变量对文档分组<a class="anchor" aria-label="anchor" href="#grouping-documents-by-document-variable"></a>
</h4>
<p>通常，我们感兴趣的是根据可能存在于文档变量中实质性因素来分析文本是如何不同的，而不仅仅是根据文档文件的边界。创建dfm时，我们可以将具有相同文档变量的文档分成一组：</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_ire</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm_group.html">dfm_group</a></span><span class="op">(</span>groups <span class="op">=</span> <span class="va">party</span><span class="op">)</span></span></code></pre></div>
<p>我们可以对这个dfm进行排序，并查看：</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/dfm_sort.html">dfm_sort</a></span><span class="op">(</span><span class="va">dfmat_ire</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 5 documents, 10 features (0.00% sparse) and 3 docvars.</span></span>
<span><span class="co">##        features</span></span>
<span><span class="co">## docs      € people budget government public minister tax economy pay jobs</span></span>
<span><span class="co">##   FF    113     23     44         47     65       11  60      37  41   41</span></span>
<span><span class="co">##   FG     55     78     71         61     47       62  11      20  29   17</span></span>
<span><span class="co">##   Green  13     15     26         19      4        4  11      16   4   15</span></span>
<span><span class="co">##   LAB    78     69     66         36     32       54  47      37  24   20</span></span>
<span><span class="co">##   SF     77     81     53         73     31       39  34      50  24   27</span></span></code></pre>
<p>请注意，最常出现的特征是“will”，这个词通常出现在英语停用词表中，但是并不包含在quanteda的内置英语停用词表中。</p>
</div>
<div class="section level4">
<h4 id="grouping-words-by-dictionary-or-equivalence-class">按字典或等价的类别对词汇分组<a class="anchor" aria-label="anchor" href="#grouping-words-by-dictionary-or-equivalence-class"></a>
</h4>
<p>在某些应用中，关于文本中我们感兴趣的单词集合我们有先验知识。例如，在电影评论中，通用的正面词汇的列表可能表示对电影正面的评价，或者我们可能会有一个与特定的意识形态立场相关的政治词汇的字典。在这些情况下，为了分析的目的，将这些词组等同处理并将其计数归类是有用的。</p>
<p>例如，我们来看看总统在就职演讲的语料库中，与恐怖主义有关的词汇和与经济相关的词语在总统之间是如何变化的。从原语料库中，我们选择自克林顿以来的总统：</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp_inaug_post1991</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1991</span><span class="op">)</span></span></code></pre></div>
<p>现在我们定义一个用于展示的字典：</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dictionary.html">dictionary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>terror <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span><span class="op">)</span>,</span>
<span>                        economy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>我们也可在构建dfm时使用字典：</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_inaug_post1991_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">corp_inaug_post1991</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_lookup.html">tokens_lookup</a></span><span class="op">(</span>dictionary <span class="op">=</span> <span class="va">dict</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_post1991_dict</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 8 documents, 2 features (12.50% sparse) and 4 docvars.</span></span>
<span><span class="co">##               features</span></span>
<span><span class="co">## docs           terror economy</span></span>
<span><span class="co">##   1993-Clinton      0       8</span></span>
<span><span class="co">##   1997-Clinton      1       8</span></span>
<span><span class="co">##   2001-Bush         0       4</span></span>
<span><span class="co">##   2005-Bush         1       6</span></span>
<span><span class="co">##   2009-Obama        1      10</span></span>
<span><span class="co">##   2013-Obama        1       6</span></span>
<span><span class="co">## [ reached max_ndoc ... 2 more documents ]</span></span></code></pre>
<p>构造函数<code><a href="../../reference/dictionary.html">dictionary()</a></code>也适用于两种常见的“外来”字典格式：LIWC
和 Provalis Research’ Wordstat。例如，我们可以加载 LIWC
并将其应用于总统就职演讲语料库：</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dictliwc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dictionary.html">dictionary</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,</span>
<span>                       format <span class="op">=</span> <span class="st">"LIWC"</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">[</span><span class="fl">52</span><span class="op">:</span><span class="fl">58</span><span class="op">]</span><span class="op">)</span>, dictionary <span class="op">=</span> <span class="va">dicliwc</span><span class="op">)</span></span>
<span><span class="va">dfmat_inaug_subset</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="further-examples">更多范例<a class="anchor" aria-label="anchor" href="#further-examples"></a>
</h2>
<div class="section level3">
<h3 id="similarities-between-texts">文本之间的相似度<a class="anchor" aria-label="anchor" href="#similarities-between-texts"></a>
</h3>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dfmat_inaug_post1980</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, <span class="va">Year</span> <span class="op">&gt;</span> <span class="fl">1980</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://quanteda.io">"quanteda.textstats"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tstat_obama</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span><span class="va">dfmat_inaug_post1980</span>,</span>
<span>                              <span class="va">dfmat_inaug_post1980</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2009-Obama"</span>, <span class="st">"2013-Obama"</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>                              margin <span class="op">=</span> <span class="st">"documents"</span>, method <span class="op">=</span> <span class="st">"cosine"</span><span class="op">)</span></span>
<span><span class="va">tstat_obama</span></span></code></pre></div>
<pre><code><span><span class="co">## textstat_simil object; method = "cosine"</span></span>
<span><span class="co">##              2009-Obama 2013-Obama</span></span>
<span><span class="co">## 1981-Reagan       0.622      0.637</span></span>
<span><span class="co">## 1985-Reagan       0.643      0.662</span></span>
<span><span class="co">## 1989-Bush         0.625      0.578</span></span>
<span><span class="co">## 1993-Clinton      0.628      0.626</span></span>
<span><span class="co">## 1997-Clinton      0.660      0.646</span></span>
<span><span class="co">## 2001-Bush         0.601      0.617</span></span>
<span><span class="co">## 2005-Bush         0.526      0.587</span></span>
<span><span class="co">## 2009-Obama        1.000      0.681</span></span>
<span><span class="co">## 2013-Obama        0.681      1.000</span></span>
<span><span class="co">## 2017-Trump        0.519      0.516</span></span>
<span><span class="co">## 2021-Biden        0.661      0.645</span></span></code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dotchart(as.list(obama_simil)$"2009-Obama", xlab = "Cosine similarity")</span></span></code></pre></div>
<p>我们可以用这些距离来绘制树状图，聚类分析总统：</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_corpus_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="st">"https://quanteda.org/data/data_corpus_sotu.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfmat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/corpus_subset.html">corpus_subset</a></span><span class="op">(</span><span class="va">data_corpus_sotu</span>, <span class="va">Date</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1980-01-01"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"english"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_wordstem.html">tokens_wordstem</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">dfmat_sotu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">dfmat_sotu</span>, min_termfreq <span class="op">=</span> <span class="fl">5</span>, min_docfreq <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#分层聚类 -  在归一化dfm上计算距离</span></span>
<span><span class="va">tstat_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_dist</a></span><span class="op">(</span><span class="fu"><a href="../../reference/dfm_weight.html">dfm_weight</a></span><span class="op">(</span><span class="va">dfmat_sotu</span>, scheme <span class="op">=</span> <span class="st">"prop"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># 聚类分析文本距离</span></span>
<span><span class="va">pres_cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/hclust.html" class="external-link">hclust</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">as.dist</a></span><span class="op">(</span><span class="va">tstat_dist</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># 按文档名标注</span></span>
<span><span class="va">pres_cluster</span><span class="op">$</span><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/docnames.html">docnames</a></span><span class="op">(</span><span class="va">dfmat_sotu</span><span class="op">)</span></span>
<span><span class="co"># 绘制树状图</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pres_cluster</span>, xlab <span class="op">=</span> <span class="st">""</span>, sub <span class="op">=</span> <span class="st">""</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-34-1.png" width="960"></p>
<p>我们也可查看特征相似度:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tstat_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil</a></span><span class="op">(</span><span class="va">dfmat_sotu</span>, <span class="va">dfmat_sotu</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                      method <span class="op">=</span> <span class="st">"cosine"</span>, margin <span class="op">=</span> <span class="st">"features"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">tstat_sim</span><span class="op">)</span>, <span class="va">head</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $fair</span></span>
<span><span class="co">##      time    better       far  strategi     lower        us      long       one </span></span>
<span><span class="co">## 0.8266617 0.8135324 0.8036487 0.8002557 0.7995066 0.7992766 0.7977770 0.7949795 </span></span>
<span><span class="co">##   practic  american </span></span>
<span><span class="co">## 0.7944127 0.7884288 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $health</span></span>
<span><span class="co">##    system      issu    privat      need    expand    reform   support      hous </span></span>
<span><span class="co">## 0.9232094 0.9229859 0.9175231 0.9145142 0.9118901 0.9072380 0.9072374 0.9063870 </span></span>
<span><span class="co">##    dramat      mani </span></span>
<span><span class="co">## 0.9051588 0.9045851 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $terror</span></span>
<span><span class="co">## terrorist    coalit    cheney      evil  homeland   liberti      11th    sudden </span></span>
<span><span class="co">## 0.8539894 0.8179609 0.8175618 0.7949619 0.7878223 0.7697739 0.7603221 0.7556575 </span></span>
<span><span class="co">##     regim   septemb </span></span>
<span><span class="co">## 0.7533021 0.7502925</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="scaling-document-positions">文档位置的缩放分析<a class="anchor" aria-label="anchor" href="#scaling-document-positions"></a>
</h3>
<p>我们在<code><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html" class="external-link">textmodel_wordfish()</a></code>功能上做了大量的开发工作，这里仅演示“wordfish”模型的无监督文档缩放分析：</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make prettier document names</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/quanteda/quanteda.textmodels" class="external-link">"quanteda.textmodels"</a></span><span class="op">)</span></span>
<span><span class="va">dfmat_ire</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tmod_wf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html" class="external-link">textmodel_wordfish</a></span><span class="op">(</span><span class="va">dfmat_ire</span>, dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the Wordfish estimates by party</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_scale1d.html" class="external-link">textplot_scale1d</a></span><span class="op">(</span><span class="va">tmod_wf</span>, groups <span class="op">=</span> <span class="fu"><a href="../../reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">dfmat_ire</span>, <span class="st">"party"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="topic-models">主题模型<a class="anchor" aria-label="anchor" href="#topic-models"></a>
</h3>
<p><strong>quanteda</strong>可以很轻松训练主题模型：</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quant_dfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="va">data_corpus_irishbudget2010</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span>, remove_numbers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">quant_dfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">quant_dfm</span>, min_termfreq <span class="op">=</span> <span class="fl">4</span>, max_docfreq <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">quant_dfm</span></span></code></pre></div>
<pre><code><span><span class="co">## Document-feature matrix of: 14 documents, 1,263 features (64.52% sparse) and 6 docvars.</span></span>
<span><span class="co">##                       features</span></span>
<span><span class="co">## docs                   supplementary april said period severe today report</span></span>
<span><span class="co">##   Lenihan, Brian (FF)              7     1    1      2      3     9      6</span></span>
<span><span class="co">##   Bruton, Richard (FG)             0     1    0      0      0     6      5</span></span>
<span><span class="co">##   Burton, Joan (LAB)               0     0    4      2      0    13      1</span></span>
<span><span class="co">##   Morgan, Arthur (SF)              1     3    0      3      0     4      0</span></span>
<span><span class="co">##   Cowen, Brian (FF)                0     0    0      4      1     3      2</span></span>
<span><span class="co">##   Kenny, Enda (FG)                 1     4    4      1      0     2      0</span></span>
<span><span class="co">##                       features</span></span>
<span><span class="co">## docs                   difficulties months road</span></span>
<span><span class="co">##   Lenihan, Brian (FF)             6     11    2</span></span>
<span><span class="co">##   Bruton, Richard (FG)            0      0    1</span></span>
<span><span class="co">##   Burton, Joan (LAB)              1      3    1</span></span>
<span><span class="co">##   Morgan, Arthur (SF)             1      4    2</span></span>
<span><span class="co">##   Cowen, Brian (FF)               1      3    2</span></span>
<span><span class="co">##   Kenny, Enda (FG)                0      2    5</span></span>
<span><span class="co">## [ reached max_ndoc ... 8 more documents, reached max_nfeat ... 1,253 more features ]</span></span></code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="http://www.structuraltopicmodel.com/" class="external-link">"stm"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">my_lda_fit20</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/stm/man/stm.html" class="external-link">stm</a></span><span class="op">(</span><span class="va">quant_dfm</span>, K <span class="op">=</span> <span class="fl">20</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_lda_fit20</span><span class="op">)</span>    </span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: stm</span></span></code></pre>
<pre><code><span><span class="co">## stm v1.3.7 successfully loaded. See ?stm for help. </span></span>
<span><span class="co">##  Papers, resources, and other materials at structuraltopicmodel.com</span></span></code></pre>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-38-1.png" width="672"></p>
<p>注：以上这个指南翻译于英文版<a href="https://quanteda.io/articles/pkgdown/quickstart.html">quickstart</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="processing-chinese-documentation">Quanteda处理中文文档<a class="anchor" aria-label="anchor" href="#processing-chinese-documentation"></a>
</h2>
<div class="section level3">
<h3 id="chinese-stop-words">中文停用词：取自百度停用词<a class="anchor" aria-label="anchor" href="#chinese-stop-words"></a>
</h3>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 读取中文停用词</span></span>
<span><span class="va">stopw_zh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"zh"</span>, source <span class="op">=</span> <span class="st">"misc"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"中华人民共和国成立于1949 年"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "中华"   "人民"   "共和国" "成立"   "于"     "1949"   "年"</span></span></code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 除去停用词</span></span>
<span><span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span><span class="st">"中华人民共和国成立于1949 年"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"zh"</span>, source <span class="op">=</span> <span class="st">"misc"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tokens consisting of 1 document.</span></span>
<span><span class="co">## text1 :</span></span>
<span><span class="co">## [1] "中华"   "人民"   "共和国" "成立"   "1949"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="chinese-government-report">例子：中国总理的“政府工作报告”<a class="anchor" aria-label="anchor" href="#chinese-government-report"></a>
</h3>
<p>四十九份中国总理的“政府工作报告”，1954 - 2017</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 读取文件</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"examples/data/data_corpus_chinesegovreport.rda"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data_corpus_chinesegovreport</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 49 documents, showing 10 documents:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    Text Types Tokens Sentences                           doc_id Year Premier</span></span>
<span><span class="co">##   text1  2230  14093       453      1954政府工作报告_周恩来.txt 1954  周恩来</span></span>
<span><span class="co">##   text2  3053  35127       981      1955政府工作报告_李富春.txt 1955  李富春</span></span>
<span><span class="co">##   text3  1865  10807       347      1956政府工作报告_李先念.txt 1956  李先念</span></span>
<span><span class="co">##   text4  2596  21395       704      1957政府工作报告_周恩来.txt 1957  周恩来</span></span>
<span><span class="co">##   text5  2185  15163       412      1958政府工作报告_薄一波.txt 1958  薄一波</span></span>
<span><span class="co">##   text6  2512  19217       577      1959政府工作报告_周恩来.txt 1959  周恩来</span></span>
<span><span class="co">##   text7  1302   6268       164      1960政府工作报告_谭震林.txt 1960  谭震林</span></span>
<span><span class="co">##   text8  1891  11670       387 1964政府工作报告_周恩来_摘要.txt 1964  周恩来</span></span>
<span><span class="co">##   text9   966   3187       125      1975政府工作报告_周恩来.txt 1975  周恩来</span></span>
<span><span class="co">##  text10  2965  19119       659      1978政府工作报告_华国锋.txt 1978  华国锋</span></span></code></pre>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 分词</span></span>
<span><span class="va">toks_china</span> <span class="op">&lt;-</span> <span class="va">data_corpus_chinesegovreport</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/tokens.html">tokens</a></span><span class="op">(</span>remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/tokens_select.html">tokens_remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"zh"</span>, source <span class="op">=</span> <span class="st">"misc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 创建 dfm</span></span>
<span><span class="va">dfmat_china</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm.html">dfm</a></span><span class="op">(</span><span class="va">toks_china</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/topfeatures.html">topfeatures</a></span><span class="op">(</span><span class="va">dfmat_china</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 </span></span>
<span><span class="co">## 5627 5036 4255 4248 2931 2897 2817 2642 2627 2595</span></span></code></pre>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 </span></span>
<span><span class="co">#5627 5036 4255 4248 2931 2897 2817 2642 2627 2595 </span></span>
<span></span>
<span><span class="co"># 绘制词云图</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">dfmat_china_trim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">dfmat_china</span>, min_termfreq <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="co"># 设置适用于MacOS的字体</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html" class="external-link">textplot_wordcloud</a></span><span class="op">(</span><span class="va">dfmat_china_trim</span>, min_count <span class="op">=</span> <span class="fl">6</span>, </span>
<span>                   rotation <span class="op">=</span> <span class="fl">.25</span>, max_words <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                   min_size <span class="op">=</span> <span class="fl">.5</span>, max_size <span class="op">=</span> <span class="fl">2.8</span>,</span>
<span>                   font <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html" class="external-link">Sys.info</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">"sysname"</span><span class="op">]</span> <span class="op">==</span> <span class="st">"Darwin"</span><span class="op">)</span> <span class="st">"SimHei"</span> <span class="kw">else</span> <span class="cn">NULL</span>,</span>
<span>                   color <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"Dark2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/fig1-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="wordfish">文本缩放模型<a class="anchor" aria-label="anchor" href="#wordfish"></a>
</h3>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html" class="external-link">textmodel_wordfish</a></span><span class="op">(</span><span class="va">dfmat_china</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1954</span><span class="op">:</span><span class="fl">2017</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">y</span> <span class="op">==</span> <span class="fl">1963</span> <span class="op">|</span> <span class="va">y</span> <span class="op">==</span> <span class="fl">1961</span> <span class="op">|</span> <span class="va">y</span> <span class="op">==</span> <span class="fl">1962</span> <span class="op">|</span> <span class="op">(</span><span class="va">y</span> <span class="op">&gt;</span> <span class="fl">1964</span> <span class="op">&amp;</span> <span class="va">y</span> <span class="op">&lt;</span> <span class="fl">1975</span><span class="op">)</span> <span class="op">|</span> <span class="va">y</span> <span class="op">==</span> <span class="fl">1976</span> <span class="op">|</span> <span class="va">y</span> <span class="op">==</span> <span class="fl">1977</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">wfm</span><span class="op">$</span><span class="va">theta</span>, xlab <span class="op">=</span> <span class="st">"Year"</span>, ylab <span class="op">=</span> <span class="st">"Position"</span><span class="op">)</span></span></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/fig2-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="collocation">词组 - 双词词组/三词词组等<a class="anchor" aria-label="anchor" href="#collocation"></a>
</h3>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 所有报告中的双词词组</span></span>
<span><span class="va">tstat_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/textstat_collocations.html">textstat_collocations</a></span><span class="op">(</span><span class="va">toks_china</span>, size <span class="op">=</span> <span class="fl">2</span>, min_count <span class="op">=</span> <span class="fl">20</span>, tolower <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tstat_col</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    collocation count count_nested length   lambda         z</span></span>
<span><span class="co">## 1    社会 主义  1787            0      2 5.667646 128.76439</span></span>
<span><span class="co">## 2        亿 元   689            0      2 7.451647  93.09479</span></span>
<span><span class="co">## 3      现代 化   632            0      2 6.956866  83.62882</span></span>
<span><span class="co">## 4    体制 改革   504            0      2 5.199483  77.47483</span></span>
<span><span class="co">## 5    五年 计划   341            0      2 5.365465  71.73289</span></span>
<span><span class="co">## 6    各级 政府   306            0      2 6.116987  66.70430</span></span>
<span><span class="co">## 7    增长 百分   300            0      2 5.527159  65.95692</span></span>
<span><span class="co">## 8        万 吨   212            0      2 6.596337  62.62405</span></span>
<span><span class="co">## 9    国民 经济   589            0      2 6.021117  61.87053</span></span>
<span><span class="co">## 10   充分 发挥   191            0      2 6.590507  61.30822</span></span></code></pre>
<p>注：以上这部分介绍翻译于<a href="https://quanteda.io/articles/pkgdown/examples/chinese.html">英文版</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
