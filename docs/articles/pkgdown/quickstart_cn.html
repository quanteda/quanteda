<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>快速入门指南 • quanteda</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- docsearch --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="快速入门指南">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">quanteda</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/design.html">Package design</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>快速入门指南</h1>
            
      
      
      <div class="hidden name"><code>quickstart_cn.Rmd</code></div>

    </div>

    
    
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>软件包安装</h1>
<p><strong>quanteda</strong>已上传在<a href="https://CRAN.R-project.org/package=quanteda">CRAN</a>上，所以可以使用GUI的R软件包安装程序进行安装，或执行：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"quanteda"</span>) </code></pre></div>
<p>请参阅https://github.com/quanteda/quanteda上的说明来安装GitHub版本。</p>
<div id="additional-recommended-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-recommended-packages" class="anchor"></a>推荐安装</h2>
<p>我们建议安装以下软件包，以便更好地支持和扩展<strong>quanteda</strong>的功能：</p>
<ul>
<li>
<a href="https://github.com/quanteda/readtext"><strong>readtext</strong></a>: 可将几乎任何格式的文本文件读入R</li>
<li>
<a href="https://github.com/quanteda/spacyr"><strong>spacyr</strong></a>: 使用<a href="http://spacy.io">spaCy</a>库的NLP，包括词性标注，命名实体和依存语法</li>
<li>
<a href="https://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>: 用于<strong>quanteda</strong>的附加文本数据</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"quanteda/quanteda.corpora"</span>)</code></pre></div>
<ul>
<li>
<a href="https://github.com/quanteda/LIWCalike"><strong>LIWCalike</strong></a>: R版<a href="http://liwc.wpengine.com">Linguistic Inquiry and Word Count</a> 文本分析软件</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"kbenoit/LIWCalike"</span>)</code></pre></div>
</div>
</div>
<div id="creating-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-corpus" class="anchor"></a>创建语料库</h1>
<p>加载<strong>quanteda</strong>以便使用软件包中的数据和功能。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quanteda)</code></pre></div>
<div id="currently-available-corpus-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#currently-available-corpus-sources" class="anchor"></a>目前可用的语料库资源</h2>
<p><strong>quanteda</strong>有一个简单而强大的配套软件包用于加载文本文件: <a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>。 这个软件包的主函数<code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code>从磁盘或者URL中读取文件或者文件集，并且返回一个可以直接和<code><a href="../../reference/corpus.html">corpus()</a></code>构造函数一起使用的data.frame，可用来创建一个<strong>quanteda</strong>语料库。</p>
<p><code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code>可读取：</p>
<ul>
<li>文本文件 (<code>.txt</code>)</li>
<li>逗号分割的（<code>.csv</code>）文本文件</li>
<li>XML数据</li>
<li>取自脸书API的JSON格式的数据</li>
<li>取自TwitterAPI的JSON格式的数据</li>
<li>常用的JSON数据</li>
</ul>
<p>语料库创建函数<code><a href="../../reference/corpus.html">corpus()</a></code>可用于：</p>
<ul>
<li>字符类向量，比如你使用其他工具已经加载到R工作空间的</li>
<li>
<strong>tm</strong> 软件包中<code>VCorpus</code>语料库对象</li>
<li>data.frame 包含文本列和其他任何文件级元数据</li>
</ul>
<div id="building-a-corpus-from-a-character-vector" class="section level3">
<h3 class="hasAnchor">
<a href="#building-a-corpus-from-a-character-vector" class="anchor"></a>从字符向量构建语料库</h3>
<p>最简单的方式是从R中已经存在的文本向量创建一个语料库。这使得高级R用户可以灵活地选择文本输入，因为R有很多可以读取文本向量的方法。</p>
<p>一旦我们有了这种格式的文本数据，我们就可以直接调用语料库构造函数。以从内置的英国政党2010年选举宣言（<code>data_char_ukimmig2010</code>）中提取的有关移民政策的文本为例：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_char_ukimmig2010)  <span class="co"># 从文本构建语料库</span>
<span class="kw">summary</span>(my_corpus)</code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences
##           BNP  1125   3280        88
##     Coalition   142    260         4
##  Conservative   251    499        15
##        Greens   322    679        21
##        Labour   298    683        29
##        LibDem   251    483        14
##            PC    77    114         5
##           SNP    88    134         4
##          UKIP   346    723        27
## 
## Source: /home/kohei/packages/quanteda/vignettes/pkgdown/* on x86_64 by kohei
## Created: Tue Jun  5 10:28:21 2018
## Notes:</code></pre>
<p>我们也可以添加一些文档变量– <strong>quanteda</strong> 称之为此语料库的<code><a href="../../reference/docvars.html">docvars()</a></code>。</p>
<p>我们可以使用R的<code>names()</code>函数来读取字符向量<code>data_char_ukimmig2010</code>的名称，并且将其给文档变量赋值。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(my_corpus, <span class="st">"Party"</span>) &lt;-<span class="st"> </span><span class="kw">names</span>(data_char_ukimmig2010)
<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(my_corpus, <span class="st">"Year"</span>) &lt;-<span class="st"> </span><span class="dv">2010</span>
<span class="kw">summary</span>(my_corpus)</code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences        Party Year
##           BNP  1125   3280        88          BNP 2010
##     Coalition   142    260         4    Coalition 2010
##  Conservative   251    499        15 Conservative 2010
##        Greens   322    679        21       Greens 2010
##        Labour   298    683        29       Labour 2010
##        LibDem   251    483        14       LibDem 2010
##            PC    77    114         5           PC 2010
##           SNP    88    134         4          SNP 2010
##          UKIP   346    723        27         UKIP 2010
## 
## Source: /home/kohei/packages/quanteda/vignettes/pkgdown/* on x86_64 by kohei
## Created: Tue Jun  5 10:28:21 2018
## Notes:</code></pre>
<p>如果我们想要为每个文档添加额外的元数据，而这些元数据是我们需要知道的文档属性，我们也可以添加到语料库中。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/metadoc.html">metadoc</a></span>(my_corpus, <span class="st">"language"</span>) &lt;-<span class="st"> "english"</span>
<span class="kw"><a href="../../reference/metadoc.html">metadoc</a></span>(my_corpus, <span class="st">"docsource"</span>)  &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">"data_char_ukimmig2010"</span>, <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="../../reference/ndoc.html">ndoc</a></span>(my_corpus), <span class="dt">sep =</span> <span class="st">"_"</span>)
<span class="kw">summary</span>(my_corpus, <span class="dt">showmeta =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Corpus consisting of 9 documents:
## 
##          Text Types Tokens Sentences _language              _docsource
##           BNP  1125   3280        88   english data_char_ukimmig2010_1
##     Coalition   142    260         4   english data_char_ukimmig2010_2
##  Conservative   251    499        15   english data_char_ukimmig2010_3
##        Greens   322    679        21   english data_char_ukimmig2010_4
##        Labour   298    683        29   english data_char_ukimmig2010_5
##        LibDem   251    483        14   english data_char_ukimmig2010_6
##            PC    77    114         5   english data_char_ukimmig2010_7
##           SNP    88    134         4   english data_char_ukimmig2010_8
##          UKIP   346    723        27   english data_char_ukimmig2010_9
##         Party Year
##           BNP 2010
##     Coalition 2010
##  Conservative 2010
##        Greens 2010
##        Labour 2010
##        LibDem 2010
##            PC 2010
##           SNP 2010
##          UKIP 2010
## 
## Source: /home/kohei/packages/quanteda/vignettes/pkgdown/* on x86_64 by kohei
## Created: Tue Jun  5 10:28:21 2018
## Notes:</code></pre>
<p>上面的命令<code><a href="../../reference/metadoc.html">metadoc()</a></code>允许您定义自己的文档元数据域。请注意，在赋值“英语”的值时，R会循环赋值，直到它匹配文集中的文档数量。在给上述定制的metadoc域<code>docsource</code>创建一个简单的标签时，我们使用了quanteda函数<code><a href="../../reference/ndoc.html">ndoc()</a></code>来提取语料库中的文件数量。这个功能是我们有意设计的，提供类似于你可能已经在R中使用过的函数，比如<code>nrow()</code>和<code>ncol()</code>。</p>
</div>
<div id="loading-in-files-using-the-readtext-package" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-in-files-using-the-readtext-package" class="anchor"></a>readtext软件包加载文件</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(readtext)

<span class="co"># Twitter json</span>
mytf1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)
my_corpusTwitter &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf1)
<span class="kw">summary</span>(my_corpusTwitter, <span class="dv">5</span>)
<span class="co"># 通用json - 需要“textfield”说明符</span>
mytf2 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,
                  <span class="dt">textfield =</span> <span class="st">"text"</span>)
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf2), <span class="dv">5</span>)
<span class="co"># 文本文件</span>
mytf3 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf3), <span class="dv">5</span>)
<span class="co"># 多文本文件</span>
mytf4 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf4), <span class="dv">5</span>)
<span class="co"># 包含取自文件名的docvars的多个文本文件</span>
mytf5 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, 
                  <span class="dt">docvarsfrom =</span> <span class="st">"filenames"</span>, <span class="dt">sep =</span> <span class="st">"-"</span>, <span class="dt">docvarnames =</span> <span class="kw">c</span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf5), <span class="dv">5</span>)
<span class="co"># XML 数据</span>
mytf6 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>, 
                  <span class="dt">textfield =</span> <span class="st">"COMMON"</span>)
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf6), <span class="dv">5</span>)
<span class="co"># csv 文件</span>
<span class="kw">write.csv</span>(<span class="kw">data.frame</span>(<span class="dt">inaugSpeech =</span> <span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural), 
                     <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural)),
          <span class="dt">file =</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)
mytf7 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">textfield =</span> <span class="st">"inaugSpeech"</span>)
<span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(mytf7), <span class="dv">5</span>)</code></pre></div>
</div>
</div>
<div id="how-a-quanteda-corpus-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-a-quanteda-corpus-works" class="anchor"></a>quanteda语料库工作方式</h2>
<div id="corpus-principles" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-principles" class="anchor"></a>语料库的原则</h3>
<p>语料库被设计成原始文档的“库”，该文档被转换为UTF-8编码的纯文本文件，并与元数据一起分别存储于语料库级和文档级。我们给文档级元数据一个特殊的名字：<code><a href="../../reference/docvars.html">docvars()</a></code>。这些变量或特征描述了每个文档的属性。</p>
<p>从处理和分析的角度，语料库被设计成相对静态的文本容器。这意味着语料库中的文本不能从内部通过（例如）清理或预处理改变，比如词干提取或去除标点符号。相反，作为处理过程的一部分文本可以从语料库中提取，并赋值给新的对象，但是设计的思路是将语料库作为原始参考副本保留下来，以便于其他分析 - 例如那些需要词干和标点符号的分析-比如分析阅读难易指数 - 可以在相同的语料库上执行。</p>
<p>为了从语料库中提取文本，我们使用一个名为<code><a href="../../reference/texts.html">texts()</a></code>的提取器。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural)[<span class="dv">2</span>]</code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington 
## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</code></pre>
<p>为了总结语料库中的文本，我们可以调用一个为语料库定义的函数<code>summary()</code>。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(data_corpus_irishbudget2010)</code></pre></div>
<pre><code>## Corpus consisting of 14 documents:
## 
##                                   Text Types Tokens Sentences year debate
##        2010_BUDGET_01_Brian_Lenihan_FF  1953   8641       374 2010 BUDGET
##       2010_BUDGET_02_Richard_Bruton_FG  1040   4446       217 2010 BUDGET
##         2010_BUDGET_03_Joan_Burton_LAB  1624   6393       307 2010 BUDGET
##        2010_BUDGET_04_Arthur_Morgan_SF  1595   7107       343 2010 BUDGET
##          2010_BUDGET_05_Brian_Cowen_FF  1629   6599       250 2010 BUDGET
##           2010_BUDGET_06_Enda_Kenny_FG  1148   4232       153 2010 BUDGET
##      2010_BUDGET_07_Kieran_ODonnell_FG   678   2297       133 2010 BUDGET
##       2010_BUDGET_08_Eamon_Gilmore_LAB  1181   4177       201 2010 BUDGET
##     2010_BUDGET_09_Michael_Higgins_LAB   488   1286        44 2010 BUDGET
##        2010_BUDGET_10_Ruairi_Quinn_LAB   439   1284        59 2010 BUDGET
##      2010_BUDGET_11_John_Gormley_Green   401   1030        49 2010 BUDGET
##        2010_BUDGET_12_Eamon_Ryan_Green   510   1643        90 2010 BUDGET
##      2010_BUDGET_13_Ciaran_Cuffe_Green   442   1240        45 2010 BUDGET
##  2010_BUDGET_14_Caoimhghin_OCaolain_SF  1188   4044       176 2010 BUDGET
##  number      foren     name party
##      01      Brian  Lenihan    FF
##      02    Richard   Bruton    FG
##      03       Joan   Burton   LAB
##      04     Arthur   Morgan    SF
##      05      Brian    Cowen    FF
##      06       Enda    Kenny    FG
##      07     Kieran ODonnell    FG
##      08      Eamon  Gilmore   LAB
##      09    Michael  Higgins   LAB
##      10     Ruairi    Quinn   LAB
##      11       John  Gormley Green
##      12      Eamon     Ryan Green
##      13     Ciaran    Cuffe Green
##      14 Caoimhghin OCaolain    SF
## 
## Source: /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/* on x86_64 by kbenoit
## Created: Wed Jun 28 22:04:18 2017
## Notes:</code></pre>
<p>我们可以将汇总命令的输出保存为data.frame，并用这些信息绘制出一些基本的描述性统计信息：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tokenInfo &lt;-<span class="st"> </span><span class="kw">summary</span>(data_corpus_inaugural)
<span class="cf">if</span> (<span class="kw">require</span>(ggplot2))
    <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> tokenInfo, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Tokens, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_continuous">scale_x_continuous</a></span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>) ) </code></pre></div>
<pre><code>## Loading required package: ggplot2</code></pre>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 最长的就职演说: William Henry Harrison</span>
tokenInfo[<span class="kw">which.max</span>(tokenInfo<span class="op">$</span>Tokens), ] </code></pre></div>
<pre><code>##             Text Types Tokens Sentences Year President     FirstName
## 14 1841-Harrison  1896   9144       210 1841  Harrison William Henry</code></pre>
</div>
</div>
<div id="tools-for-handling-corpus-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-handling-corpus-objects" class="anchor"></a>处理语料库对象的功能</h2>
<div id="adding-two-corpus-objects-together" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-two-corpus-objects-together" class="anchor"></a>合并两个语料库对象</h3>
<p><code>+</code>运算符提供了一个连接两个语料库对象的简单方法。如果它们包含了不同的文档级别的变量，这些也将被合并起来以保证不丢失任何信息。语料库级别的元数据也被连接在一起。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quanteda)
my_corpus1 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])
my_corpus2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">53</span><span class="op">:</span><span class="dv">58</span>])
my_corpus3 &lt;-<span class="st"> </span>my_corpus1 <span class="op">+</span><span class="st"> </span>my_corpus2
<span class="kw">summary</span>(my_corpus3)</code></pre></div>
<pre><code>## Corpus consisting of 11 documents:
## 
##             Text Types Tokens Sentences
##  1789-Washington   625   1538        23
##  1793-Washington    96    147         4
##       1797-Adams   826   2578        37
##   1801-Jefferson   717   1927        41
##   1805-Jefferson   804   2381        45
##     1997-Clinton   773   2449       111
##        2001-Bush   621   1808        97
##        2005-Bush   773   2319       100
##       2009-Obama   938   2711       110
##       2013-Obama   814   2317        88
##       2017-Trump   582   1660        88
## 
## Source: Combination of corpuses my_corpus1 and my_corpus2
## Created: Tue Jun  5 10:28:23 2018
## Notes:</code></pre>
</div>
<div id="subsetting-corpus-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-corpus-objects" class="anchor"></a>提取语料库的子集</h3>
<p><code><a href="../../reference/corpus_subset.html">corpus_subset()</a></code>是为语料库定义的一个函数，用于根据基于<code><a href="../../reference/docvars.html">docvars()</a></code>的逻辑条件提取语料库子集：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>))</code></pre></div>
<pre><code>## Corpus consisting of 7 documents:
## 
##          Text Types Tokens Sentences Year President FirstName
##  1993-Clinton   642   1833        81 1993   Clinton      Bill
##  1997-Clinton   773   2449       111 1997   Clinton      Bill
##     2001-Bush   621   1808        97 2001      Bush George W.
##     2005-Bush   773   2319       100 2005      Bush George W.
##    2009-Obama   938   2711       110 2009     Obama    Barack
##    2013-Obama   814   2317        88 2013     Obama    Barack
##    2017-Trump   582   1660        88 2017     Trump Donald J.
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, President <span class="op">==</span><span class="st"> "Adams"</span>))</code></pre></div>
<pre><code>## Corpus consisting of 2 documents:
## 
##        Text Types Tokens Sentences Year President   FirstName
##  1797-Adams   826   2578        37 1797     Adams        John
##  1825-Adams  1003   3152        74 1825     Adams John Quincy
## 
## Source: Gerhard Peters and John T. Woolley. The American Presidency Project.
## Created: Tue Jun 13 14:51:47 2017
## Notes: http://www.presidency.ucsb.edu/inaugurals.php</code></pre>
</div>
</div>
<div id="exploring-corpus-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-corpus-texts" class="anchor"></a>浏览语料库文本</h2>
<p><code>kwic</code>功能（keywords-in-context）可以搜索一个指定的词并显示它的上下文：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>)</code></pre></div>
<pre><code>##                                                                     
##     [1797-Adams, 1325]              fraud or violence, by | terror |
##  [1933-Roosevelt, 112] nameless, unreasoning, unjustified | terror |
##  [1941-Roosevelt, 287]      seemed frozen by a fatalistic | terror |
##    [1961-Kennedy, 866]    alter that uncertain balance of | terror |
##     [1981-Reagan, 813]     freeing all Americans from the | terror |
##   [1997-Clinton, 1055]        They fuel the fanaticism of | terror |
##   [1997-Clinton, 1655]  maintain a strong defense against | terror |
##     [2009-Obama, 1632]     advance their aims by inducing | terror |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  of runaway living costs.         
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>, <span class="dt">valuetype =</span> <span class="st">"regex"</span>)</code></pre></div>
<pre><code>##                                                                           
##     [1797-Adams, 1325]                   fraud or violence, by |  terror  
##  [1933-Roosevelt, 112]      nameless, unreasoning, unjustified |  terror  
##  [1941-Roosevelt, 287]           seemed frozen by a fatalistic |  terror  
##    [1961-Kennedy, 866]         alter that uncertain balance of |  terror  
##    [1961-Kennedy, 990]               of science instead of its |  terrors 
##     [1981-Reagan, 813]          freeing all Americans from the |  terror  
##    [1981-Reagan, 2196]        understood by those who practice | terrorism
##   [1997-Clinton, 1055]             They fuel the fanaticism of |  terror  
##   [1997-Clinton, 1655]       maintain a strong defense against |  terror  
##     [2009-Obama, 1632]          advance their aims by inducing |  terror  
##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism
##                                     
##  | , intrigue, or venality          
##  | which paralyzes needed efforts to
##  | , we proved that this            
##  | that stays the hand of           
##  | . Together let us explore        
##  | of runaway living costs.         
##  | and prey upon their neighbors    
##  | . And they torment the           
##  | and destruction. Our children    
##  | and slaughtering innocents, we   
##  | , which we will eradicate</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"communist*"</span>)</code></pre></div>
<pre><code>##                                                                   
##   [1949-Truman, 834] the actions resulting from the | Communist  |
##  [1961-Kennedy, 519]             -- not because the | Communists |
##                            
##  philosophy are a threat to
##  may be doing it,</code></pre>
<p>在上面的汇总中，<code>Year</code>和<code>President</code>是与每个文档相关的变量。我们可以用<code><a href="../../reference/docvars.html">docvars()</a></code>函数访问这些变量。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 浏览文档变量</span>
<span class="kw">head</span>(<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural))</code></pre></div>
<pre><code>##                 Year  President FirstName
## 1789-Washington 1789 Washington    George
## 1793-Washington 1793 Washington    George
## 1797-Adams      1797      Adams      John
## 1801-Jefferson  1801  Jefferson    Thomas
## 1805-Jefferson  1805  Jefferson    Thomas
## 1809-Madison    1809    Madison     James</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 浏览语料库变量</span>
<span class="kw"><a href="../../reference/metacorpus.html">metacorpus</a></span>(data_corpus_inaugural)</code></pre></div>
<pre><code>## $source
## [1] "Gerhard Peters and John T. Woolley. The American Presidency Project."
## 
## $notes
## [1] "http://www.presidency.ucsb.edu/inaugurals.php"
## 
## $created
## [1] "Tue Jun 13 14:51:47 2017"</code></pre>
<p><a href="http://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>软件包提供更多语料库资源。</p>
</div>
</div>
<div id="extracting-features-from-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-features-from-a-corpus" class="anchor"></a>从语料库中提取特征</h1>
<p>为了执行文档缩放等统计分析，我们必须提取一个将某些特征与文档关联起来矩阵。在quanteda中，dfm函数用来生成这样一个矩阵。“dfm”是文档特征矩阵的缩写，矩阵的行总是为文档而列为“特征”。我们这样定义矩阵的行与列是因为在数据分析中标准的做法是将一个分析单元作为行，而将与每个单元有关的特征或变量作为列。我们称之为“特征”而不是“词项”，因为特征比词项更通用：词项可以被定义为原始词项，词干词项，词性词项，停用词去除后的词项，或者词项归属的字典。而特征可以是完全通用的，例如ngram或者句法依存，我们对矩阵的定义持开放式态度。</p>
<div id="tokenizing-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#tokenizing-texts" class="anchor"></a>文本分词</h2>
<p>为了简单地对文本分词，quanteda提供了一个强大的命令<code><a href="../../reference/tokens.html">tokens()</a></code>。这个命令会产生了一个以字符向量形式存在的分词表，表中的每单元元素 都对应于一个输入文档。</p>
<p><code><a href="../../reference/tokens.html">tokens()</a></code>有意设计成保守的，意味着除非有指令，它不会从文本中删除任何东西。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">txt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">text1 =</span> <span class="st">"This is $10 in 999 different ways,</span><span class="ch">\n</span><span class="st"> up and down; left and right!"</span>, 
         <span class="dt">text2 =</span> <span class="st">"@kenbenoit working: on #quanteda 2day</span><span class="ch">\t</span><span class="st">4ever, http://textasdata.com?page=123."</span>)
<span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"       
##  [6] "999"       "different" "ways"      ","         "up"       
## [11] "and"       "down"      ";"         "left"      "and"      
## [16] "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "in"        "different" "ways"     
##  [6] "up"        "and"       "down"      "left"      "and"      
## [11] "right"    
## 
## text2 :
## [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
## [5] "2day"           "4ever"          "http"           "textasdata.com"
## [9] "page"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "10"        "in"        "999"      
##  [6] "different" "ways"      "up"        "and"       "down"     
## [11] "left"      "and"       "right"    
## 
## text2 :
##  [1] "@kenbenoit"     "working"        "on"             "#quanteda"     
##  [5] "2day"           "4ever"          "http"           "textasdata.com"
##  [9] "page"           "123"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different"
##  [6] "ways"      ","         "up"        "and"       "down"     
## [11] ";"         "left"      "and"       "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "."</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"       
##  [6] "999"       "different" "ways"      ","         "up"       
## [11] "and"       "down"      ";"         "left"      "and"      
## [16] "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     "working"        ":"              "on"            
##  [5] "#quanteda"      "2day"           "4ever"          ","             
##  [9] "http"           ":"              "/"              "/"             
## [13] "textasdata.com" "?"              "page"           "="             
## [17] "123"            "."</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>, <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## tokens from 2 documents.
## text1 :
##  [1] "This"      " "         "is"        " "         "$"        
##  [6] "10"        " "         "in"        " "         "999"      
## [11] " "         "different" " "         "ways"      ","        
## [16] "\n"        " "         "up"        " "         "and"      
## [21] " "         "down"      ";"         " "         "left"     
## [26] " "         "and"       " "         "right"     "!"        
## 
## text2 :
##  [1] "@kenbenoit"     " "              "working"        ":"             
##  [5] " "              "on"             " "              "#quanteda"     
##  [9] " "              "2day"           "\t"             "4ever"         
## [13] ","              " "              "http"           ":"             
## [17] "/"              "/"              "textasdata.com" "?"             
## [21] "page"           "="              "123"            "."</code></pre>
<p>也可以按字符分词：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>)</code></pre></div>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e" ":" "h" "t" "t" "p"
## [18] ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m"
## [35] "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>, 
         <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## tokens from 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t" "e" ":" " " "h" "t"
## [18] "t" "p" ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c"
## [35] "o" "m" "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</code></pre>
<p>以及按句子分词：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sentence level         </span>
<span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="kw">c</span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>, 
           <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>, 
           <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>), 
          <span class="dt">what =</span> <span class="st">"sentence"</span>)</code></pre></div>
<pre><code>## tokens from 3 documents.
## text1 :
## [1] "Kurt Vongeut said; only assholes use semi-colons."
## 
## text2 :
## [1] "Today is Thursday in Canberra:  It is yesterday in London."
## 
## text3 :
## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</code></pre>
</div>
<div id="constructing-a-document-feature-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-document-feature-matrix" class="anchor"></a>构建文档特征矩阵</h2>
<p>分词只是一个中间结果，而大多数用户都希望直接构建一个文档特征矩阵。为此，我们提供一个瑞士军刀功能<code><a href="../../reference/dfm.html">dfm()</a></code>，此项功能执行分词并将所提取的特征归纳成文档特征矩阵。不同于<code><a href="../../reference/tokens.html">tokens()</a></code>所采用的保守方法，<code><a href="../../reference/dfm.html">dfm()</a></code>函数默认某些应用选项，比如<code>toLower()</code> - 一个单独的用于转换为小写的函数，以及 - 删除标点符号。不过<code><a href="../../reference/tokens.html">tokens()</a></code>的所有选项都可以传递给<code><a href="../../reference/dfm.html">dfm()</a></code>。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>)

<span class="co"># 构建dfm</span>
myDfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(my_corpus)
myDfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (0% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           my fellow citizens   , today
##   1993-Clinton  7      5        2 139    10
##   1997-Clinton  6      7        7 131     5
##   2001-Bush     3      1        9 110     2
##   2005-Bush     2      3        6 120     3
##   2009-Obama    2      1        1 130     6
##   2013-Obama    3      3        6  99     4
##   2017-Trump    1      1        4  96     4</code></pre>
<p><code><a href="../../reference/dfm.html">dfm()</a></code>的其他选项还包括去除停用词和分词的词干提取。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 构建dfm, 去除停用词以及提取词干</span>

myStemMat &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(my_corpus, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)
myStemMat[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (17.1% sparse).
## 7 x 5 sparse Matrix of class "dfm"
##               features
## docs           fellow citizen today celebr mysteri
##   1993-Clinton      5       2    10      4       1
##   1997-Clinton      7       8     6      1       0
##   2001-Bush         1      10     2      0       0
##   2005-Bush         3       7     3      2       0
##   2009-Obama        1       1     6      2       0
##   2013-Obama        3       8     6      1       0
##   2017-Trump        1       4     5      3       1</code></pre>
<p><code>remove</code>选项提供一个需要被去除的分词的列表。大多数用户会提供一个为多语种预定义的“停用词”的列表，可通过<code><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords()</a></code>函数获取：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dv">20</span>)</code></pre></div>
<pre><code>##  [1] "i"          "me"         "my"         "myself"     "we"        
##  [6] "our"        "ours"       "ourselves"  "you"        "your"      
## [11] "yours"      "yourself"   "yourselves" "he"         "him"       
## [16] "his"        "himself"    "she"        "her"        "hers"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"russian"</span>), <span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"arabic"</span>), <span class="dv">10</span>)</code></pre></div>
<pre><code>## Warning: 'stopwords(language = "ar")' is deprecated.
## Use 'stopwords(language = "ar", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<pre><code>##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</code></pre>
<div id="viewing-the-document-feature-matrix" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-the-document-feature-matrix" class="anchor"></a>查看文档特征矩阵</h3>
<p>可以在RStudio 的Enviroment pane中查看dfm,或者调用R的View功能。调用<code>plot</code>dfm将调用<a href="https://cran.r-project.org/web/packages/wordcloud/index.html">wordcloud软件包</a>绘制词云图。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_char_ukimmig2010, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)
mydfm</code></pre></div>
<pre><code>## Document-feature matrix of: 9 documents, 1,547 features (83.8% sparse).</code></pre>
<p>使用<code><a href="../../reference/topfeatures.html">topfeatures()</a></code>可以访问出现频率最高的特征：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(mydfm, <span class="dv">20</span>)  <span class="co"># 20 词频最高的词</span></code></pre></div>
<pre><code>## immigration     british      people      asylum     britain          uk 
##          66          37          35          29          28          27 
##      system  population     country         new  immigrants      ensure 
##          27          21          20          19          17          17 
##       shall citizenship      social    national         bnp     illegal 
##          17          16          14          14          13          13 
##        work     percent 
##          13          12</code></pre>
<p>使用<code><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>可以绘制<code>dfm</code>对象的词云图。这个函数将参数传递给<strong>wordcloud</strong>包的<code><a href="../../reference/wordcloud.html">wordcloud()</a></code>函数，并且可以使用相同的参数来对图进行美化：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">100</span>)
<span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(mydfm, <span class="dt">min.freq =</span> <span class="dv">6</span>, <span class="dt">random.order =</span> <span class="ot">FALSE</span>,
                   <span class="dt">rot.per =</span> .<span class="dv">25</span>, 
                   <span class="dt">colors =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>))</code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-27-1.png" width="672"></p>
</div>
<div id="grouping-documents-by-document-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-documents-by-document-variable" class="anchor"></a>按文档变量对文档分组</h3>
<p>通常，我们感兴趣的是根据可能存在于文档变量中实质性因素来分析文本是如何不同的，而不仅仅是根据文档文件的边界。创建dfm时，我们可以将具有相同文档变量的文档分成一组：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">byPartyDfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">groups =</span> <span class="st">"party"</span>, 
                  <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>我们可以对这个dfm进行排序，并查看：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/dfm_sort.html">dfm_sort</a></span>(byPartyDfm)[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<pre><code>## Document-feature matrix of: 5 documents, 10 features (0% sparse).
## 5 x 10 sparse Matrix of class "dfm"
##        features
## docs    people budget government public minister tax economy pay jobs
##   FF        23     44         47     65       11  60      37  41   41
##   FG        78     71         61     47       62  11      20  29   17
##   Green     15     26         19      4        4  11      16   4   15
##   LAB       69     66         36     32       54  47      37  24   20
##   SF        81     53         73     31       39  34      50  24   27
##        features
## docs    billion
##   FF         32
##   FG         21
##   Green       3
##   LAB        34
##   SF         29</code></pre>
<p>请注意，最常出现的特征是“will”，这个词通常出现在英语停用词表中，但是并不包含在quanteda的内置英语停用词表中。</p>
</div>
<div id="grouping-words-by-dictionary-or-equivalence-class" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-words-by-dictionary-or-equivalence-class" class="anchor"></a>按字典或等价的类别对词汇分组</h3>
<p>在某些应用中，关于文本中我们感兴趣的单词集合我们有先验知识。例如，在电影评论中，通用的正面词汇的列表可能表示对电影正面的评价，或者我们可能会有一个与特定的意识形态立场相关的政治词汇的字典。在这些情况下，为了分析的目的，将这些词组等同处理并将其计数归类是有用的。</p>
<p>例如，我们来看看总统在就职演讲的语料库中，与恐怖主义有关的词汇和与经济相关的词语在总统之间是如何变化的。从原语料库中，我们选择自克林顿以来的总统：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recentCorpus &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1991</span>)</code></pre></div>
<p>现在我们定义一个用于展示的字典：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myDict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="kw">list</span>(<span class="dt">terror =</span> <span class="kw">c</span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>),
                          <span class="dt">economy =</span> <span class="kw">c</span>(<span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</code></pre></div>
<p>我们也可在构建dfm时使用字典：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">byPresMat &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(recentCorpus, <span class="dt">dictionary =</span> myDict)
byPresMat</code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 2 features (14.3% sparse).
## 7 x 2 sparse Matrix of class "dfm"
##               features
## docs           terror economy
##   1993-Clinton      0       8
##   1997-Clinton      1       8
##   2001-Bush         0       4
##   2005-Bush         1       6
##   2009-Obama        1      10
##   2013-Obama        1       6
##   2017-Trump        1       5</code></pre>
<p>构造函数<code><a href="../../reference/dictionary.html">dictionary()</a></code>也适用于两种常见的“外来”字典格式：LIWC 和 Provalis Research’ Wordstat。例如，我们可以加载 LIWC 并将其应用于总统就职演讲语料库：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">liwcdict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="dt">file =</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,
                       <span class="dt">format =</span> <span class="st">"LIWC"</span>)
liwcdfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural[<span class="dv">52</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">dictionary =</span> liwcdict)
liwcdfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
</div>
</div>
</div>
<div id="further-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#further-examples" class="anchor"></a>更多范例</h1>
<div id="similarities-between-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#similarities-between-texts" class="anchor"></a>文本之间的相似度</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1980</span>), 
               <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)
obama_simil &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(pres_dfm, <span class="kw">c</span>(<span class="st">"2009-Obama"</span> , <span class="st">"2013-Obama"</span>), 
                             <span class="dt">margin =</span> <span class="st">"documents"</span>, <span class="dt">method =</span> <span class="st">"cosine"</span>)
obama_simil</code></pre></div>
<pre><code>##              2009-Obama 2013-Obama
## 1981-Reagan   0.6229949  0.6376412
## 1985-Reagan   0.6434472  0.6629428
## 1989-Bush     0.6253944  0.5784290
## 1993-Clinton  0.6280946  0.6265428
## 1997-Clinton  0.6593018  0.6466030
## 2001-Bush     0.6018113  0.6193608
## 2005-Bush     0.5266249  0.5867178
## 2009-Obama    1.0000000  0.6815711
## 2013-Obama    0.6815711  1.0000000
## 2017-Trump    0.5192075  0.5160104</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># dotchart(as.list(obama_simil)$"2009-Obama", xlab = "Cosine similarity")</span></code></pre></div>
<p>我们可以用这些距离来绘制树状图，聚类分析总统：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(data_corpus_sotu, <span class="dt">package =</span> <span class="st">"quanteda.corpora"</span>)
pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_sotu, Date <span class="op">&gt;</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1980-01-01"</span>)), 
               <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>,
               <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>))
pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(pres_dfm, <span class="dt">min_termfreq =</span> <span class="dv">5</span>, <span class="dt">min_docfreq =</span> <span class="dv">3</span>)

<span class="co">#分层聚类 -  在归一化dfm上计算距离</span>
pres_dist_mat &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_dist</a></span>(<span class="kw"><a href="../../reference/dfm_weight.html">dfm_weight</a></span>(pres_dfm, <span class="st">"prop"</span>))
<span class="co"># 聚类分析文本距离</span>
pres_cluster &lt;-<span class="st"> </span><span class="kw">hclust</span>(pres_dist_mat)
<span class="co"># 按文档名标注</span>
pres_cluster<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/docnames.html">docnames</a></span>(pres_dfm)
<span class="co"># 绘制树状图</span>
<span class="kw">plot</span>(pres_cluster, <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>, <span class="dt">main =</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</code></pre></div>
<p>我们也可查看特征相似度:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sim &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(pres_dfm, <span class="kw">c</span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>), <span class="dt">method =</span> <span class="st">"cosine"</span>, <span class="dt">margin =</span> <span class="st">"features"</span>)
<span class="kw">lapply</span>(<span class="kw">as.list</span>(sim), head, <span class="dv">10</span>)</code></pre></div>
<pre><code>## $fair
##   economi     begin jefferson    author     faith      call   struggl 
## 0.9080252 0.9075951 0.8981462 0.8944272 0.8866586 0.8608285 0.8451543 
##      best     creat    courag 
## 0.8366600 0.8347300 0.8326664 
## 
## $health
##     shape   generat     wrong    common  knowledg    planet      task 
## 0.9045340 0.8971180 0.8944272 0.8888889 0.8888889 0.8819171 0.8728716 
##    demand       eye     defin 
## 0.8666667 0.8660254 0.8642416 
## 
## $terror
##    potenti  adversari commonplac     miracl     racial     bounti 
##  0.9036961  0.9036961  0.8944272  0.8944272  0.8944272  0.8944272 
##     martin      dream      polit   guarante 
##  0.8944272  0.8624394  0.8500000  0.8485281</code></pre>
</div>
<div id="scaling-document-positions" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-document-positions" class="anchor"></a>文档位置的缩放分析</h2>
<p>我们在<code><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish()</a></code>功能上做了大量的开发工作，这里仅演示“wordfish”模型的无监督文档缩放分析：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># make prettier document names</span>
ie_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)
<span class="kw"><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(ie_dfm, <span class="dt">dir =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</code></pre></div>
<pre><code>## 
## Call:
## textmodel_wordfish.dfm(x = ie_dfm, dir = c(2, 1))
## 
## Dispersion: poisson; direction: 2 &lt; 1; 14 documents; 5140 features.</code></pre>
</div>
<div id="topic-models" class="section level2">
<h2 class="hasAnchor">
<a href="#topic-models" class="anchor"></a>主题模型</h2>
<p><strong>quanteda</strong>可以很轻松训练主题模型：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">quant_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, 
                <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"english"</span>))
quant_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(quant_dfm, <span class="dt">min_termfreq =</span> <span class="dv">4</span>, <span class="dt">max_docfreq =</span> <span class="dv">10</span>)
quant_dfm</code></pre></div>
<pre><code>## Document-feature matrix of: 14 documents, 1,263 features (64.5% sparse).</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="kw">require</span>(topicmodels)) {
    my_lda_fit20 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/lda">LDA</a></span>(<span class="kw"><a href="../../reference/convert.html">convert</a></span>(quant_dfm, <span class="dt">to =</span> <span class="st">"topicmodels"</span>), <span class="dt">k =</span> <span class="dv">20</span>)
    <span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/get">get_terms</a></span>(my_lda_fit20, <span class="dv">5</span>)
}</code></pre></div>
<pre><code>## Loading required package: topicmodels</code></pre>
<pre><code>##      Topic 1       Topic 2     Topic 3    Topic 4     Topic 5   
## [1,] "million"     "recession" "fianna"   "taoiseach" "welfare" 
## [2,] "support"     "fianna"    "fáil"     "employees" "taxation"
## [3,] "investment"  "lenihan"   "irish"    "rate"      "system"  
## [4,] "development" "queue"     "national" "referred"  "fáil"    
## [5,] "continue"    "sharing"   "ted"      "debate"    "stimulus"
##      Topic 6        Topic 7      Topic 8   Topic 9     Topic 10      
## [1,] "pensions"     "welfare"    "child"   "taoiseach" "system"      
## [2,] "welfare"      "energy"     "benefit" "fine"      "welfare"     
## [3,] "contribution" "employment" "day"     "gael"      "government's"
## [4,] "measures"     "rates"      "today"   "may"       "live"        
## [5,] "spending"     "adjustment" "bank"    "irish"     "policies"    
##      Topic 11    Topic 12      Topic 13  Topic 14       Topic 15   
## [1,] "allowance" "fianna"      "levy"    "society"      "failed"   
## [2,] "families"  "fáil"        "million" "enterprising" "strategy" 
## [3,] "hospital"  "citizenship" "carbon"  "sense"        "needed"   
## [4,] "system"    "side"        "change"  "equal"        "ministers"
## [5,] "care"      "alternative" "welfare" "nation"       "system"   
##      Topic 16     Topic 17      Topic 18   Topic 19     Topic 20      
## [1,] "families"   "kind"        "scheme"   "investment" "per"         
## [2,] "benefit"    "imagination" "review"   "reduction"  "policies"    
## [3,] "national"   "policies"    "measures" "system"     "benefit"     
## [4,] "fianna"     "wit"         "million"  "million"    "million"     
## [5,] "adjustment" "create"      "level"    "spending"   "unemployment"</code></pre>
<p>注：以上这个指南翻译于英文版<a href="http://docs.quanteda.io/articles/pkgdown/quickstart.html">quickstart</a>.</p>
</div>
</div>
<div id="processing-chinese-documentation" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-chinese-documentation" class="anchor"></a>Quanteda处理中文文档</h1>
<div id="chinese-stop-words" class="section level2">
<h2 class="hasAnchor">
<a href="#chinese-stop-words" class="anchor"></a>中文停用词：取自百度停用词</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 读取中文停用词</span>
csw &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"chinese"</span>)</code></pre></div>
<pre><code>## Warning: 'stopwords(language = "zh")' is deprecated.
## Use 'stopwords(language = "zh", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"中华人民共和国成立于1949 年"</span>)</code></pre></div>
<pre><code>## tokens from 1 document.
## text1 :
## [1] "中华"   "人民"   "共和国" "成立"   "于"     "1949"   "年"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 除去停用词</span>
<span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"中华人民共和国成立于1949 年"</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"chinese"</span>))</code></pre></div>
<pre><code>## Warning: 'stopwords(language = "zh")' is deprecated.
## Use 'stopwords(language = "zh", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<pre><code>## tokens from 1 document.
## text1 :
## [1] "中华"   "人民"   "共和国" "成立"   "1949"</code></pre>
</div>
<div id="chinese-government-report" class="section level2">
<h2 class="hasAnchor">
<a href="#chinese-government-report" class="anchor"></a>例子：中国总理的“政府工作报告”</h2>
<p>四十九份中国总理的“政府工作报告”，1954 - 2017</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 读取文件</span>
<span class="kw">load</span>(<span class="st">"examples/data/data_corpus_chinesegovreport.rda"</span>)
<span class="kw">summary</span>(data_corpus_chinesegovreport, <span class="dv">10</span>)</code></pre></div>
<pre><code>## Warning in nsentence.character(object, ...): nsentence() does not correctly
## count sentences in all lower-cased text</code></pre>
<pre><code>## Corpus consisting of 49 documents, showing 10 documents:
## 
##    Text Types Tokens Sentences                           doc_id Year
##   text1  2230  14093       453      1954政府工作报告_周恩来.txt 1954
##   text2  3053  35127       981      1955政府工作报告_李富春.txt 1955
##   text3  1514  13164       495      1956政府工作报告_李先念.txt 1956
##   text4  2585  21737       704      1957政府工作报告_周恩来.txt 1957
##   text5  2185  15164       412      1958政府工作报告_薄一波.txt 1958
##   text6  2512  19217       577      1959政府工作报告_周恩来.txt 1959
##   text7  1302   6268       164      1960政府工作报告_谭震林.txt 1960
##   text8  1892  11676       387 1964政府工作报告_周恩来_摘要.txt 1964
##   text9   966   3187       125      1975政府工作报告_周恩来.txt 1975
##  text10  2964  19119       659      1978政府工作报告_华国锋.txt 1978
##  Premier
##   周恩来
##   李富春
##   李先念
##   周恩来
##   薄一波
##   周恩来
##   谭震林
##   周恩来
##   周恩来
##   华国锋
## 
## Source: /home/wangh52/quanteda_2/vignettes/pkgdown_only/* on x86_64 by wangh52
## Created: Mon Nov 27 13:29:27 2017
## Notes:</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 分词</span>
chtoks &lt;-<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(data_corpus_chinesegovreport, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"chinese"</span>))</code></pre></div>
<pre><code>## Warning: 'stopwords(language = "zh")' is deprecated.
## Use 'stopwords(language = "zh", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 创建 dfm</span>
chdfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(chtoks)
<span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(chdfm)</code></pre></div>
<pre><code>## 发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 
## 5627 5036 4255 4248 2931 2897 2817 2642 2627 2595</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 </span>
<span class="co">#5627 5036 4255 4248 2931 2897 2817 2642 2627 2595 </span>

<span class="co"># 绘制词云图</span>
<span class="kw">set.seed</span>(<span class="dv">100</span>)
chdfm_tf &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(chdfm, <span class="dt">min_termfreq =</span> <span class="dv">500</span>)
<span class="co"># 设置适用于MacOS的字体</span>
<span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(chdfm_tf, <span class="dt">min_count =</span> <span class="dv">6</span>, <span class="dt">random_order =</span> <span class="ot">FALSE</span>,
                   <span class="dt">rot_per =</span> .<span class="dv">25</span>, <span class="dt">max_words =</span> <span class="dv">100</span>, 
                   <span class="dt">min_size =</span> .<span class="dv">5</span>, <span class="dt">max_size =</span> <span class="fl">2.8</span>,
                   <span class="dt">font =</span> <span class="cf">if</span> (<span class="kw">Sys.info</span>()[<span class="st">"sysname"</span>] <span class="op">==</span><span class="st"> "Darwin"</span>) <span class="st">"SimHei"</span> <span class="cf">else</span> <span class="ot">NULL</span>,
                   <span class="dt">color =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>))</code></pre></div>
<pre><code>## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter</code></pre>
<pre><code>## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i],
## offset = 0, : "rot_per" is not a graphical parameter</code></pre>
<p><img src="quickstart_cn_files/figure-html/fig1-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="features-co-occurrence-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#features-co-occurrence-matrix" class="anchor"></a>特征共现矩阵</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fcm -共现窗口为5，2017政府工作报告</span>
ch17txt &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_chinesegovreport, Year <span class="op">==</span><span class="st"> "2017"</span>)
ch17toks &lt;-<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(ch17txt, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/stopwords/topics/stopwords">stopwords</a></span>(<span class="st">"chinese"</span>))</code></pre></div>
<pre><code>## Warning: 'stopwords(language = "zh")' is deprecated.
## Use 'stopwords(language = "zh", source = "misc")' instead.
## See help("Deprecated")</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">chfcm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/fcm.html">fcm</a></span>(ch17toks, <span class="dt">context =</span> <span class="st">"window"</span>)  
<span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(chfcm[<span class="st">"改革"</span>, ])</code></pre></div>
<pre><code>## 推进 制度   性 体制 完善   试   点 供给   侧 结构 
##   23   19   11   11   10    8    8    7    7    7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fcm 共现窗口为："改革" + “xx”</span>
chfcm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/fcm.html">fcm</a></span>(ch17toks, <span class="dt">context =</span> <span class="st">"window"</span>, <span class="dt">ordered =</span> <span class="ot">TRUE</span>, <span class="dt">tri =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(chfcm[<span class="st">"改革"</span>, ])</code></pre></div>
<pre><code>## 完善 发展   试   点 制度 全面 推进 深化 社会 开放 
##   10    8    8    8    8    7    7    6    5    5</code></pre>
</div>
<div id="wordfish" class="section level2">
<h2 class="hasAnchor">
<a href="#wordfish" class="anchor"></a>文本缩放模型</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(chdfm)
y &lt;-<span class="st"> </span><span class="dv">1954</span><span class="op">:</span><span class="dv">2017</span>
y &lt;-<span class="st"> </span>y[<span class="op">-</span><span class="kw">which</span>(y<span class="op">==</span><span class="dv">1963</span> <span class="op">|</span><span class="st"> </span>y<span class="op">==</span><span class="dv">1961</span> <span class="op">|</span>y<span class="op">==</span><span class="dv">1962</span> <span class="op">|</span><span class="st"> </span>(y<span class="op">&gt;</span><span class="dv">1964</span> <span class="op">&amp;</span><span class="st"> </span>y<span class="op">&lt;</span><span class="dv">1975</span>) <span class="op">|</span><span class="st"> </span>y<span class="op">==</span><span class="dv">1976</span> <span class="op">|</span><span class="st"> </span>y<span class="op">==</span><span class="dv">1977</span>)]
<span class="kw">plot</span>(y, wfm<span class="op">$</span>theta, <span class="dt">xlab =</span> <span class="st">"Year"</span>, <span class="dt">ylab =</span> <span class="st">"Position"</span>)</code></pre></div>
<p><img src="quickstart_cn_files/figure-html/fig2-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="collocation" class="section level2">
<h2 class="hasAnchor">
<a href="#collocation" class="anchor"></a>词组 - 双词词组/三词词组等</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 所有报告中的双词词组</span>
ch_mw &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_collocations.html">textstat_collocations</a></span>(chtoks, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">min_count =</span> <span class="dv">20</span>, <span class="dt">tolower =</span> <span class="ot">TRUE</span>)
<span class="kw">head</span>(ch_mw, <span class="dv">10</span>)</code></pre></div>
<pre><code>##    collocation count count_nested length   lambda         z
## 1    社会 主义  1787            0      2 5.661200 128.61741
## 2        亿 元   689            0      2 7.445259  93.01487
## 3      现代 化   632            0      2 6.950471  83.55186
## 4    体制 改革   504            0      2 5.193065  77.37908
## 5    五年 计划   341            0      2 5.359068  71.64727
## 6    各级 政府   306            0      2 6.110596  66.63454
## 7    增长 百分   300            0      2 5.520761  65.88051
## 8        万 吨   212            0      2 6.589957  62.56344
## 9    国民 经济   589            0      2 6.014672  61.80426
## 10   充分 发挥   191            0      2 6.584129  61.24885</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 2017 报告中的双词词组</span>
ch_mw17 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_collocations.html">textstat_collocations</a></span>(ch17toks, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">tolower =</span> <span class="ot">TRUE</span>)
<span class="kw">head</span>(ch_mw17, <span class="dv">10</span>)</code></pre></div>
<pre><code>##    collocation count count_nested length   lambda        z
## 1    人民 群众    12            0      2 5.406485 12.89405
## 2        亿 元    14            0      2 8.302483 12.62130
## 3        调 控    11            0      2 7.593472 12.41243
## 4    政府 工作     9            0      2 4.709870 11.07905
## 5    深入 实施     8            0      2 5.018234 10.92377
## 6      党 中央     7            0      2 5.746878 10.90837
## 7    体制 改革    11            0      2 5.317035 10.53518
## 8    国内 生产     6            0      2 6.166520 10.48816
## 9      现代 化     8            0      2 5.705688 10.43435
## 10   基础 设施     7            0      2 7.549273 10.42465</code></pre>
<p>注：以上这部分介绍翻译于<a href="http://docs.quanteda.io/articles/pkgdown/examples/chinese.html">英文版</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#installing-the-package">软件包安装</a><ul class="nav nav-pills nav-stacked">
<li><a href="#additional-recommended-packages">推荐安装</a></li>
      </ul>
</li>
      <li>
<a href="#creating-a-corpus">创建语料库</a><ul class="nav nav-pills nav-stacked">
<li><a href="#currently-available-corpus-sources">目前可用的语料库资源</a></li>
      <li><a href="#how-a-quanteda-corpus-works">quanteda语料库工作方式</a></li>
      <li><a href="#tools-for-handling-corpus-objects">处理语料库对象的功能</a></li>
      <li><a href="#exploring-corpus-texts">浏览语料库文本</a></li>
      </ul>
</li>
      <li>
<a href="#extracting-features-from-a-corpus">从语料库中提取特征</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tokenizing-texts">文本分词</a></li>
      <li><a href="#constructing-a-document-feature-matrix">构建文档特征矩阵</a></li>
      </ul>
</li>
      <li>
<a href="#further-examples">更多范例</a><ul class="nav nav-pills nav-stacked">
<li><a href="#similarities-between-texts">文本之间的相似度</a></li>
      <li><a href="#scaling-document-positions">文档位置的缩放分析</a></li>
      <li><a href="#topic-models">主题模型</a></li>
      </ul>
</li>
      <li>
<a href="#processing-chinese-documentation">Quanteda处理中文文档</a><ul class="nav nav-pills nav-stacked">
<li><a href="#chinese-stop-words">中文停用词：取自百度停用词</a></li>
      <li><a href="#chinese-government-report">例子：中国总理的“政府工作报告”</a></li>
      <li><a href="#features-co-occurrence-matrix">特征共现矩阵</a></li>
      <li><a href="#wordfish">文本缩放模型</a></li>
      <li><a href="#collocation">词组 - 双词词组/三词词组等</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Patrick O. Perry, Jouni Kuha, Benjamin Lauderdale, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
